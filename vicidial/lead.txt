<?php
// Include necessary CSS for modern UI
echo '<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">';
echo '<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">';
echo '<style>
    .card {
        margin-bottom: 20px;
        box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        border-radius: 8px;
    }
    .card-header {
        background-color: #f8f9fa;
        border-bottom: 1px solid #dee2e6;
        font-weight: bold;
    }
    .form-group {
        margin-bottom: 15px;
    }
    .form-label {
        font-weight: 500;
    }
    .nav-tabs .nav-link {
        font-weight: 500;
    }
    .nav-tabs .nav-link.active {
        font-weight: 600;
    }
    .btn-primary {
        background-color: #0d6efd;
        border-color: #0d6efd;
    }
    .btn-primary:hover {
        background-color: #0b5ed7;
        border-color: #0a58ca;
    }
    .table-responsive {
        border-radius: 8px;
    }
    .alert {
        border-radius: 8px;
    }
    .color-preview {
        height: 30px;
        border-radius: 4px;
        border: 1px solid #ced4da;
    }
    .tab-content {
        padding-top: 20px;
    }
    .form-control:focus {
        border-color: #86b7fe;
        box-shadow: 0 0 0 0.25rem rgba(13, 110, 253, 0.25);
    }
    .form-select:focus {
        border-color: #86b7fe;
        box-shadow: 0 0 0 0.25rem rgba(13, 110, 253, 0.25);
    }
</style>';

// Include necessary JavaScript for modern UI
echo '<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>';

if ($ADD == 3111) {
    if ($LOGmodify_ingroups == 1) {
        if (($SSadmin_modify_refresh > 1) and ($modify_refresh_set < 1)) {
            $modify_url = "$PHP_SELF?ADD=3111&group_id=$group_id";
            $modify_footer_refresh = 1;
        }

        $stmt = "SELECT group_id,group_name,group_color,active,web_form_address,voicemail_ext,next_agent_call,fronter_display,ingroup_script,get_call_launch,xferconf_a_dtmf,xferconf_a_number,xferconf_b_dtmf,xferconf_b_number,drop_call_seconds,drop_action,drop_exten,call_time_id,after_hours_action,after_hours_message_filename,after_hours_exten,after_hours_voicemail,welcome_message_filename,moh_context,onhold_prompt_filename,prompt_interval,agent_alert_exten,agent_alert_delay,default_xfer_group,queue_priority,drop_inbound_group,ingroup_recording_override,ingroup_rec_filename,afterhours_xfer_group,qc_enabled,qc_statuses,qc_shift_id,qc_get_record_launch,qc_show_recording,qc_web_form_address,qc_script,play_place_in_line,play_estimate_hold_time,hold_time_option,hold_time_option_seconds,hold_time_option_exten,hold_time_option_voicemail,hold_time_option_xfer_group,hold_time_option_callback_filename,hold_time_option_callback_list_id,hold_recall_xfer_group,no_delay_call_route,play_welcome_message,answer_sec_pct_rt_stat_one,answer_sec_pct_rt_stat_two,default_group_alias,no_agent_no_queue,no_agent_action,no_agent_action_value,web_form_address_two,timer_action,timer_action_message,timer_action_seconds,start_call_url,dispo_call_url,xferconf_c_number,xferconf_d_number,xferconf_e_number,ignore_list_script_override,extension_appended_cidname,uniqueid_status_display,uniqueid_status_prefix,hold_time_option_minimum,hold_time_option_press_filename,hold_time_option_callmenu,onhold_prompt_no_block,onhold_prompt_seconds,hold_time_option_no_block,hold_time_option_prompt_seconds,hold_time_second_option,hold_time_third_option,wait_hold_option_priority,wait_time_option,wait_time_second_option,wait_time_third_option,wait_time_option_seconds,wait_time_option_exten,wait_time_option_voicemail,wait_time_option_xfer_group,wait_time_option_callmenu,wait_time_option_callback_filename,wait_time_option_callback_list_id,wait_time_option_press_filename,wait_time_option_no_block,wait_time_option_prompt_seconds,timer_action_destination,calculate_estimated_hold_seconds,add_lead_url,eht_minimum_prompt_filename,eht_minimum_prompt_no_block,eht_minimum_prompt_seconds,on_hook_ring_time,na_call_url,on_hook_cid,group_calldate,action_xfer_cid,drop_callmenu,after_hours_callmenu,user_group,max_calls_method,max_calls_count,max_calls_action,dial_ingroup_cid,group_handling,web_form_address_three,populate_lead_ingroup,drop_lead_reset,after_hours_lead_reset,nanq_lead_reset,wait_time_lead_reset,hold_time_lead_reset,status_group_id,routing_initiated_recordings,on_hook_cid_number,customer_chat_screen_colors,customer_chat_survey_link,customer_chat_survey_text,populate_lead_province,areacode_filter,areacode_filter_seconds,areacode_filter_action,areacode_filter_action_value,populate_state_areacode,inbound_survey,inbound_survey_filename,inbound_survey_accept_digit,inbound_survey_question_filename,inbound_survey_callmenu,icbq_expiration_hours,closing_time_action,closing_time_now_trigger,closing_time_filename,closing_time_end_filename,closing_time_lead_reset,closing_time_option_exten,closing_time_option_callmenu,closing_time_option_voicemail,closing_time_option_xfer_group,closing_time_option_callback_list_id,icbq_call_time_id,add_lead_timezone,icbq_dial_filter,populate_lead_source,populate_lead_vendor,park_file_name,waiting_call_url_on,waiting_call_url_off,enter_ingroup_url,cid_cb_confirm_number,cid_cb_invalid_filter_phone_group,cid_cb_valid_length,cid_cb_valid_filename,cid_cb_confirmed_filename,cid_cb_enter_filename,cid_cb_you_entered_filename,cid_cb_press_to_confirm_filename,cid_cb_invalid_filename,cid_cb_reenter_filename,cid_cb_error_filename,place_in_line_caller_number_filename,place_in_line_you_next_filename,ingroup_script_two,browser_alert_sound,browser_alert_volume,answer_signal,no_agent_delay,agent_search_method,qc_scorecard_id,qc_statuses_id,populate_lead_comments,drop_call_seconds_override,populate_lead_owner,in_queue_nanque,in_queue_nanque_exceptions,custom_one,custom_two,custom_three,custom_four,custom_five,second_alert_trigger,second_alert_trigger_seconds,second_alert_filename,second_alert_delay,second_alert_container,second_alert_only,third_alert_trigger,third_alert_trigger_seconds,third_alert_filename,third_alert_delay,third_alert_container,third_alert_only,agent_search_list,state_descriptions,stereo_recording,stereo_rec_filename,stereo_parallel_recording,recording_dtmf_muting,stereo_recording_agent,parallel_rec_co_filename,parallel_rec_cm_filename,parallel_rec_fr_filename from vicidial_inbound_groups where group_id='$group_id' $LOGadmin_viewable_groupsSQL;";

        $rslt = mysql_to_mysqli($stmt, $link);
        $row = mysqli_fetch_row($rslt);
        $query_group_id = $row[0];
        $group_name = $row[1];
        $group_color = $row[2];
        $active = $row[3];
        $web_form_address = stripslashes($row[4]);
        $voicemail_ext = $row[5];
        $next_agent_call = $row[6];
        $fronter_display = $row[7];
        $script_id = $row[8];
        $get_call_launch = $row[9];
        $xferconf_a_dtmf = $row[10];
        $xferconf_a_number = $row[11];
        $xferconf_b_dtmf = $row[12];
        $xferconf_b_number = $row[13];
        $drop_call_seconds = $row[14];
        $drop_action = $row[15];
        $drop_exten = $row[16];
        $call_time_id = $row[17];
        $after_hours_action = $row[18];
        $after_hours_message_filename = $row[19];
        $after_hours_exten = $row[20];
        $after_hours_voicemail = $row[21];
        $welcome_message_filename = $row[22];
        $moh_context = $row[23];
        $onhold_prompt_filename = $row[24];
        $prompt_interval = $row[25];
        $agent_alert_exten = $row[26];
        $agent_alert_delay = $row[27];
        $default_xfer_group = $row[28];
        $queue_priority = $row[29];
        $drop_inbound_group = $row[30];
        $ingroup_recording_override = $row[31];
        $ingroup_rec_filename = $row[32];
        $afterhours_xfer_group = $row[33];
        $qc_enabled = $row[34];
        $qc_statuses = $row[35];
        $qc_shift_id = $row[36];
        $qc_get_record_launch = $row[37];
        $qc_show_recording = $row[38];
        $qc_web_form_address = stripslashes($row[39]);
        $qc_script = $row[40];
        $play_place_in_line = $row[41];
        $play_estimate_hold_time = $row[42];
        $hold_time_option = $row[43];
        $hold_time_option_seconds = $row[44];
        $hold_time_option_exten = $row[45];
        $hold_time_option_voicemail = $row[46];
        $hold_time_option_xfer_group = $row[47];
        $hold_time_option_callback_filename = $row[48];
        $hold_time_option_callback_list_id = $row[49];
        $hold_recall_xfer_group = $row[50];
        $no_delay_call_route = $row[51];
        $play_welcome_message = $row[52];
        $answer_sec_pct_rt_stat_one = $row[53];
        $answer_sec_pct_rt_stat_two = $row[54];
        $default_group_alias = $row[55];
        $no_agent_no_queue = $row[56];
        $no_agent_action = $row[57];
        $no_agent_action_value = $row[58];
        $web_form_address_two = stripslashes($row[59]);
        $timer_action = $row[60];
        $timer_action_message = $row[61];
        $timer_action_seconds = $row[62];
        $start_call_url = $row[63];
        $dispo_call_url = $row[64];
        $xferconf_c_number = $row[65];
        $xferconf_d_number = $row[66];
        $xferconf_e_number = $row[67];
        $ignore_list_script_override = $row[68];
        $extension_appended_cidname = $row[69];
        $uniqueid_status_display = $row[70];
        $uniqueid_status_prefix = $row[71];
        $hold_time_option_minimum = $row[72];
        $hold_time_option_press_filename = $row[73];
        $hold_time_option_callmenu = $row[74];
        $onhold_prompt_no_block = $row[75];
        $onhold_prompt_seconds = $row[76];
        $hold_time_option_no_block = $row[77];
        $hold_time_option_prompt_seconds = $row[78];
        $hold_time_second_option = $row[79];
        $hold_time_third_option = $row[80];
        $wait_hold_option_priority = $row[81];
        $wait_time_option = $row[82];
        $wait_time_second_option = $row[83];
        $wait_time_third_option = $row[84];
        $wait_time_option_seconds = $row[85];
        $wait_time_option_exten = $row[86];
        $wait_time_option_voicemail = $row[87];
        $wait_time_option_xfer_group = $row[88];
        $wait_time_option_callmenu = $row[89];
        $wait_time_option_callback_filename = $row[90];
        $wait_time_option_callback_list_id = $row[91];
        $wait_time_option_press_filename = $row[92];
        $wait_time_option_no_block = $row[93];
        $wait_time_option_prompt_seconds = $row[94];
        $timer_action_destination = $row[95];
        $calculate_estimated_hold_seconds = $row[96];
        $add_lead_url = $row[97];
        $eht_minimum_prompt_filename = $row[98];
        $eht_minimum_prompt_no_block = $row[99];
        $eht_minimum_prompt_seconds = $row[100];
        $on_hook_ring_time = $row[101];
        $na_call_url = $row[102];
        $on_hook_cid = $row[103];
        $group_calldate = $row[104];
        $action_xfer_cid = $row[105];
        $drop_callmenu = $row[106];
        $after_hours_callmenu = $row[107];
        $user_group = $row[108];
        $max_calls_method = $row[109];
        $max_calls_count = $row[110];
        $max_calls_action = $row[111];
        $dial_ingroup_cid = $row[112];
        $group_handling = $row[113];
        $web_form_address_three = stripslashes($row[114]);
        $populate_lead_ingroup = $row[115];
        $drop_lead_reset = $row[116];
        $after_hours_lead_reset = $row[117];
        $nanq_lead_reset = $row[118];
        $wait_time_lead_reset = $row[119];
        $hold_time_lead_reset = $row[120];
        $status_group_id = $row[121];
        $routing_initiated_recordings = $row[122];
        $on_hook_cid_number = $row[123];
        $customer_chat_screen_colors = $row[124];
        $customer_chat_survey_link = $row[125];
        $customer_chat_survey_text = $row[126];
        $populate_lead_province = $row[127];
        $areacode_filter = $row[128];
        $areacode_filter_seconds = $row[129];
        $areacode_filter_action = $row[130];
        $areacode_filter_action_value = $row[131];
        $populate_state_areacode = $row[132];
        $inbound_survey = $row[133];
        $inbound_survey_filename = $row[134];
        $inbound_survey_accept_digit = $row[135];
        $inbound_survey_question_filename = $row[136];
        $inbound_survey_callmenu = $row[137];
        $icbq_expiration_hours = $row[138];
        $closing_time_action = $row[139];
        $closing_time_now_trigger = $row[140];
        $closing_time_filename = $row[141];
        $closing_time_end_filename = $row[142];
        $closing_time_lead_reset = $row[143];
        $closing_time_option_exten = $row[144];
        $closing_time_option_callmenu = $row[145];
        $closing_time_option_voicemail = $row[146];
        $closing_time_option_xfer_group = $row[147];
        $closing_time_option_callback_list_id = $row[148];
        $icbq_call_time_id = $row[149];
        $add_lead_timezone = $row[150];
        $icbq_dial_filter = $row[151];
        $populate_lead_source = $row[152];
        $populate_lead_vendor = $row[153];
        $park_file_name = $row[154];
        $waiting_call_url_on = $row[155];
        $waiting_call_url_off = $row[156];
        $enter_ingroup_url = $row[157];
        $cid_cb_confirm_number = $row[158];
        $cid_cb_invalid_filter_phone_group = $row[159];
        $cid_cb_valid_length = $row[160];
        $cid_cb_valid_filename = $row[161];
        $cid_cb_confirmed_filename = $row[162];
        $cid_cb_enter_filename = $row[163];
        $cid_cb_you_entered_filename = $row[164];
        $cid_cb_press_to_confirm_filename = $row[165];
        $cid_cb_invalid_filename = $row[166];
        $cid_cb_reenter_filename = $row[167];
        $cid_cb_error_filename = $row[168];
        $place_in_line_caller_number_filename = $row[169];
        $place_in_line_you_next_filename = $row[170];
        $ingroup_script_two = $row[171];
        $browser_alert_sound = $row[172];
        $browser_alert_volume = $row[173];
        $answer_signal = $row[174];
        $no_agent_delay = $row[175];
        $agent_search_method = $row[176];
        $qc_scorecard_id = $row[177];
        $qc_statuses_id = $row[178];
        $populate_lead_comments = $row[179];
        $drop_call_seconds_override = $row[180];
        $populate_lead_owner = $row[181];
        $in_queue_nanque = $row[182];
        $in_queue_nanque_exceptions = $row[183];
        $custom_one = $row[184];
        $custom_two = $row[185];
        $custom_three = $row[186];
        $custom_four = $row[187];
        $custom_five = $row[188];
        $second_alert_trigger = $row[189];
        $second_alert_trigger_seconds = $row[190];
        $second_alert_filename = $row[191];
        $second_alert_delay = $row[192];
        $second_alert_container = $row[193];
        $second_alert_only = $row[194];
        $third_alert_trigger = $row[195];
        $third_alert_trigger_seconds = $row[196];
        $third_alert_filename = $row[197];
        $third_alert_delay = $row[198];
        $third_alert_container = $row[199];
        $third_alert_only = $row[200];
        $agent_search_list = $row[201];
        $state_descriptions = $row[202];
        $stereo_recording = $row[203];
        $stereo_rec_filename = $row[204];
        $stereo_parallel_recording = $row[205];
        $recording_dtmf_muting = $row[206];
        $stereo_recording_agent = $row[207];
        $parallel_rec_co_filename = $row[208];
        $parallel_rec_cm_filename = $row[209];
        $parallel_rec_fr_filename = $row[210];

        // Get callmenu listings for dynamic pulldown
        $stmt = "SELECT menu_id,menu_name from vicidial_call_menu $whereLOGadmin_viewable_groupsSQL order by menu_id;";
        $rslt = mysql_to_mysqli($stmt, $link);
        $Xmenus_to_print = mysqli_num_rows($rslt);
        $o = 0;
        $Xmenuslist = '';
        $Wmenuslist = '';
        $Cmenuslist = '';
        while ($Xmenus_to_print > $o) {
            $rowx = mysqli_fetch_row($rslt);
            $Xmenuslist .= "<option ";
            $Wmenuslist .= "<option ";
            $Cmenuslist .= "<option ";
            if ($hold_time_option_callmenu == "$rowx[0]") {
                $Xmenuslist .= "SELECTED ";
                $Xmenus_selected++;
            }
            if ($wait_time_option_callmenu == "$rowx[0]") {
                $Wmenuslist .= "SELECTED ";
                $Wmenus_selected++;
            }
            if ($closing_time_option_callmenu == "$rowx[0]") {
                $Cmenuslist .= "SELECTED ";
                $Cmenus_selected++;
            }
            $Xmenuslist .= "value=\"$rowx[0]\">$rowx[0] - $rowx[1]</option>\n";
            $Wmenuslist .= "value=\"$rowx[0]\">$rowx[0] - $rowx[1]</option>\n";
            $Cmenuslist .= "value=\"$rowx[0]\">$rowx[0] - $rowx[1]</option>\n";
            $o++;
        }
        if ($Xmenus_selected < 1) {
            $Xmenuslist .= "<option SELECTED value=\"---NONE---\">---" . _QXZ("NONE") . "---</option>\n";
        }
        if ($Wmenus_selected < 1) {
            $Wmenuslist .= "<option SELECTED value=\"---NONE---\">---" . _QXZ("NONE") . "---</option>\n";
        }
        if ($Cmenus_selected < 1) {
            $Cmenuslist .= "<option SELECTED value=\"---NONE---\">---" . _QXZ("NONE") . "---</option>\n";
        }

        // Get in-groups listings for dynamic pulldown
        $stmt = "SELECT group_id,group_name from vicidial_inbound_groups where group_id NOT IN('AGENTDIRECT') $LOGadmin_viewable_groupsSQL order by group_id;";
        $rslt = mysql_to_mysqli($stmt, $link);
        $Xgroups_to_print = mysqli_num_rows($rslt);
        $Xgroups_menu = '';
        $Xgroups_selected = 0;
        $Dgroups_menu = '';
        $Dgroups_selected = 0;
        $Agroups_menu = '';
        $Agroups_selected = 0;
        $Hgroups_menu = '';
        $Hgroups_selected = 0;
        $Wgroups_menu = '';
        $Wgroups_selected = 0;
        $Tgroups_menu = '';
        $Tgroups_selected = 0;
        $Cgroups_menu = '';
        $Cgroups_selected = 0;
        $o = 0;
        while ($Xgroups_to_print > $o) {
            $rowx = mysqli_fetch_row($rslt);
            $Xgroups_menu .= "<option ";
            $Dgroups_menu .= "<option ";
            $Agroups_menu .= "<option ";
            $Tgroups_menu .= "<option ";
            $Cgroups_menu .= "<option ";
            $Wgroups_menu .= "<option ";
            $Hgroups_menu .= "<option ";
            if ($default_xfer_group == "$rowx[0]") {
                $Xgroups_menu .= "SELECTED ";
                $Xgroups_selected++;
            }
            if ($drop_inbound_group == "$rowx[0]") {
                $Dgroups_menu .= "SELECTED ";
                $Dgroups_selected++;
            }
            if ($afterhours_xfer_group == "$rowx[0]") {
                $Agroups_menu .= "SELECTED ";
                $Agroups_selected++;
            }
            if ($hold_time_option_xfer_group == "$rowx[0]") {
                $Tgroups_menu .= "SELECTED ";
                $Tgroups_selected++;
            }
            if ($closing_time_option_xfer_group == "$rowx[0]") {
                $Cgroups_menu .= "SELECTED ";
                $Cgroups_selected++;
            }
            if ($wait_time_option_xfer_group == "$rowx[0]") {
                $Wgroups_menu .= "SELECTED ";
                $Wgroups_selected++;
            }
            if ($hold_recall_xfer_group == "$rowx[0]") {
                $Hgroups_menu .= "SELECTED ";
                $Hgroups_selected++;
            }
            $Xgroups_menu .= "value=\"$rowx[0]\">$rowx[0] - $rowx[1]</option>\n";
            $Dgroups_menu .= "value=\"$rowx[0]\">$rowx[0] - $rowx[1]</option>\n";
            if ($group_id != $rowx[0]) {
                $Agroups_menu .= "value=\"$rowx[0]\">$rowx[0] - $rowx[1]</option>\n";
                $Tgroups_menu .= "value=\"$rowx[0]\">$rowx[0] - $rowx[1]</option>\n";
                $Cgroups_menu .= "value=\"$rowx[0]\">$rowx[0] - $rowx[1]</option>\n";
                $Wgroups_menu .= "value=\"$rowx[0]\">$rowx[0] - $rowx[1]</option>\n";
                $Hgroups_menu .= "value=\"$rowx[0]\">$rowx[0] - $rowx[1]</option>\n";
            }
            $o++;
        }
        if ($Xgroups_selected < 1) {
            $Xgroups_menu .= "<option SELECTED value=\"---NONE---\">---" . _QXZ("NONE") . "---</option>\n";
        } else {
            $Xgroups_menu .= "<option value=\"---NONE---\">---" . _QXZ("NONE") . "---</option>\n";
        }
        if ($Dgroups_selected < 1) {
            $Dgroups_menu .= "<option SELECTED value=\"---NONE---\">---" . _QXZ("NONE") . "---</option>\n";
        } else {
            $Dgroups_menu .= "<option value=\"---NONE---\">---" . _QXZ("NONE") . "---</option>\n";
        }
        if ($Agroups_selected < 1) {
            $Agroups_menu .= "<option SELECTED value=\"---NONE---\">---" . _QXZ("NONE") . "---</option>\n";
        } else {
            $Agroups_menu .= "<option value=\"---NONE---\">---" . _QXZ("NONE") . "---</option>\n";
        }
        if ($Tgroups_selected < 1) {
            $Tgroups_menu .= "<option SELECTED value=\"---NONE---\">---" . _QXZ("NONE") . "---</option>\n";
        } else {
            $Tgroups_menu .= "<option value=\"---NONE---\">---" . _QXZ("NONE") . "---</option>\n";
        }
        if ($Cgroups_selected < 1) {
            $Cgroups_menu .= "<option SELECTED value=\"---NONE---\">---" . _QXZ("NONE") . "---</option>\n";
        } else {
            $Cgroups_menu .= "<option value=\"---NONE---\">---" . _QXZ("NONE") . "---</option>\n";
        }
        if ($Wgroups_selected < 1) {
            $Wgroups_menu .= "<option SELECTED value=\"---NONE---\">---" . _QXZ("NONE") . "---</option>\n";
        } else {
            $Wgroups_menu .= "<option value=\"---NONE---\">---" . _QXZ("NONE") . "---</option>\n";
        }
        if ($Hgroups_selected < 1) {
            $Hgroups_menu .= "<option SELECTED value=\"---NONE---\">---" . _QXZ("NONE") . "---</option>\n";
        } else {
            $Hgroups_menu .= "<option value=\"---NONE---\">---" . _QXZ("NONE") . "---</option>\n";
        }

        $allowed_campaigns_count = 0;
        $allowed_campaigns_warning = '';
        $SQL_query_group_id = preg_replace("/_/", '\\_', $query_group_id);
        $stmt = "SELECT count(*) from vicidial_campaigns where closer_campaigns LIKE \"% $SQL_query_group_id %\" $LOGallowed_campaignsSQL;";
        $rslt = mysql_to_mysqli($stmt, $link);
        $campin_to_print = mysqli_num_rows($rslt);
        $vc_allowed_ct = 0;
        if ($campin_to_print > $vc_allowed_ct) {
            $rowc = mysqli_fetch_row($rslt);
            $allowed_campaigns_count = $rowc[0];
            $vc_allowed_ct++;
        }
        if ($allowed_campaigns_count < 1) {
            $allowed_campaigns_warning = '<div class="alert alert-warning"><i class="bi bi-exclamation-triangle-fill"></i> ' . _QXZ("Not set as allowed in any campaigns") . '!</div>';
        }

        // Get container listings for dynamic WEEKDAY_TIMERANGE_SECONDS container pulldown menu
        $stmt = "SELECT container_id,container_notes from vicidial_settings_containers where container_type='WEEKDAY_TIMERANGE_SECONDS' $LOGadmin_viewable_groupsSQL order by container_id;";
        $rslt = mysql_to_mysqli($stmt, $link);
        $dtlc_to_print = mysqli_num_rows($rslt);
        $drop_call_seconds_override_menu = '';
        $dtlc_selected = 0;
        $o = 0;
        while ($dtlc_to_print > $o) {
            $rowx = mysqli_fetch_row($rslt);
            if (mb_strlen($rowx[1], 'utf-8') > 40) {
                $rowx[1] = mb_substr($rowx[1], 0, 40, 'utf-8') . '...';
            }
            $drop_call_seconds_override_menu .= "<option ";
            if ($drop_call_seconds_override == "$rowx[0]") {
                $drop_call_seconds_override_menu .= "SELECTED ";
                $dtlc_selected++;
            }
            $drop_call_seconds_override_menu .= "value=\"$rowx[0]\">$rowx[0] - $rowx[1]</option>\n";
            $o++;
        }

        // Get container listings for dynamic PAUSE_CODES_LIST container pulldown menu
        $stmt = "SELECT container_id,container_notes from vicidial_settings_containers where container_type='PAUSE_CODES_LIST' $LOGadmin_viewable_groupsSQL order by container_id;";
        $rslt = mysql_to_mysqli($stmt, $link);
        $dtlc_to_print = mysqli_num_rows($rslt);
        $in_queue_nanque_exceptions_menu = '';
        $dtlc_selected = 0;
        $o = 0;
        while ($dtlc_to_print > $o) {
            $rowx = mysqli_fetch_row($rslt);
            if (mb_strlen($rowx[1], 'utf-8') > 40) {
                $rowx[1] = mb_substr($rowx[1], 0, 40, 'utf-8') . '...';
            }
            $in_queue_nanque_exceptions_menu .= "<option ";
            if ($in_queue_nanque_exceptions == "$rowx[0]") {
                $in_queue_nanque_exceptions_menu .= "SELECTED ";
                $dtlc_selected++;
            }
            $in_queue_nanque_exceptions_menu .= "value=\"$rowx[0]\">$rowx[0] - $rowx[1]</option>\n";
            $o++;
        }

        // Get container listings for dynamic in-group list pulldown menu
        $stmt = "SELECT container_id,container_notes from vicidial_settings_containers where container_type='INGROUP_LIST' $LOGadmin_viewable_groupsSQL order by container_id;";
        $rslt = mysql_to_mysqli($stmt, $link);
        $inand_to_print = mysqli_num_rows($rslt);
        $second_alert_container_menu = '';
        $inand_selected = 0;
        $o = 0;
        while ($inand_to_print > $o) {
            $rowx = mysqli_fetch_row($rslt);
            if (mb_strlen($rowx[1], 'utf-8') > 40) {
                $rowx[1] = mb_substr($rowx[1], 0, 40, 'utf-8') . '...';
            }
            $second_alert_container_menu .= "<option ";
            if ($second_alert_container == "$rowx[0]") {
                $second_alert_container_menu .= "SELECTED ";
                $inand_selected++;
            }
            $second_alert_container_menu .= "value=\"$rowx[0]\">$rowx[0] - $rowx[1]</option>\n";
            $o++;
        }

        // Get container listings for dynamic STATE_DESCRIPTIONS container pulldown menu
        $stmt = "SELECT container_id,container_notes from vicidial_settings_containers where container_type='STATE_DESCRIPTIONS' $LOGadmin_viewable_groupsSQL order by container_id;";
        $rslt = mysql_to_mysqli($stmt, $link);
        $sdb_to_print = mysqli_num_rows($rslt);
        $state_descriptions_menu = '';
        $sdb_selected = 0;
        $o = 0;
        while ($sdb_to_print > $o) {
            $rowx = mysqli_fetch_row($rslt);
            if (mb_strlen($rowx[1], 'utf-8') > 40) {
                $rowx[1] = mb_substr($rowx[1], 0, 40, 'utf-8') . '...';
            }
            $state_descriptions_menu .= "<option ";
            if ($state_descriptions == "$rowx[0]") {
                $state_descriptions_menu .= "SELECTED ";
                $sdb_selected++;
            }
            $state_descriptions_menu .= "value=\"$rowx[0]\">$rowx[0] - $rowx[1]</option>\n";
            $o++;
        }

        // Get QC status container listings for pulldown
        $stmt = "SELECT container_id,container_notes from vicidial_settings_containers where container_type='QC_TEMPLATE' order by container_id;";
        $rslt = mysql_to_mysqli($stmt, $link);
        $containers_to_print = mysqli_num_rows($rslt);
        $QCcontainers_list = "<option value=\"\">NONE</option>";
        $o = 0;
        while ($containers_to_print > $o) {
            $rowx = mysqli_fetch_row($rslt);
            $QCcontainers_list .= "<option value=\"$rowx[0]\">$rowx[0] - $rowx[1]</option>\n";
            $qc_containers_list["$rowx[0]"] = "$rowx[1]";
            $o++;
        }

        // Get scorecards listings for pulldown
        $stmt = "SELECT qc_scorecard_id,scorecard_name from quality_control_scorecards where active='Y' order by qc_scorecard_id;";
        $rslt = mysql_to_mysqli($stmt, $link);
        $scorecards_to_print = mysqli_num_rows($rslt);
        $QCscorecards_list = "<option value=\"\">NONE</option>";
        $o = 0;
        while ($scorecards_to_print > $o) {
            $rowx = mysqli_fetch_row($rslt);
            $QCscorecards_list .= "<option value=\"$rowx[0]\">$rowx[0] - $rowx[1]</option>\n";
            $scorecardname_list["$rowx[0]"] = "$rowx[1]";
            $o++;
        }

        // Get scripts listings for pulldown
        $stmt = "SELECT script_id,script_name from vicidial_scripts $whereLOGadmin_viewable_groupsSQL order by script_id;";
        $rslt = mysql_to_mysqli($stmt, $link);
        $scripts_to_print = mysqli_num_rows($rslt);
        $QCscripts_list = "";
        $o = 0;
        while ($scripts_to_print > $o) {
            $rowx = mysqli_fetch_row($rslt);
            $QCscripts_list .= "<option value=\"$rowx[0]\">$rowx[0] - $rowx[1]</option>\n";
            $scriptname_list["$rowx[0]"] = "$rowx[1]";
            $o++;
        }

        // Get shifts listings for pulldown
        $stmt = "SELECT shift_id,shift_name from vicidial_shifts $whereLOGadmin_viewable_groupsSQL order by shift_id;";
        $rslt = mysql_to_mysqli($stmt, $link);
        $shifts_to_print = mysqli_num_rows($rslt);
        $QCshifts_list = "";
        $o = 0;
        while ($shifts_to_print > $o) {
            $rowx = mysqli_fetch_row($rslt);
            $QCshifts_list .= "<option value=\"$rowx[0]\">$rowx[0] - $rowx[1]</option>\n";
            $shiftname_list["$rowx[0]"] = "$rowx[1]";
            $o++;
        }

        // Get status group listings for dynamic pulldown menu
        $stmt = "SELECT status_group_id,status_group_notes from vicidial_status_groups $whereLOGadmin_viewable_groupsSQL order by status_group_id;";
        $rslt = mysql_to_mysqli($stmt, $link);
        $status_groups_to_print = mysqli_num_rows($rslt);
        $status_groups_menu = '';
        $status_groups_selected = 0;
        $o = 0;
        while ($status_groups_to_print > $o) {
            $rowx = mysqli_fetch_row($rslt);
            $status_groups_menu .= "<option ";
            if ($status_group_id == "$rowx[0]") {
                $status_groups_menu .= "SELECTED ";
                $status_groups_selected++;
            }
            $status_groups_menu .= "value=\"$rowx[0]\">$rowx[0] - $rowx[1]</option>\n";
            $o++;
        }
        $sglinkB = '';
        $sglinkE = '';
        if (strlen($status_group_id) > 1) {
            $sglinkB = "<a href=\"$PHP_SELF?ADD=393111111111&status_group_id=$status_group_id\">";
            $sglinkE = '</a>';
        }

        // Get groups_alias listings for dynamic default group alias pulldown list menu
        $stmt = "SELECT group_alias_id,group_alias_name from groups_alias where active='Y' $LOGadmin_viewable_groupsSQL order by group_alias_id;";
        $rslt = mysql_to_mysqli($stmt, $link);
        $group_alias_to_print = mysqli_num_rows($rslt);
        $group_alias_menu = '';
        $group_alias_selected = 0;
        $o = 0;
        while ($group_alias_to_print > $o) {
            $rowx = mysqli_fetch_row($rslt);
            $group_alias_menu .= "<option ";
            if ($default_group_alias == "$rowx[0]") {
                $group_alias_menu .= "SELECTED ";
                $group_alias_selected++;
            }
            $group_alias_menu .= "value=\"$rowx[0]\">$rowx[0] - $rowx[1]</option>\n";
            $o++;
        }

        // Get filter_phone_groups listings for pulldown
        $stmt = "SELECT filter_phone_group_id,filter_phone_group_name from vicidial_filter_phone_groups $whereLOGadmin_viewable_groupsSQL order by filter_phone_group_id;";
        $rslt = mysql_to_mysqli($stmt, $link);
        $Fgroups_to_print = mysqli_num_rows($rslt);
        $Fgroups_list = '';
        $i = 0;
        while ($i < $Fgroups_to_print) {
            $row = mysqli_fetch_row($rslt);
            $Fgroups_list .= "<option value=\"$row[0]\">$row[0] - $row[1] - $row[2]</option>";
            $i++;
        }

        // Check for callback queue calls
        $stmt = "SELECT count(*) from vicidial_inbound_callback_queue where group_id='$group_id' and icbq_status='LIVE';";
        $rslt = mysql_to_mysqli($stmt, $link);
        $icbq_to_print = mysqli_num_rows($rslt);
        $icbq_count = 0;
        if ($icbq_to_print > 0) {
            $row = mysqli_fetch_row($rslt);
            if ($row[0] > 0) {
                $icbq_count = $row[0];
            }
        }

        // Check for areacode filters
        $stmt = "SELECT count(*) from vicidial_areacode_filters where group_id='$group_id';";
        $rslt = mysql_to_mysqli($stmt, $link);
        $row = mysqli_fetch_row($rslt);
        $vaf_count = $row[0];

        // Check for onhold prompt filename length
        $wav = '.wav';
        $gsm = '.gsm';
        $ohpf_message = '';
        $stmt = "SELECT audio_length from audio_store_details where audio_filename IN('$onhold_prompt_filename$wav','$onhold_prompt_filename$gsm') order by audio_length desc limit 1;";
        $rslt = mysql_to_mysqli($stmt, $link);
        $audio_to_print = mysqli_num_rows($rslt);
        if ($audio_to_print > 0) {
            $rowx = mysqli_fetch_row($rslt);
            $audio_length = $rowx[0];
            if ($audio_length > 9) {
                $ohpf_message = "<div class='alert alert-danger'><i class='bi bi-exclamation-triangle-fill'></i> " . _QXZ("The On Hold Prompt Filename you have selected above is too long, please select one that is 9 seconds or less.") . " ($audio_length " . _QXZ("seconds") . ")</div>";
            }
        }

        // Check for talk seconds URLs
        $stmt = "SELECT count(*) from vicidial_url_multi where campaign_id='$group_id' and entry_type='ingroup' and url_type='talk';";
        $rslt = mysql_to_mysqli($stmt, $link);
        $vum_to_print = mysqli_num_rows($rslt);
        $vum_count = 0;
        if ($vum_to_print > 0) {
            $rowx = mysqli_fetch_row($rslt);
            $vum_count = $rowx[0];
        }

        // Check if this In-Group has talk seconds url set to -FORCEDISABLE-
        $force_disableHTML = '';
        $stmt = "SELECT count(*) from vicidial_url_multi where campaign_id='$group_id' and entry_type='ingroup' and url_type='talk' and active='N' and url_address LIKE \"%FORCEDISABLE%\";";
        $rslt = mysql_to_mysqli($stmt, $link);
        $fdtsu_to_print = mysqli_num_rows($rslt);
        if ($fdtsu_to_print > 0) {
            $rowx = mysqli_fetch_row($rslt);
            if ($rowx[0] > 0) {
                $force_disableHTML = "<span class='badge bg-danger'>" . _QXZ("FORCED DISABLE") . "</span>";
            }
        }

        // Check for alternate URLs
        $start_call_url_count = 0;
        $dispo_call_url_count = 0;
        $na_call_url_count = 0;

        if ($start_call_url == 'ALT') {
            $stmt = "SELECT count(*) from vicidial_url_multi where campaign_id='$group_id' and entry_type='ingroup' and url_type='start';";
            $rslt = mysql_to_mysqli($stmt, $link);
            $vum_to_print = mysqli_num_rows($rslt);
            if ($vum_to_print > 0) {
                $rowx = mysqli_fetch_row($rslt);
                $start_call_url_count = $rowx[0];
            }
        }

        if ($dispo_call_url == 'ALT') {
            $stmt = "SELECT count(*) from vicidial_url_multi where campaign_id='$group_id' and entry_type='ingroup' and url_type='dispo';";
            $rslt = mysql_to_mysqli($stmt, $link);
            $vum_to_print = mysqli_num_rows($rslt);
            if ($vum_to_print > 0) {
                $rowx = mysqli_fetch_row($rslt);
                $dispo_call_url_count = $rowx[0];
            }
        }

        if ($na_call_url == 'ALT') {
            $stmt = "SELECT count(*) from vicidial_url_multi where campaign_id='$group_id' and entry_type='ingroup' and url_type='noagent';";
            $rslt = mysql_to_mysqli($stmt, $link);
            $vum_to_print = mysqli_num_rows($rslt);
            if ($vum_to_print > 0) {
                $rowx = mysqli_fetch_row($rslt);
                $na_call_url_count = $rowx[0];
            }
        }

        // Check for DID edit link
        $DID_edit_link_BEGIN = '';
        $DID_edit_link_END = '';
        if (strlen($dial_ingroup_cid) > 0) {
            $stmt = "SELECT did_id from vicidial_inbound_dids where did_pattern='$dial_ingroup_cid' $LOGadmin_viewable_groupsSQL limit 1;";
            $rslt = mysql_to_mysqli($stmt, $link);
            $dids_to_print = mysqli_num_rows($rslt);
            if ($dids_to_print > 0) {
                $rowx = mysqli_fetch_row($rslt);
                $DID_edit_link_BEGIN = "<a href=\"$PHP_SELF?ADD=3311&did_id=$rowx[0]\">";
                $DID_edit_link_END = '</a>';
            }
        }

        // Check for call time holidays
        $stmt = "SELECT ct_holidays from vicidial_call_times where call_time_id='$call_time_id';";
        $rslt = mysql_to_mysqli($stmt, $link);
        $call_times_to_print = mysqli_num_rows($rslt);
        $ct_hrs = 0;
        if ($call_times_to_print > 0) {
            $rowx = mysqli_fetch_row($rslt);
            $ct_holidays = $rowx[0];
            $holiday_rules = explode('|', $ct_holidays);
            $ct_hrs = ((count($holiday_rules)) - 2);
            if ($ct_hrs < 0) {
                $ct_hrs = 0;
            }
        }

        // Check for callback queue call time holidays
        $stmt = "SELECT ct_holidays from vicidial_call_times where call_time_id='$icbq_call_time_id';";
        $rslt = mysql_to_mysqli($stmt, $link);
        $call_times_to_print = mysqli_num_rows($rslt);
        $icbq_ct_hrs = 0;
        if ($call_times_to_print > 0) {
            $rowx = mysqli_fetch_row($rslt);
            $ct_holidays = $rowx[0];
            $holiday_rules = explode('|', $ct_holidays);
            $icbq_ct_hrs = ((count($holiday_rules)) - 2);
            if ($icbq_ct_hrs < 0) {
                $icbq_ct_hrs = 0;
            }
        }

        // Get browser alert sounds list
        $browser_alert_sounds_listARY = explode(',', $browser_alert_sounds_list);
        $browser_alert_sounds_listARY_ct = count($browser_alert_sounds_listARY);
        $bas = 0;
        $bas_output = '';
        while ($browser_alert_sounds_listARY_ct > $bas) {
            $bas_output .= "<option value='$browser_alert_sounds_listARY[$bas]'>" . _QXZ("$browser_alert_sounds_listARY[$bas]") . "</option>";
            $bas++;
        }

        // Get users for agent ranks
        $stmt = "SELECT user,full_name,closer_campaigns,user_group from vicidial_users where active='Y' $LOGadmin_viewable_groupsSQL order by user;";
        $rsltx = mysql_to_mysqli($stmt, $link);
        $users_to_print = mysqli_num_rows($rsltx);

        $o = 0;
        while ($users_to_print > $o) {
            $rowx = mysqli_fetch_row($rsltx);
            $o++;

            $ARIG_user[$o] = $rowx[0];
            $ARIG_name[$o] = $rowx[1];
            $ARIG_close[$o] = $rowx[2];
            $ARIG_group[$o] = $rowx[3];
            $ARIG_check[$o] = '';
            if (preg_match("/ $group_id /", $ARIG_close[$o])) {
                $ARIG_check[$o] = ' CHECKED';
            }
        }

        $o = 0;
        $ARIG_changenotes = '';
        $stmtDlog = '';
        while ($users_to_print > $o) {
            $o++;
            $stmt = "SELECT group_rank,calls_today,group_grade,daily_limit from vicidial_inbound_group_agents where group_id='$group_id' and user='$ARIG_user[$o]';";
            $rsltx = mysql_to_mysqli($stmt, $link);
            $viga_to_print = mysqli_num_rows($rsltx);
            if ($viga_to_print > 0) {
                $rowx = mysqli_fetch_row($rsltx);
                $ARIG_rank[$o] = $rowx[0];
                $ARIG_calls[$o] = $rowx[1];
                $ARIG_grade[$o] = $rowx[2];
                $ARIG_limit[$o] = $rowx[3];
            } else {
                $stmtD = "INSERT INTO vicidial_inbound_group_agents set calls_today='0',group_rank='0',group_weight='0',user='$ARIG_user[$o]',group_id='$group_id',group_grade='1',daily_limit='-1';";
                $rslt = mysql_to_mysqli($stmtD, $link);
                $affected_rows_grp = mysqli_affected_rows($link);
                if ($DB > 0) {
                    echo "$affected_rows_grp|$stmtD|";
                }
                $stmtDlog .= "$stmtD|";
                $ARIG_changenotes .= "added missing user to viga table $ARIG_user[$o]|";
                $ARIG_rank[$o] = '0';
                $ARIG_calls[$o] = '0';
                $ARIG_grade[$o] = '1';
                $ARIG_limit[$o] = '-1';
            }
        }
        if (strlen($ARIG_changenotes) > 10) {
            ### LOG INSERTION Admin Log Table ###
            $SQL_log = "$stmtDlog|";
            $SQL_log = preg_replace('/;/', '', $SQL_log);
            $SQL_log = addslashes($SQL_log);
            $stmt = "INSERT INTO vicidial_admin_log set event_date='$SQLdate', user='$PHP_AUTH_USER', ip_address='$ip', event_section='INGROUPS', event_type='MODIFY', record_id='$group_id', event_code='USER INGROUP VIGA ADD', event_sql=\"$SQL_log\", event_notes='$ARIG_changenotes';";
            if ($DB) {
                echo "|$stmt|\n";
            }
            $rslt = mysql_to_mysqli($stmt, $link);
        }

        // Get DIDs using this in-group
        $stmt = "SELECT did_id,did_pattern,did_description from vicidial_inbound_dids where group_id='$group_id' and did_route='IN_GROUP' $LOGadmin_viewable_groupsSQL;";
        $rslt = mysql_to_mysqli($stmt, $link);
        $dids_to_print = mysqli_num_rows($rslt);

        // Get call menus using this in-group
        $stmt = "SELECT distinct vm.menu_id,menu_name from vicidial_call_menu vm,vicidial_call_menu_options vmo where vm.menu_id=vmo.menu_id and option_route='INGROUP' and option_route_value='$group_id' $vmLOGadmin_viewable_groupsSQL;";
        $rslt = mysql_to_mysqli($stmt, $link);
        $cms_to_print = mysqli_num_rows($rslt);

        // Get campaigns using this in-group
        $SQL_group_id = preg_replace("/_/", '\\_', $group_id);
        $stmt = "SELECT campaign_id,campaign_name from vicidial_campaigns where ( (agent_hangup_route='IN_GROUP' and agent_hangup_value='$group_id') or (drop_inbound_group='$group_id') ) $LOGallowed_campaignsSQL;";
        $rslt = mysql_to_mysqli($stmt, $link);
        $campin_to_print = mysqli_num_rows($rslt);

        // Get campaigns allowing this in-group
        $stmt = "SELECT campaign_id,campaign_name from vicidial_campaigns where closer_campaigns LIKE \"% $SQL_group_id %\" $LOGallowed_campaignsSQL;";
        $rslt = mysql_to_mysqli($stmt, $link);
        $campin_to_print = mysqli_num_rows($rslt);

        // Start of the modern UI
        echo "<div class='container-fluid'>";
        echo "<div class='row'>";
        echo "<div class='col-12'>";
        echo "<div class='card'>";
        echo "<div class='card-header d-flex justify-content-between align-items-center'>";
        echo "<h4 class='mb-0'><i class='bi bi-telephone-inbound-fill me-2'></i>" . _QXZ("MODIFY A GROUPS RECORD") . ": $query_group_id</h4>";
        echo "<div class='btn-group' role='group'>";
        echo "<a href='./AST_CLOSERstats.php?group[]=$group_id' class='btn btn-outline-primary btn-sm'><i class='bi bi-graph-up me-1'></i>" . _QXZ("Report") . "</a>";
        echo "<a href='./AST_VICIDIAL_ingrouplist.php?group=$group_id' class='btn btn-outline-primary btn-sm'><i class='bi bi-people-fill me-1'></i>" . _QXZ("Agents") . "</a>";
        if ($LOGdelete_ingroups > 0) {
            echo "<a href=\"$PHP_SELF?ADD=5111&group_id=$group_id&group_handling=$group_handling\" class='btn btn-outline-danger btn-sm'><i class='bi bi-trash me-1'></i>" . _QXZ("DELETE") . "</a>";
        }
        if (($LOGuser_level >= 9) and ((preg_match("/Administration Change Log/", $LOGallowed_reports)) or (preg_match("/ALL REPORTS/", $LOGallowed_reports)))) {
            echo "<a href=\"$PHP_SELF?ADD=720000000000000&category=INGROUPS&stage=$group_id\" class='btn btn-outline-secondary btn-sm'><i class='bi bi-clock-history me-1'></i>" . _QXZ("Log") . "</a>";
        }
        echo "</div>";
        echo "</div>";
        echo "<div class='card-body'>";

        echo "<form action=$PHP_SELF method=POST name=admin_form id=admin_form>";
        echo "<input type=hidden name=ADD value=4111>";
        echo "<input type=hidden name=group_id value=\"$query_group_id\">";
        echo "<input type=hidden name=DB value=\"$DB\">";
        echo "<input type=hidden name=stage value=\"SUBMIT\">";

        // Start of tabs
        echo "<ul class='nav nav-tabs' id='ingroupTabs' role='tablist'>";
        echo "<li class='nav-item' role='presentation'>";
        echo "<button class='nav-link active' id='basic-tab' data-bs-toggle='tab' data-bs-target='#basic' type='button' role='tab' aria-controls='basic' aria-selected='true'>" . _QXZ("Basic Settings") . "</button>";
        echo "</li>";
        echo "<li class='nav-item' role='presentation'>";
        echo "<button class='nav-link' id='routing-tab' data-bs-toggle='tab' data-bs-target='#routing' type='button' role='tab' aria-controls='routing' aria-selected='false'>" . _QXZ("Call Routing") . "</button>";
        echo "</li>";
        echo "<li class='nav-item' role='presentation'>";
        echo "<button class='nav-link' id='queue-tab' data-bs-toggle='tab' data-bs-target='#queue' type='button' role='tab' aria-controls='queue' aria-selected='false'>" . _QXZ("Queue Settings") . "</button>";
        echo "</li>";
        echo "<li class='nav-item' role='presentation'>";
        echo "<button class='nav-link' id='options-tab' data-bs-toggle='tab' data-bs-target='#options' type='button' role='tab' aria-controls='options' aria-selected='false'>" . _QXZ("Options") . "</button>";
        echo "</li>";
        echo "<li class='nav-item' role='presentation'>";
        echo "<button class='nav-link' id='agents-tab' data-bs-toggle='tab' data-bs-target='#agents' type='button' role='tab' aria-controls='agents' aria-selected='false'>" . _QXZ("Agent Ranks") . "</button>";
        echo "</li>";
        echo "<li class='nav-item' role='presentation'>";
        echo "<button class='nav-link' id='related-tab' data-bs-toggle='tab' data-bs-target='#related' type='button' role='tab' aria-controls='related' aria-selected='false'>" . _QXZ("Related Items") . "</button>";
        echo "</li>";
        echo "</ul>";

        echo "<div class='tab-content' id='ingroupTabsContent'>";

        // Basic Settings Tab
        echo "<div class='tab-pane fade show active' id='basic' role='tabpanel' aria-labelledby='basic-tab'>";
        echo "<div class='row'>";
        echo "<div class='col-md-6'>";
        echo "<div class='card mb-3'>";
        echo "<div class='card-header'>" . _QXZ("Group Information") . "</div>";
        echo "<div class='card-body'>";
        echo "<div class='form-group mb-3'>";
        echo "<label for='group_id' class='form-label'>" . _QXZ("Group ID") . ":</label>";
        echo "<input type='text' class='form-control' id='group_id' value='$query_group_id' readonly>";
        echo "$allowed_campaigns_warning";
        echo "</div>";
        echo "<div class='form-group mb-3'>";
        echo "<label for='group_name' class='form-label'>" . _QXZ("Group Name") . ":</label>";
        echo "<input type='text' class='form-control' id='group_name' name='group_name' value='$group_name'>";
        echo "</div>";
        echo "<div class='form-group mb-3'>";
        echo "<label for='group_color' class='form-label'>" . _QXZ("Group Color") . " <small>(<a href=\"javascript:launch_color_chooser('group_color','color','1');\">" . _QXZ("color chooser") . "</a>)</small>:</label>";
        echo "<div class='input-group'>";
        echo "<input type='text' class='form-control' id='group_color' name='group_color' value='$group_color'>";
        echo "<span class='input-group-text color-preview' style='background-color: $group_color;'></span>";
        echo "</div>";
        echo "</div>";
        echo "<div class='form-group mb-3'>";
        echo "<label for='active' class='form-label'>" . _QXZ("Active") . ":</label>";
        echo "<select class='form-select' id='active' name='active'>";
        echo "<option value='Y'" . ($active == 'Y' ? ' selected' : '') . ">" . _QXZ("Y") . "</option>";
        echo "<option value='N'" . ($active == 'N' ? ' selected' : '') . ">" . _QXZ("N") . "</option>";
        echo "</select>";
        echo "</div>";
        echo "<div class='form-group mb-3'>";
        echo "<label for='user_group' class='form-label'>" . _QXZ("Admin User Group") . ":</label>";
        echo "<select class='form-select' id='user_group' name='user_group'>";
        echo "$UUgroups_list";
        echo "<option value='$user_group' selected>$user_group</option>";
        echo "</select>";
        echo "</div>";
        echo "<div class='form-group mb-3'>";
        echo "<label for='group_calldate' class='form-label'>" . _QXZ("In-Group Calldate") . ":</label>";
        echo "<input type='text' class='form-control' id='group_calldate' value='$group_calldate' readonly>";
        echo "</div>";
        echo "</div>";
        echo "</div>";
        echo "</div>";

        echo "<div class='col-md-6'>";
        echo "<div class='card mb-3'>";
        echo "<div class='card-header'>" . _QXZ("Call Statistics") . "</div>";
        echo "<div class='card-body'>";
        echo "<div class='form-group mb-3'>";
        echo "<label class='form-label'>" . _QXZ("Callback Queue Calls") . ":</label>";
        echo "<div class='form-control-plaintext'>";
        if ($icbq_count > 0) {
            echo "<span class='badge bg-danger'>$icbq_count</span>";
        } else {
            echo "<span class='badge bg-secondary'>0</span>";
        }
        echo "</div>";
        echo "</div>";
        echo "<div class='form-group mb-3'>";
        echo "<label class='form-label'>" . _QXZ("8 Day inbound call count for this in-group") . ":</label>";
        $temp_chart_title = _QXZ("8 Day inbound call count for this in-group");
        horizontal_bar_chart($group_id, '8', 'in-group', $link, 'total_calls', 'call count', 1, '', '', $temp_chart_title);
        echo "</div>";
        echo "</div>";
        echo "</div>";
        echo "</div>";
        echo "</div>";

        echo "<div class='row'>";
        echo "<div class='col-12'>";
        echo "<div class='card mb-3'>";
        echo "<div class='card-header'>" . _QXZ("Agent Settings") . "</div>";
        echo "<div class='card-body'>";
        echo "<div class='row'>";
        echo "<div class='col-md-6'>";
        echo "<div class='form-group mb-3'>";
        echo "<label for='next_agent_call' class='form-label'>" . _QXZ("Next Agent Call") . ":</label>";
        echo "<select class='form-select' id='next_agent_call' name='next_agent_call'>";
        echo "<option value='random'" . ($next_agent_call == 'random' ? ' selected' : '') . ">" . _QXZ("random") . "</option>";
        echo "<option value='oldest_call_start'" . ($next_agent_call == 'oldest_call_start' ? ' selected' : '') . ">" . _QXZ("oldest_call_start") . "</option>";
        echo "<option value='oldest_call_finish'" . ($next_agent_call == 'oldest_call_finish' ? ' selected' : '') . ">" . _QXZ("oldest_call_finish") . "</option>";
        echo "<option value='oldest_inbound_call_start'" . ($next_agent_call == 'oldest_inbound_call_start' ? ' selected' : '') . ">" . _QXZ("oldest_inbound_call_start") . "</option>";
        echo "<option value='oldest_inbound_call_finish'" . ($next_agent_call == 'oldest_inbound_call_finish' ? ' selected' : '') . ">" . _QXZ("oldest_inbound_call_finish") . "</option>";
        echo "<option value='oldest_inbound_filtered_call_start'" . ($next_agent_call == 'oldest_inbound_filtered_call_start' ? ' selected' : '') . ">" . _QXZ("oldest_inbound_filtered_call_start") . "</option>";
        echo "<option value='oldest_inbound_filtered_call_finish'" . ($next_agent_call == 'oldest_inbound_filtered_call_finish' ? ' selected' : '') . ">" . _QXZ("oldest_inbound_filtered_call_finish") . "</option>";
        echo "<option value='overall_user_level'" . ($next_agent_call == 'overall_user_level' ? ' selected' : '') . ">" . _QXZ("overall_user_level") . "</option>";
        echo "<option value='inbound_group_rank'" . ($next_agent_call == 'inbound_group_rank' ? ' selected' : '') . ">" . _QXZ("inbound_group_rank") . "</option>";
        echo "<option value='campaign_rank'" . ($next_agent_call == 'campaign_rank' ? ' selected' : '') . ">" . _QXZ("campaign_rank") . "</option>";
        echo "<option value='ingroup_grade_random'" . ($next_agent_call == 'ingroup_grade_random' ? ' selected' : '') . ">" . _QXZ("ingroup_grade_random") . "</option>";
        echo "<option value='campaign_grade_random'" . ($next_agent_call == 'campaign_grade_random' ? ' selected' : '') . ">" . _QXZ("campaign_grade_random") . "</option>";
        echo "<option value='fewest_calls'" . ($next_agent_call == 'fewest_calls' ? ' selected' : '') . ">" . _QXZ("fewest_calls") . "</option>";
        echo "<option value='fewest_calls_campaign'" . ($next_agent_call == 'fewest_calls_campaign' ? ' selected' : '') . ">" . _QXZ("fewest_calls_campaign") . "</option>";
        echo "<option value='longest_wait_time'" . ($next_agent_call == 'longest_wait_time' ? ' selected' : '') . ">" . _QXZ("longest_wait_time") . "</option>";
        echo "<option value='ring_all'" . ($next_agent_call == 'ring_all' ? ' selected' : '') . ">" . _QXZ("ring_all") . "</option>";
        echo "<option value='overall_user_level_wait_time'" . ($next_agent_call == 'overall_user_level_wait_time' ? ' selected' : '') . ">" . _QXZ("overall_user_level_wait_time") . "</option>";
        echo "<option value='campaign_rank_wait_time'" . ($next_agent_call == 'campaign_rank_wait_time' ? ' selected' : '') . ">" . _QXZ("campaign_rank_wait_time") . "</option>";
        echo "<option value='fewest_calls_campaign_wait_time'" . ($next_agent_call == 'fewest_calls_campaign_wait_time' ? ' selected' : '') . ">" . _QXZ("fewest_calls_campaign_wait_time") . "</option>";
        echo "<option value='inbound_group_rank_wait_time'" . ($next_agent_call == 'inbound_group_rank_wait_time' ? ' selected' : '') . ">" . _QXZ("inbound_group_rank_wait_time") . "</option>";
        echo "<option value='fewest_calls_wait_time'" . ($next_agent_call == 'fewest_calls_wait_time' ? ' selected' : '') . ">" . _QXZ("fewest_calls_wait_time") . "</option>";
        echo "</select>";
        echo "</div>";
        echo "</div>";
        echo "<div class='col-md-6'>";
        if (($SSagent







                echo "<div class='col-md-6'>";
        if (($SSagent_search_method == 1) or ($SSagent_search_method == 2)) {
            echo "<div class='form-group mb-3'>";
            echo "<label for='agent_search_method' class='form-label'>" . _QXZ("Agent Search Method Override") . ":</label>";
            echo "<select class='form-select' id='agent_search_method' name='agent_search_method'>";
            echo "<option value='LB'" . ($agent_search_method == 'LB' ? ' selected' : '') . ">LB - " . _QXZ("Load Balanced") . "</option>";
            echo "<option value='SO'" . ($agent_search_method == 'SO' ? ' selected' : '') . ">SO - " . _QXZ("Server Only") . "</option>";
            echo "<option value=''" . ($agent_search_method == '' ? ' selected' : '') . ">" . _QXZ("DISABLED") . "</option>";
            echo "</select>";
            echo "</div>";
        }
        echo "</div>";
        echo "</div>";

        echo "<div class='row'>";
        echo "<div class='col-md-4'>";
        echo "<div class='form-group mb-3'>";
        echo "<label for='queue_priority' class='form-label'>" . _QXZ("Queue Priority") . ":</label>";
        echo "<select class='form-select' id='queue_priority' name='queue_priority'>";
        $n = 99;
        while ($n >= -99) {
            $dtl = _QXZ("Even");
            if ($n < 0) {
                $dtl = _QXZ("Lower");
            }
            if ($n > 0) {
                $dtl = _QXZ("Higher");
            }
            echo "<option value='$n'" . ($n == $queue_priority ? ' selected' : '') . ">$n - $dtl</option>";
            $n--;
        }
        echo "</select>";
        echo "</div>";
        echo "</div>";
        echo "<div class='col-md-4'>";
        echo "<div class='form-group mb-3'>";
        echo "<label for='on_hook_ring_time' class='form-label'>" . _QXZ("On-Hook Ring Time") . ":</label>";
        echo "<input type='text' class='form-control' id='on_hook_ring_time' name='on_hook_ring_time' value='$on_hook_ring_time'>";
        echo "</div>";
        echo "</div>";
        echo "<div class='col-md-4'>";
        echo "<div class='form-group mb-3'>";
        echo "<label for='on_hook_cid' class='form-label'>" . _QXZ("On-Hook CID") . ":</label>";
        echo "<select class='form-select' id='on_hook_cid' name='on_hook_cid'>";
        echo "<option value='GENERIC'" . ($on_hook_cid == 'GENERIC' ? ' selected' : '') . ">" . _QXZ("GENERIC") . "</option>";
        echo "<option value='INGROUP'" . ($on_hook_cid == 'INGROUP' ? ' selected' : '') . ">" . _QXZ("INGROUP") . "</option>";
        echo "<option value='CUSTOMER_PHONE'" . ($on_hook_cid == 'CUSTOMER_PHONE' ? ' selected' : '') . ">" . _QXZ("CUSTOMER_PHONE") . "</option>";
        echo "<option value='CUSTOMER_PHONE_RINGAGENT'" . ($on_hook_cid == 'CUSTOMER_PHONE_RINGAGENT' ? ' selected' : '') . ">" . _QXZ("CUSTOMER_PHONE_RINGAGENT") . "</option>";
        echo "<option value='CUSTOMER_PHONE_INGROUP'" . ($on_hook_cid == 'CUSTOMER_PHONE_INGROUP' ? ' selected' : '') . ">" . _QXZ("CUSTOMER_PHONE_INGROUP") . "</option>";
        echo "<option value='RA_AGENT_PHONE'" . ($on_hook_cid == 'RA_AGENT_PHONE' ? ' selected' : '') . ">" . _QXZ("RA_AGENT_PHONE") . "</option>";
        echo "</select>";
        echo "</div>";
        echo "</div>";
        echo "</div>";

        echo "<div class='row'>";
        echo "<div class='col-md-6'>";
        echo "<div class='form-group mb-3'>";
        echo "<label for='on_hook_cid_number' class='form-label'>" . _QXZ("On-Hook CID Number") . ":</label>";
        echo "<input type='text' class='form-control' id='on_hook_cid_number' name='on_hook_cid_number' value='$on_hook_cid_number'>";
        echo "</div>";
        echo "</div>";
        echo "<div class='col-md-6'>";
        echo "<div class='form-group mb-3'>";
        echo "<label for='fronter_display' class='form-label'>" . _QXZ("Fronter Display") . ":</label>";
        echo "<select class='form-select' id='fronter_display' name='fronter_display'>";
        echo "<option value='Y'" . ($fronter_display == 'Y' ? ' selected' : '') . ">" . _QXZ("Y") . "</option>";
        echo "<option value='N'" . ($fronter_display == 'N' ? ' selected' : '') . ">" . _QXZ("N") . "</option>";
        echo "</select>";
        echo "</div>";
        echo "</div>";
        echo "</div>";
        echo "</div>";
        echo "</div>";
        echo "</div>";
        echo "</div>";

        // Call Routing Tab
        echo "<div class='tab-pane fade' id='routing' role='tabpanel' aria-labelledby='routing-tab'>";
        echo "<div class='row'>";
        echo "<div class='col-md-6'>";
        echo "<div class='card mb-3'>";
        echo "<div class='card-header'>" . _QXZ("Basic Routing") . "</div>";
        echo "<div class='card-body'>";
        echo "<div class='form-group mb-3'>";
        echo "<label for='script_id' class='form-label'><a href=\"$PHP_SELF?ADD=3111111&script_id=$script_id\">" . _QXZ("Script") . "</a>:</label>";
        echo "<select class='form-select' id='script_id' name='script_id'>";
        echo "$scripts_list";
        echo "<option value='$script_id' selected>$script_id - $scriptname_list[$script_id]</option>";
        echo "</select>";
        echo "</div>";

        if ($SSenable_second_script > 0) {
            echo "<div class='form-group mb-3'>";
            echo "<label for='ingroup_script_two' class='form-label'><a href=\"$PHP_SELF?ADD=3111111&script_id=$ingroup_script_two\">" . _QXZ("Script Two") . "</a>:</label>";
            echo "<select class='form-select' id='ingroup_script_two' name='ingroup_script_two'>";
            echo "$scripts_list";
            echo "<option value='$ingroup_script_two' selected>" . _QXZ("$ingroup_script_two") . " - $scriptname_list[$ingroup_script_two]</option>";
            echo "</select>";
            echo "</div>";
        }

        echo "<div class='form-group mb-3'>";
        echo "<label for='ignore_list_script_override' class='form-label'>" . _QXZ("Ignore List Script Override") . ":</label>";
        echo "<select class='form-select' id='ignore_list_script_override' name='ignore_list_script_override'>";
        echo "<option value='Y'" . ($ignore_list_script_override == 'Y' ? ' selected' : '') . ">" . _QXZ("Y") . "</option>";
        echo "<option value='N'" . ($ignore_list_script_override == 'N' ? ' selected' : '') . ">" . _QXZ("N") . "</option>";
        echo "</select>";
        echo "</div>";

        echo "<div class='form-group mb-3'>";
        echo "<label for='status_group_id' class='form-label'>$sglinkB" . _QXZ("Status Group Override") . "$sglinkE:</label>";
        echo "<select class='form-select' id='status_group_id' name='status_group_id'>";
        echo "<option value=''>" . _QXZ("NONE") . "</option>";
        echo "$status_groups_menu";
        echo "</select>";
        echo "</div>";

        $eswHTML = '';
        if ($SSenable_second_script > 0) {
            $eswHTML .= "<option value='SCRIPTTWO'>" . _QXZ("SCRIPTTWO") . "</option>";
        }
        if ($SSenable_second_webform > 0) {
            $eswHTML .= "<option value='WEBFORMTWO'>" . _QXZ("WEBFORMTWO") . "</option>";
        }
        if ($SSenable_third_webform > 0) {
            $eswHTML .= "<option value='WEBFORMTHREE'>" . _QXZ("WEBFORMTHREE") . "</option>";
        }
        if ($SScustom_fields_enabled > 0) {
            $eswHTML .= "<option value='FORM'>" . _QXZ("FORM") . "</option>";
        }
        if ($SSallow_emails > 0) {
            $eswHTML .= "<option value='EMAIL'>" . _QXZ("EMAIL") . "</option>";
        }
        if ($SSallow_chats > 0) {
            $eswHTML .= "<option value='CHAT'>" . _QXZ("CHAT") . "</option>";
        }

        echo "<div class='form-group mb-3'>";
        echo "<label for='get_call_launch' class='form-label'>" . _QXZ("Get Call Launch") . ":</label>";
        echo "<select class='form-select' id='get_call_launch' name='get_call_launch'>";
        echo "<option value='NONE'>" . _QXZ("NONE") . "</option>";
        echo "<option value='SCRIPT'" . ($get_call_launch == 'SCRIPT' ? ' selected' : '') . ">" . _QXZ("SCRIPT") . "</option>";
        echo "<option value='WEBFORM'" . ($get_call_launch == 'WEBFORM' ? ' selected' : '') . ">" . _QXZ("WEBFORM") . "</option>";
        echo $eswHTML;
        echo "<option value='$get_call_launch' selected>" . _QXZ("$get_call_launch") . "</option>";
        echo "</select>";
        echo "</div>";
        echo "</div>";
        echo "</div>";
        echo "</div>";

        echo "<div class='col-md-6'>";
        echo "<div class='card mb-3'>";
        echo "<div class='card-header'>" . _QXZ("Transfer Configuration") . "</div>";
        echo "<div class='card-body'>";
        echo "<div class='row'>";
        echo "<div class='col-md-6'>";
        echo "<div class='form-group mb-3'>";
        echo "<label for='xferconf_a_dtmf' class='form-label'>" . _QXZ("Transfer-Conf DTMF") . " 1:</label>";
        echo "<input type='text' class='form-control' id='xferconf_a_dtmf' name='xferconf_a_dtmf' value='$xferconf_a_dtmf'>";
        echo "</div>";
        echo "</div>";
        echo "<div class='col-md-6'>";
        echo "<div class='form-group mb-3'>";
        echo "<label for='xferconf_a_number' class='form-label'>" . _QXZ("Transfer-Conf Number") . " 1:</label>";
        echo "<input type='text' class='form-control' id='xferconf_a_number' name='xferconf_a_number' value='$xferconf_a_number'>";
        echo "</div>";
        echo "</div>";
        echo "</div>";

        echo "<div class='row'>";
        echo "<div class='col-md-6'>";
        echo "<div class='form-group mb-3'>";
        echo "<label for='xferconf_b_dtmf' class='form-label'>" . _QXZ("Transfer-Conf DTMF") . " 2:</label>";
        echo "<input type='text' class='form-control' id='xferconf_b_dtmf' name='xferconf_b_dtmf' value='$xferconf_b_dtmf'>";
        echo "</div>";
        echo "</div>";
        echo "<div class='col-md-6'>";
        echo "<div class='form-group mb-3'>";
        echo "<label for='xferconf_b_number' class='form-label'>" . _QXZ("Transfer-Conf Number") . " 2:</label>";
        echo "<input type='text' class='form-control' id='xferconf_b_number' name='xferconf_b_number' value='$xferconf_b_number'>";
        echo "</div>";
        echo "</div>";
        echo "</div>";

        echo "<div class='row'>";
        echo "<div class='col-md-6'>";
        echo "<div class='form-group mb-3'>";
        echo "<label for='xferconf_c_number' class='form-label'>" . _QXZ("Transfer-Conf Number") . " 3:</label>";
        echo "<input type='text' class='form-control' id='xferconf_c_number' name='xferconf_c_number' value='$xferconf_c_number'>";
        echo "</div>";
        echo "</div>";
        echo "<div class='col-md-6'>";
        echo "<div class='form-group mb-3'>";
        echo "<label for='xferconf_d_number' class='form-label'>" . _QXZ("Transfer-Conf Number") . " 4:</label>";
        echo "<input type='text' class='form-control' id='xferconf_d_number' name='xferconf_d_number' value='$xferconf_d_number'>";
        echo "</div>";
        echo "</div>";
        echo "</div>";

        echo "<div class='row'>";
        echo "<div class='col-md-6'>";
        echo "<div class='form-group mb-3'>";
        echo "<label for='xferconf_e_number' class='form-label'>" . _QXZ("Transfer-Conf Number") . " 5:</label>";
        echo "<input type='text' class='form-control' id='xferconf_e_number' name='xferconf_e_number' value='$xferconf_e_number'>";
        echo "</div>";
        echo "</div>";
        echo "<div class='col-md-6'>";
        echo "<div class='form-group mb-3'>";
        echo "<label for='default_xfer_group' class='form-label'>" . _QXZ("Default Transfer Group") . ":</label>";
        echo "<select class='form-select' id='default_xfer_group' name='default_xfer_group'>";
        echo "$Xgroups_menu";
        echo "</select>";
        echo "</div>";
        echo "</div>";
        echo "</div>";
        echo "</div>";
        echo "</div>";
        echo "</div>";
        echo "</div>";

        // Timer Actions Card
        echo "<div class='row'>";
        echo "<div class='col-12'>";
        echo "<div class='card mb-3'>";
        echo "<div class='card-header'>" . _QXZ("Timer Actions") . "</div>";
        echo "<div class='card-body'>";
        echo "<div class='row'>";
        echo "<div class='col-md-4'>";
        echo "<div class='form-group mb-3'>";
        echo "<label for='timer_action' class='form-label'>" . _QXZ("Timer Action") . ":</label>";
        echo "<select class='form-select' id='timer_action' name='timer_action'>";
        echo "<option value='NONE'" . ($timer_action == 'NONE' ? ' selected' : '') . ">" . _QXZ("NONE") . "</option>";
        echo "<option value='D1_DIAL'" . ($timer_action == 'D1_DIAL' ? ' selected' : '') . ">" . _QXZ("D1_DIAL") . "</option>";
        echo "<option value='D2_DIAL'" . ($timer_action == 'D2_DIAL' ? ' selected' : '') . ">" . _QXZ("D2_DIAL") . "</option>";
        echo "<option value='D3_DIAL'" . ($timer_action == 'D3_DIAL' ? ' selected' : '') . ">" . _QXZ("D3_DIAL") . "</option>";
        echo "<option value='D4_DIAL'" . ($timer_action == 'D4_DIAL' ? ' selected' : '') . ">" . _QXZ("D4_DIAL") . "</option>";
        echo "<option value='D5_DIAL'" . ($timer_action == 'D5_DIAL' ? ' selected' : '') . ">" . _QXZ("D5_DIAL") . "</option>";
        echo "<option value='D1_DIAL_QUIET'" . ($timer_action == 'D1_DIAL_QUIET' ? ' selected' : '') . ">" . _QXZ("D1_DIAL_QUIET") . "</option>";
        echo "<option value='D2_DIAL_QUIET'" . ($timer_action == 'D2_DIAL_QUIET' ? ' selected' : '') . ">" . _QXZ("D2_DIAL_QUIET") . "</option>";
        echo "<option value='D3_DIAL_QUIET'" . ($timer_action == 'D3_DIAL_QUIET' ? ' selected' : '') . ">" . _QXZ("D3_DIAL_QUIET") . "</option>";
        echo "<option value='D4_DIAL_QUIET'" . ($timer_action == 'D4_DIAL_QUIET' ? ' selected' : '') . ">" . _QXZ("D4_DIAL_QUIET") . "</option>";
        echo "<option value='D5_DIAL_QUIET'" . ($timer_action == 'D5_DIAL_QUIET' ? ' selected' : '') . ">" . _QXZ("D5_DIAL_QUIET") . "</option>";
        echo "<option value='MESSAGE_ONLY'" . ($timer_action == 'MESSAGE_ONLY' ? ' selected' : '') . ">" . _QXZ("MESSAGE_ONLY") . "</option>";
        echo "<option value='WEBFORM'" . ($timer_action == 'WEBFORM' ? ' selected' : '') . ">" . _QXZ("WEBFORM") . "</option>";
        echo $eswHTML;
        echo "<option value='HANGUP'" . ($timer_action == 'HANGUP' ? ' selected' : '') . ">" . _QXZ("HANGUP") . "</option>";
        echo "<option value='CALLMENU'" . ($timer_action == 'CALLMENU' ? ' selected' : '') . ">" . _QXZ("CALLMENU") . "</option>";
        echo "<option value='EXTENSION'" . ($timer_action == 'EXTENSION' ? ' selected' : '') . ">" . _QXZ("EXTENSION") . "</option>";
        echo "<option value='IN_GROUP'" . ($timer_action == 'IN_GROUP' ? ' selected' : '') . ">" . _QXZ("IN_GROUP") . "</option>";
        echo "</select>";
        echo "</div>";
        echo "</div>";
        echo "<div class='col-md-4'>";
        echo "<div class='form-group mb-3'>";
        echo "<label for='timer_action_seconds' class='form-label'>" . _QXZ("Timer Action Seconds") . ":</label>";
        echo "<input type='text' class='form-control' id='timer_action_seconds' name='timer_action_seconds' value='$timer_action_seconds'>";
        echo "</div>";
        echo "</div>";
        echo "<div class='col-md-4'>";
        echo "<div class='form-group mb-3'>";
        echo "<label for='timer_action_destination' class='form-label'>" . _QXZ("Timer Action Destination") . ":</label>";
        echo "<input type='text' class='form-control' id='timer_action_destination' name='timer_action_destination' value='$timer_action_destination'>";
        echo "</div>";
        echo "</div>";
        echo "</div>";

        echo "<div class='form-group mb-3'>";
        echo "<label for='timer_action_message' class='form-label'>" . _QXZ("Timer Action Message") . ":</label>";
        echo "<input type='text' class='form-control' id='timer_action_message' name='timer_action_message' value='$timer_action_message'>";
        echo "</div>";
        echo "</div>";
        echo "</div>";
        echo "</div>";
        echo "</div>";
        echo "</div>";

        // Queue Settings Tab
        echo "<div class='tab-pane fade' id='queue' role='tabpanel' aria-labelledby='queue-tab'>";
        echo "<div class='row'>";
        echo "<div class='col-md-6'>";
        echo "<div class='card mb-3'>";
        echo "<div class='card-header'>" . _QXZ("Drop Call Settings") . "</div>";
        echo "<div class='card-body'>";
        echo "<div class='form-group mb-3'>";
        echo "<label for='drop_call_seconds' class='form-label'>" . _QXZ("Drop Call Seconds") . ":</label>";
        echo "<input type='text' class='form-control' id='drop_call_seconds' name='drop_call_seconds' value='$drop_call_seconds'>";
        echo "</div>";

        echo "<div class='form-group mb-3'>";
        echo "<label for='drop_call_seconds_override' class='form-label'>";
        if ($dtlc_selected > 0) {
            echo "<a href=\"$PHP_SELF?ADD=392111111111&container_id=$drop_call_seconds_override\">" . _QXZ("Drop Seconds Override Container") . "</a>";
        } else {
            echo _QXZ("Drop Seconds Override Container");
        }
        echo ":</label>";
        echo "<select class='form-select' id='drop_call_seconds_override' name='drop_call_seconds_override'>";
        echo "<option value='DISABLED'>" . _QXZ("DISABLED") . "</option>";
        echo "$drop_call_seconds_override_menu";
        echo "</select>";
        echo "</div>";

        echo "<div class='form-group mb-3'>";
        echo "<label for='drop_action' class='form-label'>" . _QXZ("Drop Action") . ":</label>";
        echo "<select class='form-select' id='drop_action' name='drop_action'>";
        echo "<option value='HANGUP'" . ($drop_action == 'HANGUP' ? ' selected' : '') . ">" . _QXZ("HANGUP") . "</option>";
        echo "<option value='MESSAGE'" . ($drop_action == 'MESSAGE' ? ' selected' : '') . ">" . _QXZ("MESSAGE") . "</option>";
        echo "<option value='VOICEMAIL'" . ($drop_action == 'VOICEMAIL' ? ' selected' : '') . ">" . _QXZ("VOICEMAIL") . "</option>";
        echo "<option value='VMAIL_NO_INST'" . ($drop_action == 'VMAIL_NO_INST' ? ' selected' : '') . ">" . _QXZ("VMAIL_NO_INST") . "</option>";
        echo "<option value='IN_GROUP'" . ($drop_action == 'IN_GROUP' ? ' selected' : '') . ">" . _QXZ("IN_GROUP") . "</option>";
        echo "<option value='CALLMENU'" . ($drop_action == 'CALLMENU' ? ' selected' : '') . ">" . _QXZ("CALLMENU") . "</option>";
        echo "</select>";
        echo "</div>";

        echo "<div class='form-group mb-3'>";
        echo "<label for='drop_lead_reset' class='form-label'>" . _QXZ("Drop Lead Reset") . ":</label>";
        echo "<select class='form-select' id='drop_lead_reset' name='drop_lead_reset'>";
        echo "<option value='Y'" . ($drop_lead_reset == 'Y' ? ' selected' : '') . ">" . _QXZ("Y") . "</option>";
        echo "<option value='N'" . ($drop_lead_reset == 'N' ? ' selected' : '') . ">" . _QXZ("N") . "</option>";
        echo "</select>";
        echo "</div>";

        echo "<div class='form-group mb-3'>";
        echo "<label for='drop_exten' class='form-label'>" . _QXZ("Drop Exten") . ":</label>";
        echo "<input type='text' class='form-control' id='drop_exten' name='drop_exten' value='$drop_exten'>";
        echo "</div>";

        echo "<div class='form-group mb-3'>";
        echo "<label for='voicemail_ext' class='form-label'>" . _QXZ("Voicemail") . ":</label>";
        echo "<div class='input-group'>";
        echo "<input type='text' class='form-control' id='voicemail_ext' name='voicemail_ext' value='$voicemail_ext'>";
        echo "<button class='btn btn-outline-secondary' type='button' onclick=\"launch_vm_chooser('voicemail_ext','vm');\"><i class='bi bi-telephone'></i></button>";
        echo "</div>";
        echo "</div>";

        echo "<div class='form-group mb-3'>";
        echo "<label for='drop_inbound_group' class='form-label'><a href=\"$PHP_SELF?ADD=3111&group_id=$drop_inbound_group\">" . _QXZ("Drop Transfer Group") . "</a>:</label>";
        echo "<select class='form-select' id='drop_inbound_group' name='drop_inbound_group'>";
        echo "$Dgroups_menu";
        echo "</select>";
        echo "</div>";

        echo "<div class='form-group mb-3'>";
        echo "<label for='drop_callmenu' class='form-label'><a href=\"$PHP_SELF?ADD=3511&menu_id=$drop_callmenu\">" . _QXZ("Drop Call Menu") . "</a>:</label>";
        echo "<select class='form-select' id='drop_callmenu' name='drop_callmenu'>";
        echo "$call_menu_list";
        echo "<option value='$drop_callmenu' selected>$drop_callmenu</option>";
        echo "</select>";
        echo "</div>";
        echo "</div>";
        echo "</div>";
        echo "</div>";

        echo "<div class='col-md-6'>";
        echo "<div class='card mb-3'>";
        echo "<div class='card-header'>" . _QXZ("After Hours Settings") . "</div>";
        echo "<div class='card-body'>";
        echo "<div class='form-group mb-3'>";
        echo "<label for='after_hours_action' class='form-label'>" . _QXZ("After Hours Action") . ":</label>";
        echo "<select class='form-select' id='after_hours_action' name='after_hours_action'>";
        echo "<option value='HANGUP'" . ($after_hours_action == 'HANGUP' ? ' selected' : '') . ">" . _QXZ("HANGUP") . "</option>";
        echo "<option value='MESSAGE'" . ($after_hours_action == 'MESSAGE' ? ' selected' : '') . ">" . _QXZ("MESSAGE") . "</option>";
        echo "<option value='EXTENSION'" . ($after_hours_action == 'EXTENSION' ? ' selected' : '') . ">" . _QXZ("EXTENSION") . "</option>";
        echo "<option value='VOICEMAIL'" . ($after_hours_action == 'VOICEMAIL' ? ' selected' : '') . ">" . _QXZ("VOICEMAIL") . "</option>";
        echo "<option value='VMAIL_NO_INST'" . ($after_hours_action == 'VMAIL_NO_INST' ? ' selected' : '') . ">" . _QXZ("VMAIL_NO_INST") . "</option>";
        echo "<option value='IN_GROUP'" . ($after_hours_action == 'IN_GROUP' ? ' selected' : '') . ">" . _QXZ("IN_GROUP") . "</option>";
        echo "<option value='CALLMENU'" . ($after_hours_action == 'CALLMENU' ? ' selected' : '') . ">" . _QXZ("CALLMENU") . "</option>";
        echo "</select>";
        echo "</div>";

        echo "<div class='form-group mb-3'>";
        echo "<label for='after_hours_lead_reset' class='form-label'>" . _QXZ("After Hours Lead Reset") . ":</label>";
        echo "<select class='form-select' id='after_hours_lead_reset' name='after_hours_lead_reset'>";
        echo "<option value='Y'" . ($after_hours_lead_reset == 'Y' ? ' selected' : '') . ">" . _QXZ("Y") . "</option>";
        echo "<option value='N'" . ($after_hours_lead_reset == 'N' ? ' selected' : '') . ">" . _QXZ("N") . "</option>";
        echo "</select>";
        echo "</div>";

        echo "<div class='form-group mb-3'>";
        echo "<label for='after_hours_message_filename' class='form-label'>" . _QXZ("After Hours Message Filename") . ":</label>";
        echo "<div class='input-group'>";
        echo "<input type='text' class='form-control' id='after_hours_message_filename' name='after_hours_message_filename' value='$after_hours_message_filename'>";
        echo "<button class='btn btn-outline-secondary' type='button' onclick=\"launch_chooser('after_hours_message_filename','date');\"><i class='bi bi-music-note-list'></i></button>";
        echo "</div>";
        echo "</div>";

        echo "<div class='form-group mb-3'>";
        echo "<label for='after_hours_exten' class='form-label'>" . _QXZ("After Hours Extension") . ":</label>";
        echo "<input type='text' class='form-control' id='after_hours_exten' name='after_hours_exten' value='$after_hours_exten'>";
        echo "</div>";

        echo "<div class='form-group mb-3'>";
        echo "<label for='after_hours_voicemail' class='form-label'>" . _QXZ("After Hours Voicemail") . ":</label>";
        echo "<div class='input-group'>";
        echo "<input type='text' class='form-control' id='after_hours_voicemail' name='after_hours_voicemail' value='$after_hours_voicemail'>";
        echo "<button class='btn btn-outline-secondary' type='button' onclick=\"launch_vm_chooser('after_hours_voicemail','vm');\"><i class='bi bi-telephone'></i></button>";
        echo "</div>";
        echo "</div>";

        echo "<div class='form-group mb-3'>";
        echo "<label for='afterhours_xfer_group' class='form-label'><a href=\"$PHP_SELF?ADD=3111&group_id=$afterhours_xfer_group\">" . _QXZ("After Hours Transfer Group") . "</a>:</label>";
        echo "<select class='form-select' id='afterhours_xfer_group' name='afterhours_xfer_group'>";
        echo "$Agroups_menu";
        echo "</select>";
        echo "</div>";

        echo "<div class='form-group mb-3'>";
        echo "<label for='after_hours_callmenu' class='form-label'><a href=\"$PHP_SELF?ADD=3511&menu_id=$after_hours_callmenu\">" . _QXZ("After Hours Call Menu") . "</a>:</label>";
        echo "<select class='form-select' id='after_hours_callmenu' name='after_hours_callmenu'>";
        echo "$call_menu_list";
        echo "<option value='$after_hours_callmenu' selected>$after_hours_callmenu</option>";
        echo "</select>";
        echo "</div>";
        echo "</div>";
        echo "</div>";
        echo "</div>";
        echo "</div>";

        // Call Time Information
        echo "<div class='row'>";
        echo "<div class='col-md-6'>";
        echo "<div class='card mb-3'>";
        echo "<div class='card-header'>" . _QXZ("Call Time Information") . "</div>";
        echo "<div class='card-body'>";
        echo "<div class='form-group mb-3'>";
        echo "<label for='call_time_id' class='form-label'><a href=\"$PHP_SELF?ADD=311111111&call_time_id=$call_time_id\">" . _QXZ("Call Time") . "</a>:</label>";
        echo "<select class='form-select' id='call_time_id' name='call_time_id'>";
        echo "$call_times_list";
        echo "<option value='$call_time_id' selected>$call_time_id - $call_timename_list[$call_time_id]</option>";
        echo "</select>";
        echo "</div>";

        echo "<div class='alert alert-info'>";
        if ($call_times_to_print > 0) {
            echo "<i class='bi bi-info-circle-fill me-2'></i>" . _QXZ("Holidays defined for this call time") . ": $ct_hrs";
        } else {
            echo "<i class='bi bi-exclamation-triangle-fill me-2'></i>" . _QXZ("Call time not found") . "!: $call_time_id";
        }
        echo "</div>";
        echo "</div>";
        echo "</div>";
        echo "</div>";

        echo "<div class='col-md-6'>";
        echo "<div class='card mb-3'>";
        echo "<div class='card-header'>" . _QXZ("No Agent Settings") . "</div>";
        echo "<div class='card-body'>";
        echo "<div class='form-group mb-3'>";
        echo "<label for='no_agent_no_queue' class='form-label'>" . _QXZ("No Agents No Queueing") . ":</label>";
        echo "<select class='form-select' id='no_agent_no_queue' name='no_agent_no_queue'>";
        echo "<option value='Y'" . ($no_agent_no_queue == 'Y' ? ' selected' : '') . ">" . _QXZ("Y") . "</option>";
        echo "<option value='N'" . ($no_agent_no_queue == 'N' ? ' selected' : '') . ">" . _QXZ("N") . "</option>";
        echo "<option value='NO_PAUSED'" . ($no_agent_no_queue == 'NO_PAUSED' ? ' selected' : '') . ">" . _QXZ("NO_PAUSED") . "</option>";
        echo "<option value='NO_READY'" . ($no_agent_no_queue == 'NO_READY' ? ' selected' : '') . ">" . _QXZ("NO_READY") . "</option>";
        echo "</select>";
        echo "</div>";

        echo "<div class='form-group mb-3'>";
        echo "<label for='no_agent_delay' class='form-label'>" . _QXZ("No Agent No Queue Delay") . ":</label>";
        echo "<input type='text' class='form-control' id='no_agent_delay' name='no_agent_delay' value='$no_agent_delay'>";
        echo "</div>";

        echo "<div class='form-group mb-3'>";
        echo "<label for='nanq_lead_reset' class='form-label'>" . _QXZ("No Agent No Queue Lead Reset") . ":</label>";
        echo "<select class='form-select' id='nanq_lead_reset' name='nanq_lead_reset'>";
        echo "<option value='Y'" . ($nanq_lead_reset == 'Y' ? ' selected' : '') . ">" . _QXZ("Y") . "</option>";
        echo "<option value='N'" . ($nanq_lead_reset == 'N' ? ' selected' : '') . ">" . _QXZ("N") . "</option>";
        echo "</select>";
        echo "</div>";

        echo "<div class='form-group mb-3'>";
        echo "<label for='in_queue_nanque' class='form-label'>" . _QXZ("In-Queue No Agents Check") . ":</label>";
        echo "<select class='form-select' id='in_queue_nanque' name='in_queue_nanque'>";
        echo "<option value='Y'" . ($in_queue_nanque == 'Y' ? ' selected' : '') . ">" . _QXZ("Y") . "</option>";
        echo "<option value='N'" . ($in_queue_nanque == 'N' ? ' selected' : '') . ">" . _QXZ("N") . "</option>";
        echo "<option value='NO_PAUSED'" . ($in_queue_nanque == 'NO_PAUSED' ? ' selected' : '') . ">" . _QXZ("NO_PAUSED") . "</option>";
        echo "<option value='NO_PAUSED_EXCEPTIONS'" . ($in_queue_nanque == 'NO_PAUSED_EXCEPTIONS' ? ' selected' : '') . ">" . _QXZ("NO_PAUSED_EXCEPTIONS") . "</option>";
        echo "<option value='NO_READY'" . ($in_queue_nanque == 'NO_READY' ? ' selected' : '') . ">" . _QXZ("NO_READY") . "</option>";
        echo "</select>";
        echo "</div>";

        echo "<div class='form-group mb-3'>";
        echo "<label for='in_queue_nanque_exceptions' class='form-label'>";
        if ($dtlc_selected > 0) {
            echo "<a href=\"$PHP_SELF?ADD=392111111111&container_id=$in_queue_nanque_exceptions\">" . _QXZ("In-Queue No Agents Pause Exceptions") . "</a>";
        } else {
            echo _QXZ("In-Queue No Agents Pause Exceptions");
        }
        echo ":</label>";
        echo "<select class='form-select' id='in_queue_nanque_exceptions' name='in_queue_nanque_exceptions'>";
        echo "<option value=''>" . _QXZ("DISABLED") . "</option>";
        echo "$in_queue_nanque_exceptions_menu";
        echo "</select>";
        echo "</div>";
        echo "</div>";
        echo "</div>";
        echo "</div>";
        echo "</div>";

        // Max Calls Settings
        echo "<div class='row'>";
        echo "<div class='col-12'>";
        echo "<div class='card mb-3'>";
        echo "<div class='card-header'>" . _QXZ("Max Calls Settings") . "</div>";
        echo "<div class='card-body'>";
        echo "<div class='row'>";
        echo "<div class='col-md-4'>";
        echo "<div class='form-group mb-3'>";
        echo "<label for='max_calls_method' class='form-label'>" . _QXZ("Max Calls Method") . ":</label>";
        echo "<select class='form-select' id='max_calls_method' name='max_calls_method'>";
        echo "<option value='TOTAL'" . ($max_calls_method == 'TOTAL' ? ' selected' : '') . ">" . _QXZ("TOTAL") . "</option>";
        echo "<option value='IN_QUEUE'" . ($max_calls_method == 'IN_QUEUE' ? ' selected' : '') . ">" . _QXZ("IN_QUEUE") . "</option>";
        echo "<option value='DISABLED'" . ($max_calls_method == 'DISABLED' ? ' selected' : '') . ">" . _QXZ("DISABLED") . "</option>";
        echo "</select>";
        echo "</div>";
        echo "</div>";
        echo "<div class='col-md-4'>";
        echo "<div class='form-group mb-3'>";
        echo "<label for='max_calls_count' class='form-label'>" . _QXZ("Max Calls Count") . ":</label>";
        echo "<input type='text' class='form-control' id='max_calls_count' name='max_calls_count' value='$max_calls_count'>";
        echo "</div>";
        echo "</div>";
        echo "<div class='col-md-4'>";
        echo "<div class='form-group mb-3'>";
        echo "<label for='max_calls_action' class='form-label'>" . _QXZ("Max Calls Action") . ":</label>";
        echo "<select class='form-select' id='max_calls_action' name='max_calls_action'>";
        echo "<option value='DROP'" . ($max_calls_action == 'DROP' ? ' selected' : '') . ">" . _QXZ("DROP") . "</option>";
        echo "<option value='AFTERHOURS'" . ($max_calls_action == 'AFTERHOURS' ? ' selected' : '') . ">" . _QXZ("AFTERHOURS") . "</option>";
        echo "<option value='NO_AGENT_NO_QUEUE'" . ($max_calls_action == 'NO_AGENT_NO_QUEUE' ? ' selected' : '') . ">" . _QXZ("NO_AGENT_NO_QUEUE") . "</option>";
        echo "<option value='AREACODE_FILTER'" . ($max_calls_action == 'AREACODE_FILTER' ? ' selected' : '') . ">" . _QXZ("AREACODE_FILTER") . "</option>";
        echo "</select>";
        echo "</div>";
        echo "</div>";
        echo "</div>";
        echo "</div>";
        echo "</div>";
        echo "</div>";
        echo "</div>";

        // Options Tab
        echo "<div class='tab-pane fade' id='options' role='tabpanel' aria-labelledby='options-tab'>";
        echo "<div class='row'>";
        echo "<div class='col-md-6'>";
        echo "<div class='card mb-3'>";
        echo "<div class='card-header'>" . _QXZ("Welcome & Music Settings") . "</div>";
        echo "<div class='card-body'>";
        echo "<div class='form-group mb-3'>";
        echo "<label for='welcome_message_filename' class='form-label'>" . _QXZ("Welcome Message Filename") . ":</label>";
        echo "<div class='input-group'>";
        echo "<input type='text' class='form-control' id='welcome_message_filename' name='welcome_message_filename' value='$welcome_message_filename'>";
        echo "<button class='btn btn-outline-secondary' type='button' onclick=\"launch_chooser('welcome_message_filename','date');\"><i class='bi bi-music-note-list'></i></button>";
        echo "</div>";
        echo "</div>";

        echo "<div class='form-group mb-3'>";
        echo "<label for='play_welcome_message' class='form-label'>" . _QXZ("Play Welcome Message") . ":</label>";
        echo "<select class='form-select' id='play_welcome_message' name='play_welcome_message'>";
        echo "<option value='ALWAYS'" . ($play_welcome_message == 'ALWAYS' ? ' selected' : '') . ">" . _QXZ("ALWAYS") . "</option>";
        echo "<option value='NEVER'" . ($play_welcome_message == 'NEVER' ? ' selected' : '') . ">" . _QXZ("NEVER") . "</option>";
        echo "<option value='IF_WAIT_ONLY'" . ($play_welcome_message == 'IF_WAIT_ONLY' ? ' selected' : '') . ">" . _QXZ("IF_WAIT_ONLY") . "</option>";
        echo "<option value='YES_UNLESS_NODELAY'" . ($play_welcome_message == 'YES_UNLESS_NODELAY' ? ' selected' : '') . ">" . _QXZ("YES_UNLESS_NODELAY") . "</option>";
        echo "</select>";
        echo "</div>";

        echo "<div class='form-group mb-3'>";
        echo "<label for='moh_context' class='form-label'>" . _QXZ("Music On Hold Context") . ":</label>";
        echo "<div class='input-group'>";
        echo "<input type='text' class='form-control' id='moh_context' name='moh_context' value='$moh_context'>";
        echo "<button class='btn btn-outline-secondary' type='button' onclick=\"launch_moh_chooser('moh_context','moh');\"><i class='bi bi-music-note-beamed'></i></button>";
        echo "</div>";
        echo "</div>";

        echo "<div class='form-group mb-3'>";
        echo "<label for='onhold_prompt_filename' class='form-label'>" . _QXZ("On Hold Prompt Filename") . ":</label>";
        echo "<div class='input-group'>";
        echo "<input type='text' class='form-control' id='onhold_prompt_filename' name='onhold_prompt_filename' value='$onhold_prompt_filename'>";
        echo "<button class='btn btn-outline-secondary' type='button' onclick=\"launch_chooser('onhold_prompt_filename','date');\"><i class='bi bi-music-note-list'></i></button>";
        echo "</div>";
        echo $ohpf_message;
        echo "</div>";

        echo "<div class='form-group mb-3'>";
        echo "<label for='prompt_interval' class='form-label'>" . _QXZ("On Hold Prompt Interval") . ":</label>";
        echo "<input type='text' class='form-control' id='prompt_interval' name='prompt_interval' value='$prompt_interval'>";
        echo "</div>";

        echo "<div class='form-group mb-3'>";
        echo "<label for='onhold_prompt_no_block' class='form-label'>" . _QXZ("On Hold Prompt No Block") . ":</label>";
        echo "<select class='form-select' id='onhold_prompt_no_block' name='onhold_prompt_no_block'>";
        echo "<option value='N'" . ($onhold_prompt_no_block == 'N' ? ' selected' : '') . ">" . _QXZ("N") . "</option>";
        echo "<option value='Y'" . ($onhold_prompt_no_block == 'Y' ? ' selected' : '') . ">" . _QXZ("Y") . "</option>";
        echo "</select>";
        echo "</div>";

        echo "<div class='form-group mb-3'>";
        echo "<label for='onhold_prompt_seconds' class='form-label'>" . _QXZ("On Hold Prompt Seconds") . ":</label>";
        echo "<input type='text' class='form-control' id='onhold_prompt_seconds' name='onhold_prompt_seconds' value='$onhold_prompt_seconds'>";
        echo "</div>";
        echo "</div>";
        echo "</div>";
        echo "</div>";

        echo "<div class='col-md-6'>";
        echo "<div class='card mb-3'>";
        echo "<div class='card-header'>" . _QXZ("Queue Position Settings") . "</div>";
        echo "<div class='card-body'>";
        echo "<div class='form-group mb-3'>";
        echo "<label for='play_place_in_line' class='form-label'>" . _QXZ("Play Place in Line") . ":</label>";
        echo "<select class='form-select' id='play_place_in_line' name='play_place_in_line'>";
        echo "<option value='Y'" . ($play_place_in_line == 'Y' ? ' selected' : '') . ">" . _QXZ("Y") . "</option>";
        echo "<option value='N'" . ($play_place_in_line == 'N' ? ' selected' : '') . ">" . _QXZ("N") . "</option>";
        echo "</select>";
        echo "</div>";

        echo "<div class='form-group mb-3'>";
        echo "<label for='place_in_line_caller_number_filename' class='form-label'>" . _QXZ("Place in Line Caller Number") . ":</label>";
        echo "<div class='input-group'>";
        echo "<input type='text' class='form-control' id='place_in_line_caller_number_filename' name='place_in_line_caller_number_filename' value='$place_in_line_caller_number_filename'>";
        echo "<button class='btn btn-outline-secondary' type='button' onclick=\"launch_chooser('place_in_line_caller_number_filename','date');\"><i class='bi bi-music-note-list'></i></button>";
        echo "</div>";
        echo "</div>";

        echo "<div class='form-group mb-3'>";
        echo "<label for='place_in_line_you_next_filename' class='form-label'>" . _QXZ("Place in Line You Are Next Filename") . ":</label>";
        echo "<div class='input-group'>";
        echo "<input type='text' class='form-control' id='place_in_line_you_next_filename' name='place_in_line_you_next_filename' value='$place_in_line_you_next_filename'>";
        echo "<button class='btn btn-outline-secondary' type='button' onclick=\"launch_chooser('place_in_line_you_next_filename','date');\"><i class='bi bi-music-note-list'></i></button>";
        echo "</div>";
        echo "</div>";

        echo "<div class='form-group mb-3'>";
        echo "<label for='play_estimate_hold_time' class='form-label'>" . _QXZ("Play Estimated Hold Time") . ":</label>";
        echo "<select class='form-select' id='play_estimate_hold_time' name='play_estimate_hold_time'>";
        echo "<option value='Y'" . ($play_estimate_hold_time == 'Y' ? ' selected' : '') . ">" . _QXZ("Y") . "</option>";
        echo "<option value='N'" . ($play_estimate_hold_time == 'N' ? ' selected' : '') . ">" . _QXZ("N") . "</option>";
        echo "</select>";
        echo "</div>";

        echo "<div class='form-group mb-3'>";
        echo "<label for='calculate_estimated_hold_seconds' class='form-label'>" . _QXZ("Calculate Estimated Hold Seconds") . ":</label>";
        echo "<input type='text' class='form-control' id='calculate_estimated_hold_seconds' name='calculate_estimated_hold_seconds' value='$calculate_estimated_hold_seconds'>";
        echo "</div>";

        echo "<div class='form-group mb-3'>";
        echo "<label for='eht_minimum_prompt_filename' class='form-label'>" . _QXZ("Estimated Hold Time Minimum Filename") . ":</label>";
        echo "<div class='input-group'>";
        echo "<input type='text' class='form-control' id='eht_minimum_prompt_filename' name='eht_minimum_prompt_filename' value='$eht_minimum_prompt_filename'>";
        echo "<button class='btn btn-outline-secondary' type='button' onclick=\"launch_chooser('eht_minimum_prompt_filename','date');\"><i class='bi bi-music-note-list'></i></button>";
        echo "</div>";
        echo "</div>";

        echo "<div class='form-group mb-3'>";
        echo "<label for='eht_minimum_prompt_no_block' class='form-label'>" . _QXZ("Estimated Hold Time Minimum Prompt No Block") . ":</label>";
        echo "<select class='form-select' id='eht_minimum_prompt_no_block' name='eht_minimum_prompt_no_block'>";
        echo "<option value='N'" . ($eht_minimum_prompt_no_block == 'N' ? ' selected' : '') . ">" . _QXZ("N") . "</option>";
        echo "<option value='Y'" . ($eht_minimum_prompt_no_block == 'Y' ? ' selected' : '') . ">" . _QXZ("Y") . "</option>";
        echo "</select>";
        echo "</div>";

        echo "<div class='form-group mb-3'>";
        echo "<label for='eht_minimum_prompt_seconds' class='form-label'>" . _QXZ("Estimated Hold Time Minimum Prompt Seconds") . ":</label>";
        echo "<input type='text' class='form-control' id='eht_minimum_prompt_seconds' name='eht_minimum_prompt_seconds' value='$eht_minimum_prompt_seconds'>";
        echo "</div>";
        echo "</div>";
        echo "</div>";
        echo "</div>";
        echo "</div>";

        // Wait Time Options
        echo "<div class='row'>";
        echo "<div class='col-12'>";
        echo "<div class='card mb-3'>";
        echo "<div class='card-header'>" . _QXZ("Wait Time Options") . "</div>";
        echo "<div class='card-body'>";
        echo "<div class='row'>";
        echo "<div class='col-md-4'>";
        echo "<div class='form-group mb-3'>";
        echo "<label for='wait_time_option' class='form-label'>" . _QXZ("Wait Time Option") . ":</label>";
        echo "<select class='form-select' id='wait_time_option' name='wait_time_option'>";
        echo "<option value='NONE'" . ($wait_time_option == 'NONE' ? ' selected' : '') . ">" . _QXZ("NONE") . "</option>";
        echo "<option value='PRESS_STAY'" . ($wait_time_option == 'PRESS_STAY' ? ' selected' : '') . ">" . _QXZ("PRESS_STAY") . "</option>";
        echo "<option value='PRESS_VMAIL'" . ($wait_time_option == 'PRESS_VMAIL' ? ' selected' : '') . ">" . _QXZ("PRESS_VMAIL") . "</option>";
        echo "<option value='PRESS_VMAIL_NO_INST'" . ($wait_time_option == 'PRESS_VMAIL_NO_INST' ? ' selected' : '') . ">" . _QXZ("PRESS_VMAIL_NO_INST") . "</option>";
        echo "<option value='PRESS_EXTEN'" . ($wait_time_option == 'PRESS_EXTEN' ? ' selected' : '') . ">" . _QXZ("PRESS_EXTEN") . "</option>";
        echo "<option value='PRESS_CALLMENU'" . ($wait_time_option == 'PRESS_CALLMENU' ? ' selected' : '') . ">" . _QXZ("PRESS_CALLMENU") . "</option>";
        echo "<option value='PRESS_CID_CALLBACK'" . ($wait_time_option == 'PRESS_CID_CALLBACK' ? ' selected' : '') . ">" . _QXZ("PRESS_CID_CALLBACK") . "</option>";
        echo "<option value='PRESS_INGROUP'" . ($wait_time_option == 'PRESS_INGROUP' ? ' selected' : '') . ">" . _QXZ("PRESS_INGROUP") . "</option>";
        echo "<option value='PRESS_CALLBACK_QUEUE'" . ($wait_time_option == 'PRESS_CALLBACK_QUEUE' ? ' selected' : '') . ">" . _QXZ("PRESS_CALLBACK_QUEUE") . "</option>";
        echo "</select>";
        echo "</div>";
        echo "</div>";
        echo "<div class='col-md-4'>";
        echo "<div class='form-group mb-3'>";
        echo "<label for='wait_time_second_option' class='form-label'>" . _QXZ("Wait Time Second Option") . ":</label>";
        echo "<select class='form-select' id='wait_time_second_option' name='wait_time_second_option'>";
        echo "<option value='NONE'" . ($wait_time_second_option == 'NONE' ? ' selected' : '') . ">" . _QXZ("NONE") . "</option>";
        echo "<option value='PRESS_STAY'" . ($wait_time_second_option == 'PRESS_STAY' ? ' selected' : '') . ">" . _QXZ("PRESS_STAY") . "</option>";
        echo "<option value='PRESS_VMAIL'" . ($wait_time_second_option == 'PRESS_VMAIL' ? ' selected' : '') . ">" . _QXZ("PRESS_VMAIL") . "</option>";
        echo "<option value='PRESS_VMAIL_NO_INST'" . ($wait_time_second_option == 'PRESS_VMAIL_NO_INST' ? ' selected' : '') . ">" . _QXZ("PRESS_VMAIL_NO_INST") . "</option>";
        echo "<option value='PRESS_EXTEN'" . ($wait_time_second_option == 'PRESS_EXTEN' ? ' selected' : '') . ">" . _QXZ("PRESS_EXTEN") . "</option>";
        echo "<option value='PRESS_CALLMENU'" . ($wait_time_second_option == 'PRESS_CALLMENU' ? ' selected' : '') . ">" . _QXZ("PRESS_CALLMENU") . "</option>";
        echo "<option value='PRESS_CID_CALLBACK'" . ($wait_time_second_option == 'PRESS_CID_CALLBACK' ? ' selected' : '') . ">" . _QXZ("PRESS_CID_CALLBACK") . "</option>";
        echo "<option value='PRESS_INGROUP'" . ($wait_time_second_option == 'PRESS_INGROUP' ? ' selected' : '') . ">" . _QXZ("PRESS_INGROUP") . "</option>";
        echo "<option value='PRESS_CALLBACK_QUEUE'" . ($wait_time_second_option == 'PRESS_CALLBACK_QUEUE' ? ' selected' : '') . ">" . _QXZ("PRESS_CALLBACK_QUEUE") . "</option>";
        echo "</select>";
        echo "</div>";
        echo "</div>";
        echo "<div class='col-md-4'>";
        echo "<div class='form-group mb-3'>";
        echo "<label for='wait_time_third_option' class='form-label'>" . _QXZ("Wait Time Third Option") . ":</label>";
        echo "<select class='form-select' id='wait_time_third_option' name='wait_time_third_option'>";
        echo "<option value='NONE'" . ($wait_time_third_option == 'NONE' ? ' selected' : '') . ">" . _QXZ("NONE") . "</option>";
        echo "<option value='PRESS_STAY'" . ($wait_time_third_option == 'PRESS_STAY' ? ' selected' : '') . ">" . _QXZ("PRESS_STAY") . "</option>";
        echo "<option value='PRESS_VMAIL'" . ($wait_time_third_option == 'PRESS_VMAIL' ? ' selected' : '') . ">" . _QXZ("PRESS_VMAIL") . "</option>";
        echo "<option value='PRESS_VMAIL_NO_INST'" . ($wait_time_third_option == 'PRESS_VMAIL_NO_INST' ? ' selected' : '') . ">" . _QXZ("PRESS_VMAIL_NO_INST") . "</option>";
        echo "<option value='PRESS_EXTEN'" . ($wait_time_third_option == 'PRESS_EXTEN' ? ' selected' : '') . ">" . _QXZ("PRESS_EXTEN") . "</option>";
        echo "<option value='PRESS_CALLMENU'" . ($wait_time_third_option == 'PRESS_CALLMENU' ? ' selected' : '') . ">" . _QXZ("PRESS_CALLMENU") . "</option>";
        echo "<option value='PRESS_CID_CALLBACK'" . ($wait_time_third_option == 'PRESS_CID_CALLBACK' ? ' selected' : '') . ">" . _QXZ("PRESS_CID_CALLBACK") . "</option>";
        echo "<option value='PRESS_INGROUP'" . ($wait_time_third_option == 'PRESS_INGROUP' ? ' selected' : '') . ">" . _QXZ("PRESS_INGROUP") . "</option>";
        echo "<option value='PRESS_CALLBACK_QUEUE'" . ($wait_time_third_option == 'PRESS_CALLBACK_QUEUE' ? ' selected' : '') . ">" . _QXZ("PRESS_CALLBACK_QUEUE") . "</option>";
        echo "</select>";
        echo "</div>";
        echo "</div>";
        echo "</div>";

        echo "<div class='row'>";
        echo "<div class='col-md-3'>";
        echo "<div class='form-group mb-3'>";
        echo "<label for='wait_time_option_seconds' class='form-label'>" . _QXZ("Wait Time Option Seconds") . ":</label>";
        echo "<input type='text' class='form-control' id='wait_time_option_seconds' name='wait_time_option_seconds' value='$wait_time_option_seconds'>";
        echo "</div>";
        echo "</div>";
        echo "<div class='col-md-3'>";
        echo "<div class='form-group mb-3'>";
        echo "<label for='wait_time_option_exten' class='form-label'>" . _QXZ("Wait Time Option Extension") . ":</label>";
        echo "<input type='text' class='form-control' id='wait_time_option_exten' name='wait_time_option_exten' value='$wait_time_option_exten'>";
        echo "</div>";
        echo "</div>";
        echo "<div class='col-md-3'>";
        echo "<div class='form-group mb-3'>";
        echo "<label for='wait_time_option_voicemail' class='form-label'>" . _QXZ("Wait Time Option Voicemail") . ":</label>";
        echo "<div class='input-group'>";
        echo "<input type='text' class='form-control' id='wait_time_option_voicemail' name='wait_time_option_voicemail' value='$wait_time_option_voicemail'>";
        echo "<button class='btn btn-outline-secondary' type='button' onclick=\"launch_vm_chooser('wait_time_option_voicemail','vm');\"><i class='bi bi-telephone'></i></button>";
        echo "</div>";
        echo "</div>";
        echo "</div>";
        echo "<div class='col-md-3'>";
        echo "<div class='form-group mb-3'>";
        echo "<label for='wait_time_option_xfer_group' class='form-label'>" . _QXZ("Wait Time Option Transfer In-Group") . ":</label>";
        echo "<select class='form-select' id='wait_time_option_xfer_group' name='wait_time_option_xfer_group'>";
        echo "$Wgroups_menu";
        echo "</select>";
        echo "</div>";
        echo "</div>";
        echo "</div>";

        echo "<div class='row'>";
        echo "<div class='col-md-6'>";
        echo "<div class='form-group mb-3'>";
        echo "<label for='wait_time_option_callmenu' class='form-label'><a href=\"$PHP_SELF?ADD=3511&menu_id=$wait_time_option_callmenu\">" . _QXZ("Wait Time Option Callmenu") . "</a>:</label>";
        echo "<select class='form-select' id='wait_time_option_callmenu' name='wait_time_option_callmenu'>";
        echo "$Wmenuslist";
        echo "</select>";
        echo "</div>";
        echo "</div>";
        echo "<div class='col-md-6'>";
        echo "<div class='form-group mb-3'>";
        echo "<label for='wait_time_option_callback_list_id' class='form-label'>" . _QXZ("Wait Time Option Callback List ID") . ":</label>";
        echo "<input type='text' class='form-control' id='wait_time_option_callback_list_id' name='wait_time_option_callback_list_id' value='$wait_time_option_callback_list_id'>";
        echo "</div>";
        echo "</div>";
        echo "</div>";

        echo "<div class='row'>";
        echo "<div class='col-md-6'>";
        echo "<div class='form-group mb-3'>";
        echo "<label for='wait_time_option_press_filename' class='form-label'>" . _QXZ("Wait Time Option Press Filename") . ":</label>";
        echo "<div class='input-group'>";
        echo "<input type='text' class='form-control' id='wait_time_option_press_filename' name='wait_time_option_press_filename' value='$wait_time_option_press_filename'>";
        echo "<button class='btn btn-outline-secondary' type='button' onclick=\"launch_chooser('wait_time_option_press_filename','date');\"><i class='bi bi-music-note-list'></i></button>";
        echo "</div>";
        echo "</div>";
        echo "</div>";
        echo "<div class='col-md-6'>";
        echo "<div class='form-group mb-3'>";
        echo "<label for='wait_time_option_callback_filename' class='form-label'>" . _QXZ("Wait Time Option After Press Filename") . ":</label>";
        echo "<div class='input-group'>";
        echo "<input type='text' class='form-control' id='wait_time_option_callback_filename' name='wait_time_option_callback_filename' value='$wait_time_option_callback_filename'>";
        echo "<button class='btn btn-outline-secondary' type='button' onclick=\"launch_chooser('wait_time_option_callback_filename','date');\"><i class='bi bi-music-note-list'></i></button>";
        echo "</div>";
        echo "</div>";
        echo "</div>";
        echo "</div>";

        echo "<div class='row'>";
        echo "<div class='col-md-3'>";
        echo "<div class='form-group mb-3'>";
        echo "<label for='wait_time_option_no_block' class='form-label'>" . _QXZ("Wait Time Option Press No Block") . ":</label>";
        echo "<select class='form-select' id='wait_time_option_no_block' name='wait_time_option_no_block'>";
        echo "<option value='N'" . ($wait_time_option_no_block == 'N' ? ' selected' : '') . ">" . _QXZ("N") . "</option>";
        echo "<option value='Y'" . ($wait_time_option_no_block == 'Y' ? ' selected' : '') . ">" . _QXZ("Y") . "</option>";
        echo "</select>";
        echo "</div>";
        echo "</div>";
        echo "<div class='col-md-3'>";
        echo "<div class='form-group mb-3'>";
        echo "<label for='wait_time_option_prompt_seconds' class='form-label'>" . _QXZ("Wait Time Option Press Filename Seconds") . ":</label>";
        echo "<input type='text' class='form-control' id='wait_time_option_prompt_seconds' name='wait_time_option_prompt_seconds' value='$wait_time_option_prompt_seconds'>";
        echo "</div>";
        echo "</div>";
        echo "<div class='col-md-3'>";
        echo "<div class='form-group mb-3'>";
        echo "<label for='wait_hold_option_priority' class='form-label'>" . _QXZ("Wait Hold Option Priority") . ":</label>";
        echo "<select class='form-select' id='wait_hold_option_priority' name='wait_hold_option_priority'>";
        echo "<option value='WAIT'" . ($wait_hold_option_priority == 'WAIT' ? ' selected' : '') . ">" . _QXZ("WAIT") . "</option>";
        echo "<option value='BOTH'" . ($wait_hold_option_priority == 'BOTH' ? ' selected' : '') . ">" . _QXZ("BOTH") . "</option>";
        echo "</select>";
        echo "</div>";
        echo "</div>";
        echo "<div class='col-md-3'>";
        echo "<div class='form-group mb-3'>";
        echo "<label for='wait_time_lead_reset' class='form-label'>" . _QXZ("Wait Time Option Lead Reset") . ":</label>";
        echo "<select class='form-select' id='wait_time_lead_reset' name='wait_time_lead_reset'>";
        echo "<option value='Y'" . ($wait_time_lead_reset == 'Y' ? ' selected' : '') . ">" . _QXZ("Y") . "</option>";
        echo "<option value='N'" . ($wait_time_lead_reset == 'N' ? ' selected' : '') . ">" . _QXZ("N") . "</option>";
        echo "</select>";
        echo "</div>";
        echo "</div>";
        echo "</div>";
        echo "</div>";
        echo "</div>";
        echo "</div>";

        // Hold Time Options
        echo "<div class='row'>";
        echo "<div class='col-12'>";
        echo "<div class='card mb-3'>";
        echo "<div class='card-header'>" . _QXZ("Hold Time Options") . "</div>";
        echo "<div class='card-body'>";
        echo "<div class='row'>";
        echo "<div class='col-md-4'>";
        echo "<div class='form-group mb-3'>";
        echo "<label for='hold_time_option' class='form-label'>" . _QXZ("Estimated Hold Time Option") . ":</label>";
        echo "<select class='form-select' id='hold_time_option' name='hold_time_option'>";
        echo "<option value='NONE'" . ($hold_time_option == 'NONE' ? ' selected' : '') . ">" . _QXZ("NONE") . "</option>";
        echo "<option value='EXTENSION'" . ($hold_time_option == 'EXTENSION' ? ' selected' : '') . ">" . _QXZ("EXTENSION") . "</option>";
        echo "<option value='CALL_MENU'" . ($hold_time_option == 'CALL_MENU' ? ' selected' : '') . ">" . _QXZ("CALL_MENU") . "</option>";
        echo "<option value='VOICEMAIL'" . ($hold_time_option == 'VOICEMAIL' ? ' selected' : '') . ">" . _QXZ("VOICEMAIL") . "</option>";
        echo "<option value='VMAIL_NO_INST'" . ($hold_time_option == 'VMAIL_NO_INST' ? ' selected' : '') . ">" . _QXZ("VMAIL_NO_INST") . "</option>";
        echo "<option value='IN_GROUP'" . ($hold_time_option == 'IN_GROUP' ? ' selected' : '') . ">" . _QXZ("IN_GROUP") . "</option>";
        echo "<option value='CALLERID_CALLBACK'" . ($hold_time_option == 'CALLERID_CALLBACK' ? ' selected' : '') . ">" . _QXZ("CALLERID_CALLBACK") . "</option>";
        echo "<option value='DROP_ACTION'" . ($hold_time_option == 'DROP_ACTION' ? ' selected' : '') . ">" . _QXZ("DROP_ACTION") . "</option>";
        echo "<option value='PRESS_STAY'" . ($hold_time_option == 'PRESS_STAY' ? ' selected' : '') . ">" . _QXZ("PRESS_STAY") . "</option>";
        echo "<option value='PRESS_VMAIL'" . ($hold_time_option == 'PRESS_VMAIL' ? ' selected' : '') . ">" . _QXZ("PRESS_VMAIL") . "</option>";
        echo "<option value='PRESS_VMAIL_NO_INST'" . ($hold_time_option == 'PRESS_VMAIL_NO_INST' ? ' selected' : '') . ">" . _QXZ("PRESS_VMAIL_NO_INST") . "</option>";
        echo "<option value='PRESS_EXTEN'" . ($hold_time_option == 'PRESS_EXTEN' ? ' selected' : '') . ">" . _QXZ("PRESS_EXTEN") . "</option>";
        echo "<option value='PRESS_CALLMENU'" . ($hold_time_option == 'PRESS_CALLMENU' ? ' selected' : '') . ">" . _QXZ("PRESS_CALLMENU") . "</option>";
        echo "<option value='PRESS_CID_CALLBACK'" . ($hold_time_option == 'PRESS_CID_CALLBACK' ? ' selected' : '') . ">" . _QXZ("PRESS_CID_CALLBACK") . "</option>";
        echo "<option value='PRESS_INGROUP'" . ($hold_time_option == 'PRESS_INGROUP' ? ' selected' : '') . ">" . _QXZ("PRESS_INGROUP") . "</option>";
        echo "<option value='PRESS_CALLBACK_QUEUE'" . ($hold_time_option == 'PRESS_CALLBACK_QUEUE' ? ' selected' : '') . ">" . _QXZ("PRESS_CALLBACK_QUEUE") . "</option>";
        echo "</select>";
        echo "</div>";
        echo "</div>";
        echo "<div class='col-md-4'>";
        echo "<div class='form-group mb-3'>";
        echo "<label for='hold_time_second_option' class='form-label'>" . _QXZ("Hold Time Second Option") . ":</label>";
        echo "<select class='form-select' id='hold_time_second_option' name='hold_time_second_option'>";
        echo "<option value='NONE'" . ($hold_time_second_option == 'NONE' ? ' selected' : '') . ">" . _QXZ("NONE") . "</option>";
        echo "<option value='PRESS_STAY'" . ($hold_time_second_option == 'PRESS_STAY' ? ' selected' : '') . ">" . _QXZ("PRESS_STAY") . "</option>";
        echo "<option value='PRESS_VMAIL'" . ($hold_time_second_option == 'PRESS_VMAIL' ? ' selected' : '') . ">" . _QXZ("PRESS_VMAIL") . "</option>";
        echo "<option value='PRESS_VMAIL_NO_INST'" . ($hold_time_second_option == 'PRESS_VMAIL_NO_INST' ? ' selected' : '') . ">" . _QXZ("PRESS_VMAIL_NO_INST") . "</option>";
        echo "<option value='PRESS_EXTEN'" . ($hold_time_second_option == 'PRESS_EXTEN' ? ' selected' : '') . ">" . _QXZ("PRESS_EXTEN") . "</option>";
        echo "<option value='PRESS_CALLMENU'" . ($hold_time_second_option == 'PRESS_CALLMENU' ? ' selected' : '') . ">" . _QXZ("PRESS_CALLMENU") . "</option>";
        echo "<option value='PRESS_CID_CALLBACK'" . ($hold_time_second_option == 'PRESS_CID_CALLBACK' ? ' selected' : '') . ">" . _QXZ("PRESS_CID_CALLBACK") . "</option>";
        echo "<option value='PRESS_INGROUP'" . ($hold_time_second_option == 'PRESS_INGROUP' ? ' selected' : '') . ">" . _QXZ("PRESS_INGROUP") . "</option>";
        echo "<option value='PRESS_CALLBACK_QUEUE'" . ($hold_time_second_option == 'PRESS_CALLBACK_QUEUE' ? ' selected' : '') . ">" . _QXZ("PRESS_CALLBACK_QUEUE") . "</option>";
        echo "</select>";
        echo "</div>";
        echo "</div>";
        echo "<div class='col-md-4'>";
        echo "<div class='form-group mb-3'>";
        echo "<label for='hold_time_third_option' class='form-label'>" . _QXZ("Hold Time Third Option") . ":</label>";
        echo "<select class='form-select' id='hold_time_third_option' name='hold_time_third_option'>";
        echo "<option value='NONE'" . ($hold_time_third_option == 'NONE' ? ' selected' : '') .




        echo "<option value='PRESS_STAY'" . ($hold_time_third_option == 'PRESS_STAY' ? ' selected' : '') . ">" . _QXZ("PRESS_STAY") . "</option>";
        echo "<option value='PRESS_VMAIL'" . ($hold_time_third_option == 'PRESS_VMAIL' ? ' selected' : '') . ">" . _QXZ("PRESS_VMAIL") . "</option>";
        echo "<option value='PRESS_VMAIL_NO_INST'" . ($hold_time_third_option == 'PRESS_VMAIL_NO_INST' ? ' selected' : '') . ">" . _QXZ("PRESS_VMAIL_NO_INST") . "</option>";
        echo "<option value='PRESS_EXTEN'" . ($hold_time_third_option == 'PRESS_EXTEN' ? ' selected' : '') . ">" . _QXZ("PRESS_EXTEN") . "</option>";
        echo "<option value='PRESS_CALLMENU'" . ($hold_time_third_option == 'PRESS_CALLMENU' ? ' selected' : '') . ">" . _QXZ("PRESS_CALLMENU") . "</option>";
        echo "<option value='PRESS_CID_CALLBACK'" . ($hold_time_third_option == 'PRESS_CID_CALLBACK' ? ' selected' : '') . ">" . _QXZ("PRESS_CID_CALLBACK") . "</option>";
        echo "<option value='PRESS_INGROUP'" . ($hold_time_third_option == 'PRESS_INGROUP' ? ' selected' : '') . ">" . _QXZ("PRESS_INGROUP") . "</option>";
        echo "<option value='PRESS_CALLBACK_QUEUE'" . ($hold_time_third_option == 'PRESS_CALLBACK_QUEUE' ? ' selected' : '') . ">" . _QXZ("PRESS_CALLBACK_QUEUE") . "</option>";
        echo "</select>";
        echo "</div>";
        echo "</div>";
        echo "</div>";

        echo "<div class='row'>";
        echo "<div class='col-md-3'>";
        echo "<div class='form-group mb-3'>";
        echo "<label for='hold_time_option_seconds' class='form-label'>" . _QXZ("Hold Time Option Seconds") . ":</label>";
        echo "<input type='text' class='form-control' id='hold_time_option_seconds' name='hold_time_option_seconds' value='$hold_time_option_seconds'>";
        echo "</div>";
        echo "</div>";
        echo "<div class='col-md-3'>";
        echo "<div class='form-group mb-3'>";
        echo "<label for='hold_time_option_minimum' class='form-label'>" . _QXZ("Hold Time Option Minimum") . ":</label>";
        echo "<input type='text' class='form-control' id='hold_time_option_minimum' name='hold_time_option_minimum' value='$hold_time_option_minimum'>";
        echo "</div>";
        echo "</div>";
        echo "<div class='col-md-3'>";
        echo "<div class='form-group mb-3'>";
        echo "<label for='hold_time_option_exten' class='form-label'>" . _QXZ("Hold Time Option Extension") . ":</label>";
        echo "<input type='text' class='form-control' id='hold_time_option_exten' name='hold_time_option_exten' value='$hold_time_option_exten'>";
        echo "</div>";
        echo "</div>";
        echo "<div class='col-md-3'>";
        echo "<div class='form-group mb-3'>";
        echo "<label for='hold_time_lead_reset' class='form-label'>" . _QXZ("Hold Time Option Lead Reset") . ":</label>";
        echo "<select class='form-select' id='hold_time_lead_reset' name='hold_time_lead_reset'>";
        echo "<option value='Y'" . ($hold_time_lead_reset == 'Y' ? ' selected' : '') . ">" . _QXZ("Y") . "</option>";
        echo "<option value='N'" . ($hold_time_lead_reset == 'N' ? ' selected' : '') . ">" . _QXZ("N") . "</option>";
        echo "</select>";
        echo "</div>";
        echo "</div>";
        echo "</div>";

        echo "<div class='row'>";
        echo "<div class='col-md-6'>";
        echo "<div class='form-group mb-3'>";
        echo "<label for='hold_time_option_callmenu' class='form-label'><a href=\"$PHP_SELF?ADD=3511&menu_id=$hold_time_option_callmenu\">" . _QXZ("Hold Time Option Callmenu") . "</a>:</label>";
        echo "<select class='form-select' id='hold_time_option_callmenu' name='hold_time_option_callmenu'>";
        echo "$Xmenuslist";
        echo "</select>";
        echo "</div>";
        echo "</div>";
        echo "<div class='col-md-6'>";
        echo "<div class='form-group mb-3'>";
        echo "<label for='hold_time_option_xfer_group' class='form-label'>" . _QXZ("Hold Time Option Transfer In-Group") . ":</label>";
        echo "<select class='form-select' id='hold_time_option_xfer_group' name='hold_time_option_xfer_group'>";
        echo "$Tgroups_menu";
        echo "</select>";
        echo "</div>";
        echo "</div>";
        echo "</div>";

        echo "<div class='row'>";
        echo "<div class='col-md-6'>";
        echo "<div class='form-group mb-3'>";
        echo "<label for='hold_time_option_voicemail' class='form-label'>" . _QXZ("Hold Time Option Voicemail") . ":</label>";
        echo "<div class='input-group'>";
        echo "<input type='text' class='form-control' id='hold_time_option_voicemail' name='hold_time_option_voicemail' value='$hold_time_option_voicemail'>";
        echo "<button class='btn btn-outline-secondary' type='button' onclick=\"launch_vm_chooser('hold_time_option_voicemail','vm');\"><i class='bi bi-telephone'></i></button>";
        echo "</div>";
        echo "</div>";
        echo "</div>";
        echo "<div class='col-md-6'>";
        echo "<div class='form-group mb-3'>";
        echo "<label for='hold_recall_xfer_group' class='form-label'>" . _QXZ("Hold Recall Transfer In-Group") . ":</label>";
        echo "<select class='form-select' id='hold_recall_xfer_group' name='hold_recall_xfer_group'>";
        echo "$Hgroups_menu";
        echo "</select>";
        echo "</div>";
        echo "</div>";
        echo "</div>";

        echo "<div class='row'>";
        echo "<div class='col-md-6'>";
        echo "<div class='form-group mb-3'>";
        echo "<label for='hold_time_option_press_filename' class='form-label'>" . _QXZ("Hold Time Option Press Filename") . ":</label>";
        echo "<div class='input-group'>";
        echo "<input type='text' class='form-control' id='hold_time_option_press_filename' name='hold_time_option_press_filename' value='$hold_time_option_press_filename'>";
        echo "<button class='btn btn-outline-secondary' type='button' onclick=\"launch_chooser('hold_time_option_press_filename','date');\"><i class='bi bi-music-note-list'></i></button>";
        echo "</div>";
        echo "</div>";
        echo "</div>";
        echo "<div class='col-md-6'>";
        echo "<div class='form-group mb-3'>";
        echo "<label for='hold_time_option_callback_filename' class='form-label'>" . _QXZ("Hold Time Option After Press Filename") . ":</label>";
        echo "<div class='input-group'>";
        echo "<input type='text' class='form-control' id='hold_time_option_callback_filename' name='hold_time_option_callback_filename' value='$hold_time_option_callback_filename'>";
        echo "<button class='btn btn-outline-secondary' type='button' onclick=\"launch_chooser('hold_time_option_callback_filename','date');\"><i class='bi bi-music-note-list'></i></button>";
        echo "</div>";
        echo "</div>";
        echo "</div>";
        echo "</div>";

        echo "<div class='row'>";
        echo "<div class='col-md-3'>";
        echo "<div class='form-group mb-3'>";
        echo "<label for='hold_time_option_no_block' class='form-label'>" . _QXZ("Hold Time Option Press No Block") . ":</label>";
        echo "<select class='form-select' id='hold_time_option_no_block' name='hold_time_option_no_block'>";
        echo "<option value='N'" . ($hold_time_option_no_block == 'N' ? ' selected' : '') . ">" . _QXZ("N") . "</option>";
        echo "<option value='Y'" . ($hold_time_option_no_block == 'Y' ? ' selected' : '') . ">" . _QXZ("Y") . "</option>";
        echo "</select>";
        echo "</div>";
        echo "</div>";
        echo "<div class='col-md-3'>";
        echo "<div class='form-group mb-3'>";
        echo "<label for='hold_time_option_prompt_seconds' class='form-label'>" . _QXZ("Hold Time Option Press Filename Seconds") . ":</label>";
        echo "<input type='text' class='form-control' id='hold_time_option_prompt_seconds' name='hold_time_option_prompt_seconds' value='$hold_time_option_prompt_seconds'>";
        echo "</div>";
        echo "</div>";
        echo "<div class='col-md-6'>";
        echo "<div class='form-group mb-3'>";
        echo "<label for='hold_time_option_callback_list_id' class='form-label'>" . _QXZ("Hold Time Option Callback List ID") . ":</label>";
        echo "<input type='text' class='form-control' id='hold_time_option_callback_list_id' name='hold_time_option_callback_list_id' value='$hold_time_option_callback_list_id'>";
        echo "</div>";
        echo "</div>";
        echo "</div>";
        echo "</div>";
        echo "</div>";
        echo "</div>";

        // Closing Time Options
        echo "<div class='row'>";
        echo "<div class='col-12'>";
        echo "<div class='card mb-3'>";
        echo "<div class='card-header'>" . _QXZ("Closing Time Options") . "</div>";
        echo "<div class='card-body'>";
        echo "<div class='row'>";
        echo "<div class='col-md-4'>";
        echo "<div class='form-group mb-3'>";
        echo "<label for='closing_time_action' class='form-label'>" . _QXZ("Closing Time Action") . ":</label>";
        echo "<select class='form-select' id='closing_time_action' name='closing_time_action'>";
        echo "<option value='DISABLED'" . ($closing_time_action == 'DISABLED' ? ' selected' : '') . ">" . _QXZ("DISABLED") . "</option>";
        echo "<option value='PRESS_VMAIL'" . ($closing_time_action == 'PRESS_VMAIL' ? ' selected' : '') . ">" . _QXZ("PRESS_VMAIL") . "</option>";
        echo "<option value='PRESS_VMAIL_NO_INST'" . ($closing_time_action == 'PRESS_VMAIL_NO_INST' ? ' selected' : '') . ">" . _QXZ("PRESS_VMAIL_NO_INST") . "</option>";
        echo "<option value='PRESS_EXTEN'" . ($closing_time_action == 'PRESS_EXTEN' ? ' selected' : '') . ">" . _QXZ("PRESS_EXTEN") . "</option>";
        echo "<option value='PRESS_CALLMENU'" . ($closing_time_action == 'PRESS_CALLMENU' ? ' selected' : '') . ">" . _QXZ("PRESS_CALLMENU") . "</option>";
        echo "<option value='PRESS_CID_CALLBACK'" . ($closing_time_action == 'PRESS_CID_CALLBACK' ? ' selected' : '') . ">" . _QXZ("PRESS_CID_CALLBACK") . "</option>";
        echo "<option value='PRESS_INGROUP'" . ($closing_time_action == 'PRESS_INGROUP' ? ' selected' : '') . ">" . _QXZ("PRESS_INGROUP") . "</option>";
        echo "<option value='PRESS_CALLBACK_QUEUE'" . ($closing_time_action == 'PRESS_CALLBACK_QUEUE' ? ' selected' : '') . ">" . _QXZ("PRESS_CALLBACK_QUEUE") . "</option>";
        echo "<option value='VMAIL'" . ($closing_time_action == 'VMAIL' ? ' selected' : '') . ">" . _QXZ("VMAIL") . "</option>";
        echo "<option value='VMAIL_NO_INST'" . ($closing_time_action == 'VMAIL_NO_INST' ? ' selected' : '') . ">" . _QXZ("VMAIL_NO_INST") . "</option>";
        echo "<option value='EXTEN'" . ($closing_time_action == 'EXTEN' ? ' selected' : '') . ">" . _QXZ("EXTEN") . "</option>";
        echo "<option value='CALLMENU'" . ($closing_time_action == 'CALLMENU' ? ' selected' : '') . ">" . _QXZ("CALLMENU") . "</option>";
        echo "<option value='CID_CALLBACK'" . ($closing_time_action == 'CID_CALLBACK' ? ' selected' : '') . ">" . _QXZ("CID_CALLBACK") . "</option>";
        echo "<option value='INGROUP'" . ($closing_time_action == 'INGROUP' ? ' selected' : '') . ">" . _QXZ("INGROUP") . "</option>";
        echo "<option value='CALLBACK_QUEUE'" . ($closing_time_action == 'CALLBACK_QUEUE' ? ' selected' : '') . ">" . _QXZ("CALLBACK_QUEUE") . "</option>";
        echo "</select>";
        echo "</div>";
        echo "</div>";
        echo "<div class='col-md-4'>";
        echo "<div class='form-group mb-3'>";
        echo "<label for='closing_time_now_trigger' class='form-label'>" . _QXZ("Closing Time Now Trigger") . ":</label>";
        echo "<select class='form-select' id='closing_time_now_trigger' name='closing_time_now_trigger'>";
        echo "<option value='N'" . ($closing_time_now_trigger == 'N' ? ' selected' : '') . ">" . _QXZ("N") . "</option>";
        echo "<option value='Y'" . ($closing_time_now_trigger == 'Y' ? ' selected' : '') . ">" . _QXZ("Y") . "</option>";
        echo "</select>";
        echo "</div>";
        echo "</div>";
        echo "<div class='col-md-4'>";
        echo "<div class='form-group mb-3'>";
        echo "<label for='closing_time_lead_reset' class='form-label'>" . _QXZ("Closing Time Option Lead Reset") . ":</label>";
        echo "<select class='form-select' id='closing_time_lead_reset' name='closing_time_lead_reset'>";
        echo "<option value='Y'" . ($closing_time_lead_reset == 'Y' ? ' selected' : '') . ">" . _QXZ("Y") . "</option>";
        echo "<option value='N'" . ($closing_time_lead_reset == 'N' ? ' selected' : '') . ">" . _QXZ("N") . "</option>";
        echo "</select>";
        echo "</div>";
        echo "</div>";
        echo "</div>";

        echo "<div class='row'>";
        echo "<div class='col-md-6'>";
        echo "<div class='form-group mb-3'>";
        echo "<label for='closing_time_filename' class='form-label'>" . _QXZ("Closing Time Press Filename") . ":</label>";
        echo "<div class='input-group'>";
        echo "<input type='text' class='form-control' id='closing_time_filename' name='closing_time_filename' value='$closing_time_filename'>";
        echo "<button class='btn btn-outline-secondary' type='button' onclick=\"launch_chooser('closing_time_filename','date');\"><i class='bi bi-music-note-list'></i></button>";
        echo "</div>";
        echo "</div>";
        echo "</div>";
        echo "<div class='col-md-6'>";
        echo "<div class='form-group mb-3'>";
        echo "<label for='closing_time_end_filename' class='form-label'>" . _QXZ("Closing Time End Filename") . ":</label>";
        echo "<div class='input-group'>";
        echo "<input type='text' class='form-control' id='closing_time_end_filename' name='closing_time_end_filename' value='$closing_time_end_filename'>";
        echo "<button class='btn btn-outline-secondary' type='button' onclick=\"launch_chooser('closing_time_end_filename','date');\"><i class='bi bi-music-note-list'></i></button>";
        echo "</div>";
        echo "</div>";
        echo "</div>";
        echo "</div>";

        echo "<div class='row'>";
        echo "<div class='col-md-3'>";
        echo "<div class='form-group mb-3'>";
        echo "<label for='closing_time_option_exten' class='form-label'>" . _QXZ("Closing Time Option Extension") . ":</label>";
        echo "<input type='text' class='form-control' id='closing_time_option_exten' name='closing_time_option_exten' value='$closing_time_option_exten'>";
        echo "</div>";
        echo "</div>";
        echo "<div class='col-md-3'>";
        echo "<div class='form-group mb-3'>";
        echo "<label for='closing_time_option_voicemail' class='form-label'>" . _QXZ("Closing Time Option Voicemail") . ":</label>";
        echo "<div class='input-group'>";
        echo "<input type='text' class='form-control' id='closing_time_option_voicemail' name='closing_time_option_voicemail' value='$closing_time_option_voicemail'>";
        echo "<button class='btn btn-outline-secondary' type='button' onclick=\"launch_vm_chooser('closing_time_option_voicemail','vm');\"><i class='bi bi-telephone'></i></button>";
        echo "</div>";
        echo "</div>";
        echo "</div>";
        echo "<div class='col-md-3'>";
        echo "<div class='form-group mb-3'>";
        echo "<label for='closing_time_option_xfer_group' class='form-label'>" . _QXZ("Closing Time Option Transfer In-Group") . ":</label>";
        echo "<select class='form-select' id='closing_time_option_xfer_group' name='closing_time_option_xfer_group'>";
        echo "$Cgroups_menu";
        echo "</select>";
        echo "</div>";
        echo "</div>";
        echo "<div class='col-md-3'>";
        echo "<div class='form-group mb-3'>";
        echo "<label for='closing_time_option_callback_list_id' class='form-label'>" . _QXZ("Closing Time Option Callback List ID") . ":</label>";
        echo "<input type='text' class='form-control' id='closing_time_option_callback_list_id' name='closing_time_option_callback_list_id' value='$closing_time_option_callback_list_id'>";
        echo "</div>";
        echo "</div>";
        echo "</div>";

        echo "<div class='row'>";
        echo "<div class='col-md-6'>";
        echo "<div class='form-group mb-3'>";
        echo "<label for='closing_time_option_callmenu' class='form-label'><a href=\"$PHP_SELF?ADD=3511&menu_id=$closing_time_option_callmenu\">" . _QXZ("Closing Time Option Callmenu") . "</a>:</label>";
        echo "<select class='form-select' id='closing_time_option_callmenu' name='closing_time_option_callmenu'>";
        echo "$Cmenuslist";
        echo "</select>";
        echo "</div>";
        echo "</div>";
        echo "<div class='col-md-6'>";
        echo "<div class='form-group mb-3'>";
        echo "<label for='no_delay_call_route' class='form-label'>" . _QXZ("No Delay Call Route") . ":</label>";
        echo "<select class='form-select' id='no_delay_call_route' name='no_delay_call_route'>";
        echo "<option value='Y'" . ($no_delay_call_route == 'Y' ? ' selected' : '') . ">" . _QXZ("Y") . "</option>";
        echo "<option value='N'" . ($no_delay_call_route == 'N' ? ' selected' : '') . ">" . _QXZ("N") . "</option>";
        echo "</select>";
        echo "</div>";
        echo "</div>";
        echo "</div>";
        echo "</div>";
        echo "</div>";
        echo "</div>";

        // CID Callback Options
        echo "<div class='row'>";
        echo "<div class='col-12'>";
        echo "<div class='card mb-3'>";
        echo "<div class='card-header'>" . _QXZ("CID Callback Options") . "</div>";
        echo "<div class='card-body'>";
        echo "<div class='row'>";
        echo "<div class='col-md-4'>";
        echo "<div class='form-group mb-3'>";
        echo "<label for='cid_cb_confirm_number' class='form-label'>" . _QXZ("CID Callback Number Validation") . ":</label>";
        echo "<select class='form-select' id='cid_cb_confirm_number' name='cid_cb_confirm_number'>";
        echo "<option value='NO'" . ($cid_cb_confirm_number == 'NO' ? ' selected' : '') . ">" . _QXZ("NO") . "</option>";
        echo "<option value='YES'" . ($cid_cb_confirm_number == 'YES' ? ' selected' : '') . ">" . _QXZ("YES") . "</option>";
        echo "<option value='ONLY_IF_INVALID'" . ($cid_cb_confirm_number == 'ONLY_IF_INVALID' ? ' selected' : '') . ">" . _QXZ("ONLY_IF_INVALID") . "</option>";
        echo "</select>";
        echo "</div>";
        echo "</div>";
        echo "<div class='col-md-4'>";
        echo "<div class='form-group mb-3'>";
        echo "<label for='cid_cb_valid_length' class='form-label'>" . _QXZ("CID Callback Number Length") . ":</label>";
        echo "<input type='text' class='form-control' id='cid_cb_valid_length' name='cid_cb_valid_length' value='$cid_cb_valid_length'>";
        echo "</div>";
        echo "</div>";
        echo "<div class='col-md-4'>";
        echo "<div class='form-group mb-3'>";
        echo "<label for='cid_cb_invalid_filter_phone_group' class='form-label'><a href=\"$PHP_SELF?ADD=3711&filter_phone_group_id=$cid_cb_invalid_filter_phone_group\">" . _QXZ("CID Callback Number Invalid Filter Phone Group") . "</a>:</label>";
        echo "<select class='form-select' id='cid_cb_invalid_filter_phone_group' name='cid_cb_invalid_filter_phone_group'>";
        echo "$Fgroups_list";
        echo "<option value='$cid_cb_invalid_filter_phone_group' selected>" . _QXZ("$cid_cb_invalid_filter_phone_group") . "</option>";
        echo "<option value=''>" . _QXZ("NONE") . "</option>";
        echo "</select>";
        echo "</div>";
        echo "</div>";
        echo "</div>";

        echo "<div class='row'>";
        echo "<div class='col-md-6'>";
        echo "<div class='form-group mb-3'>";
        echo "<label for='cid_cb_valid_filename' class='form-label'>" . _QXZ("CID Callback Number Valid Filename") . ":</label>";
        echo "<div class='input-group'>";
        echo "<input type='text' class='form-control' id='cid_cb_valid_filename' name='cid_cb_valid_filename' value='$cid_cb_valid_filename'>";
        echo "<button class='btn btn-outline-secondary' type='button' onclick=\"launch_chooser('cid_cb_valid_filename','date');\"><i class='bi bi-music-note-list'></i></button>";
        echo "</div>";
        echo "</div>";
        echo "</div>";
        echo "<div class='col-md-6'>";
        echo "<div class='form-group mb-3'>";
        echo "<label for='cid_cb_confirmed_filename' class='form-label'>" . _QXZ("CID Callback Number Confirmed Filename") . ":</label>";
        echo "<div class='input-group'>";
        echo "<input type='text' class='form-control' id='cid_cb_confirmed_filename' name='cid_cb_confirmed_filename' value='$cid_cb_confirmed_filename'>";
        echo "<button class='btn btn-outline-secondary' type='button' onclick=\"launch_chooser('cid_cb_confirmed_filename','date');\"><i class='bi bi-music-note-list'></i></button>";
        echo "</div>";
        echo "</div>";
        echo "</div>";
        echo "</div>";

        echo "<div class='row'>";
        echo "<div class='col-md-6'>";
        echo "<div class='form-group mb-3'>";
        echo "<label for='cid_cb_enter_filename' class='form-label'>" . _QXZ("CID Callback Number Enter Filename") . ":</label>";
        echo "<div class='input-group'>";
        echo "<input type='text' class='form-control' id='cid_cb_enter_filename' name='cid_cb_enter_filename' value='$cid_cb_enter_filename'>";
        echo "<button class='btn btn-outline-secondary' type='button' onclick=\"launch_chooser('cid_cb_enter_filename','date');\"><i class='bi bi-music-note-list'></i></button>";
        echo "</div>";
        echo "</div>";
        echo "</div>";
        echo "<div class='col-md-6'>";
        echo "<div class='form-group mb-3'>";
        echo "<label for='cid_cb_you_entered_filename' class='form-label'>" . _QXZ("CID Callback Number You Entered Filename") . ":</label>";
        echo "<div class='input-group'>";
        echo "<input type='text' class='form-control' id='cid_cb_you_entered_filename' name='cid_cb_you_entered_filename' value='$cid_cb_you_entered_filename'>";
        echo "<button class='btn btn-outline-secondary' type='button' onclick=\"launch_chooser('cid_cb_you_entered_filename','date');\"><i class='bi bi-music-note-list'></i></button>";
        echo "</div>";
        echo "</div>";
        echo "</div>";
        echo "</div>";

        echo "<div class='row'>";
        echo "<div class='col-md-6'>";
        echo "<div class='form-group mb-3'>";
        echo "<label for='cid_cb_press_to_confirm_filename' class='form-label'>" . _QXZ("CID Callback Number Confirm Filename") . ":</label>";
        echo "<div class='input-group'>";
        echo "<input type='text' class='form-control' id='cid_cb_press_to_confirm_filename' name='cid_cb_press_to_confirm_filename' value='$cid_cb_press_to_confirm_filename'>";
        echo "<button class='btn btn-outline-secondary' type='button' onclick=\"launch_chooser('cid_cb_press_to_confirm_filename','date');\"><i class='bi bi-music-note-list'></i></button>";
        echo "</div>";
        echo "</div>";
        echo "</div>";
        echo "<div class='col-md-6'>";
        echo "<div class='form-group mb-3'>";
        echo "<label for='cid_cb_invalid_filename' class='form-label'>" . _QXZ("CID Callback Number Invalid Filename") . ":</label>";
        echo "<div class='input-group'>";
        echo "<input type='text' class='form-control' id='cid_cb_invalid_filename' name='cid_cb_invalid_filename' value='$cid_cb_invalid_filename'>";
        echo "<button class='btn btn-outline-secondary' type='button' onclick=\"launch_chooser('cid_cb_invalid_filename','date');\"><i class='bi bi-music-note-list'></i></button>";
        echo "</div>";
        echo "</div>";
        echo "</div>";
        echo "</div>";

        echo "<div class='row'>";
        echo "<div class='col-md-6'>";
        echo "<div class='form-group mb-3'>";
        echo "<label for='cid_cb_reenter_filename' class='form-label'>" . _QXZ("CID Callback Number Reenter Filename") . ":</label>";
        echo "<div class='input-group'>";
        echo "<input type='text' class='form-control' id='cid_cb_reenter_filename' name='cid_cb_reenter_filename' value='$cid_cb_reenter_filename'>";
        echo "<button class='btn btn-outline-secondary' type='button' onclick=\"launch_chooser('cid_cb_reenter_filename','date');\"><i class='bi bi-music-note-list'></i></button>";
        echo "</div>";
        echo "</div>";
        echo "</div>";
        echo "<div class='col-md-6'>";
        echo "<div class='form-group mb-3'>";
        echo "<label for='cid_cb_error_filename' class='form-label'>" . _QXZ("CID Callback Number Error Filename") . ":</label>";
        echo "<div class='input-group'>";
        echo "<input type='text' class='form-control' id='cid_cb_error_filename' name='cid_cb_error_filename' value='$cid_cb_error_filename'>";
        echo "<button class='btn btn-outline-secondary' type='button' onclick=\"launch_chooser('cid_cb_error_filename','date');\"><i class='bi bi-music-note-list'></i></button>";
        echo "</div>";
        echo "</div>";
        echo "</div>";
        echo "</div>";
        echo "</div>";
        echo "</div>";
        echo "</div>";

        // Agent Alert Settings
        echo "<div class='row'>";
        echo "<div class='col-12'>";
        echo "<div class='card mb-3'>";
        echo "<div class='card-header'>" . _QXZ("Agent Alert Settings") . "</div>";
        echo "<div class='card-body'>";
        echo "<div class='row'>";
        echo "<div class='col-md-6'>";
        echo "<div class='form-group mb-3'>";
        echo "<label for='agent_alert_exten' class='form-label'>" . _QXZ("Agent Alert Filename") . ":</label>";
        echo "<div class='input-group'>";
        echo "<input type='text' class='form-control' id='agent_alert_exten' name='agent_alert_exten' value='$agent_alert_exten'>";
        echo "<button class='btn btn-outline-secondary' type='button' onclick=\"launch_chooser('agent_alert_exten','date');\"><i class='bi bi-music-note-list'></i></button>";
        echo "</div>";
        echo "</div>";
        echo "</div>";
        echo "<div class='col-md-6'>";
        echo "<div class='form-group mb-3'>";
        echo "<label for='agent_alert_delay' class='form-label'>" . _QXZ("Agent Alert Delay") . ":</label>";
        echo "<input type='text' class='form-control' id='agent_alert_delay' name='agent_alert_delay' value='$agent_alert_delay'>";
        echo "</div>";
        echo "</div>";
        echo "</div>";

        if ($SSbrowser_call_alerts > 0) {
            echo "<div class='row'>";
            echo "<div class='col-md-6'>";
            echo "<div class='form-group mb-3'>";
            echo "<label for='browser_alert_sound' class='form-label'>" . _QXZ("Agent Browser Call Alert Sound") . ":</label>";
            echo "<div class='row'>";
            echo "<div class='col-md-8'>";
            echo "<select class='form-select' id='browser_alert_sound' name='browser_alert_sound'>";
            echo "$bas_output";
            echo "<option value='---NONE---'>" . _QXZ("NONE") . "</option>";
            echo "<option value='---DISABLED---'>" . _QXZ("DISABLED") . "</option>";
            echo "<option value='$browser_alert_sound' selected>" . _QXZ("$browser_alert_sound") . "</option>";
            echo "</select>";
            echo "</div>";
            echo "<div class='col-md-4'>";
            echo "<button class='btn btn-outline-secondary btn-sm w-100' type='button' onclick=\"play_browser_sound('browser_alert_sound','browser_alert_volume');\"><i class='bi bi-play-circle me-1'></i>" . _QXZ("Play") . "</button>";
            echo "</div>";
            echo "</div>";
            echo "</div>";
            echo "</div>";
            echo "<div class='col-md-6'>";
            echo "<div class='form-group mb-3'>";
            echo "<label for='browser_alert_volume' class='form-label'>" . _QXZ("Volume") . ":</label>";
            echo "<select class='form-select' id='browser_alert_volume' name='browser_alert_volume'>";
            $bav = 100;
            while ($bav >= 0) {
                echo "<option value='$bav'" . ($bav == $browser_alert_volume ? ' selected' : '') . ">$bav</option>";
                $bav = ($bav - 5);
            }
            echo "</select>";
            echo "</div>";
            echo "</div>";
            echo "</div>";
        }

        // Second Agent Alert
        echo "<div class='row'>";
        echo "<div class='col-md-4'>";
        echo "<div class='form-group mb-3'>";
        echo "<label for='second_alert_trigger' class='form-label'>" . _QXZ("Second Agent Alert Trigger") . ":</label>";
        echo "<select class='form-select' id='second_alert_trigger' name='second_alert_trigger'>";
        echo "<option value='DISABLED'" . ($second_alert_trigger == 'DISABLED' ? ' selected' : '') . ">" . _QXZ("DISABLED") . "</option>";
        echo "<option value='PHONE'" . ($second_alert_trigger == 'PHONE' ? ' selected' : '') . ">" . _QXZ("PHONE") . "</option>";
        echo "<option value='LEAD_ID'" . ($second_alert_trigger == 'LEAD_ID' ? ' selected' : '') . ">" . _QXZ("LEAD_ID") . "</option>";
        echo "<option value='PHONE_TO'" . ($second_alert_trigger == 'PHONE_TO' ? ' selected' : '') . ">" . _QXZ("PHONE_TO") . "</option>";
        echo "<option value='LEAD_ID_TO'" . ($second_alert_trigger == 'LEAD_ID_TO' ? ' selected' : '') . ">" . _QXZ("LEAD_ID_TO") . "</option>";
        echo "<option value='PHONE_NQ'" . ($second_alert_trigger == 'PHONE_NQ' ? ' selected' : '') . ">" . _QXZ("PHONE_NQ") . "</option>";
        echo "<option value='LEAD_ID_NQ'" . ($second_alert_trigger == 'LEAD_ID_NQ' ? ' selected' : '') . ">" . _QXZ("LEAD_ID_NQ") . "</option>";
        echo "<option value='PHONE_TO_NQ'" . ($second_alert_trigger == 'PHONE_TO_NQ' ? ' selected' : '') . ">" . _QXZ("PHONE_TO_NQ") . "</option>";
        echo "<option value='LEAD_ID_TO_NQ'" . ($second_alert_trigger == 'LEAD_ID_TO_NQ' ? ' selected' : '') . ">" . _QXZ("LEAD_ID_TO_NQ") . "</option>";
        echo "</select>";
        echo "</div>";
        echo "</div>";
        echo "<div class='col-md-4'>";
        echo "<div class='form-group mb-3'>";
        echo "<label for='second_alert_trigger_seconds' class='form-label'>" . _QXZ("Second Agent Alert Trigger Seconds") . ":</label>";
        echo "<input type='text' class='form-control' id='second_alert_trigger_seconds' name='second_alert_trigger_seconds' value='$second_alert_trigger_seconds'>";
        echo "</div>";
        echo "</div>";
        echo "<div class='col-md-4'>";
        echo "<div class='form-group mb-3'>";
        echo "<label for='second_alert_delay' class='form-label'>" . _QXZ("Second Agent Alert Delay") . ":</label>";
        echo "<input type='text' class='form-control' id='second_alert_delay' name='second_alert_delay' value='$second_alert_delay'>";
        echo "</div>";
        echo "</div>";
        echo "</div>";

        echo "<div class='row'>";
        echo "<div class='col-md-6'>";
        echo "<div class='form-group mb-3'>";
        echo "<label for='second_alert_filename' class='form-label'>" . _QXZ("Second Agent Alert Filename") . ":</label>";
        echo "<div class='input-group'>";
        echo "<input type='text' class='form-control' id='second_alert_filename' name='second_alert_filename' value='$second_alert_filename'>";
        echo "<button class='btn btn-outline-secondary' type='button' onclick=\"launch_chooser('second_alert_filename','date');\"><i class='bi bi-music-note-list'></i></button>";
        echo "</div>";
        echo "</div>";
        echo "</div>";
        echo "<div class='col-md-3'>";
        echo "<div class='form-group mb-3'>";
        echo "<label for='second_alert_container' class='form-label'>";
        if ($inand_selected > 0) {
            echo "<a href=\"$PHP_SELF?ADD=392111111111&container_id=$second_alert_container\">" . _QXZ("Second Agent Alert Container") . "</a>";
        } else {
            echo _QXZ("Second Agent Alert Container");
        }
        echo ":</label>";
        echo "<select class='form-select' id='second_alert_container' name='second_alert_container'>";
        echo "<option value=''>" . _QXZ("DISABLED") . "</option>";
        echo "$second_alert_container_menu";
        echo "</select>";
        echo "</div>";
        echo "</div>";
        echo "<div class='col-md-3'>";
        echo "<div class='form-group mb-3'>";
        echo "<label for='second_alert_only' class='form-label'>" . _QXZ("Second Agent Alert Only") . ":</label>";
        echo "<select class='form-select' id='second_alert_only' name='second_alert_only'>";
        echo "<option value='DISABLED'" . ($second_alert_only == 'DISABLED' ? ' selected' : '') . ">" . _QXZ("DISABLED") . "</option>";
        echo "<option value='ENABLED'" . ($second_alert_only == 'ENABLED' ? ' selected' : '') . ">" . _QXZ("ENABLED") . "</option>";
        echo "</select>";
        echo "</div>";
        echo "</div>";
        echo "</div>";

        // Third Agent Alert
        echo "<div class='row'>";
        echo "<div class='col-md-4'>";
        echo "<div class='form-group mb-3'>";
        echo "<label for='third_alert_trigger' class='form-label'>" . _QXZ("Third Agent Alert Trigger") . ":</label>";
        echo "<select class='form-select' id='third_alert_trigger' name='third_alert_trigger'>";
        echo "<option value='DISABLED'" . ($third_alert_trigger == 'DISABLED' ? ' selected' : '') . ">" . _QXZ("DISABLED") . "</option>";
        echo "<option value='PHONE'" . ($third_alert_trigger == 'PHONE' ? ' selected' : '') . ">" . _QXZ("PHONE") . "</option>";
        echo "<option value='LEAD_ID'" . ($third_alert_trigger == 'LEAD_ID' ? ' selected' : '') . ">" . _QXZ("LEAD_ID") . "</option>";
        echo "<option value='PHONE_TO'" . ($third_alert_trigger == 'PHONE_TO' ? ' selected' : '') . ">" . _QXZ("PHONE_TO") . "</option>";
        echo "<option value='LEAD_ID_TO'" . ($third_alert_trigger == 'LEAD_ID_TO' ? ' selected' : '') . ">" . _QXZ("LEAD_ID_TO") . "</option>";
        echo "<option value='PHONE_NQ'" . ($third_alert_trigger == 'PHONE_NQ' ? ' selected' : '') . ">" . _QXZ("PHONE_NQ") . "</option>";
        echo "<option value='LEAD_ID_NQ'" . ($third_alert_trigger == 'LEAD_ID_NQ' ? ' selected' : '') . ">" . _QXZ("LEAD_ID_NQ") . "</option>";
        echo "<option value='PHONE_TO_NQ'" . ($third_alert_trigger == 'PHONE_TO_NQ' ? ' selected' : '') . ">" . _QXZ("PHONE_TO_NQ") . "</option>";
        echo "<option value='LEAD_ID_TO_NQ'" . ($third_alert_trigger == 'LEAD_ID_TO_NQ' ? ' selected' : '') . ">" . _QXZ("LEAD_ID_TO_NQ") . "</option>";
        echo "</select>";
        echo "</div>";
        echo "</div>";
        echo "<div class='col-md-4'>";
        echo "<div class='form-group mb-3'>";
        echo "<label for='third_alert_trigger_seconds' class='form-label'>" . _QXZ("Third Agent Alert Trigger Seconds") . ":</label>";
        echo "<input type='text' class='form-control' id='third_alert_trigger_seconds' name='third_alert_trigger_seconds' value='$third_alert_trigger_seconds'>";
        echo "</div>";
        echo "</div>";
        echo "<div class='col-md-4'>";
        echo "<div class='form-group mb-3'>";
        echo "<label for='third_alert_delay' class='form-label'>" . _QXZ("Third Agent Alert Delay") . ":</label>";
        echo "<input type='text' class='form-control' id='third_alert_delay' name='third_alert_delay' value='$third_alert_delay'>";
        echo "</div>";
        echo "</div>";
        echo "</div>";

        echo "<div class='row'>";
        echo "<div class='col-md-6'>";
        echo "<div class='form-group mb-3'>";
        echo "<label for='third_alert_filename' class='form-label'>" . _QXZ("Third Agent Alert Filename") . ":</label>";
        echo "<div class='input-group'>";
        echo "<input type='text' class='form-control' id='third_alert_filename' name='third_alert_filename' value='$third_alert_filename'>";
        echo "<button class='btn btn-outline-secondary' type='button' onclick=\"launch_chooser('third_alert_filename','date');\"><i class='bi bi-music-note-list'></i></button>";
        echo "</div>";
        echo "</div>";
        echo "</div>";
        echo "<div class='col-md-3'>";
        echo "<div class='form-group mb-3'>";
        echo "<label for='third_alert_container' class='form-label'>";
        if ($inand_selected > 0) {
            echo "<a href=\"$PHP_SELF?ADD=392111111111&container_id=$third_alert_container\">" . _QXZ("Third Agent Alert Container") . "</a>";
        } else {
            echo _QXZ("Third Agent Alert Container");
        }
        echo ":</label>";
        echo "<select class='form-select' id='third_alert_container' name='third_alert_container'>";
        echo "<option value=''>" . _QXZ("DISABLED") . "</option>";
        echo "$third_alert_container_menu";
        echo "</select>";
        echo "</div>";
        echo "</div>";
        echo "<div class='col-md-3'>";
        echo "<div class='form-group mb-3'>";
        echo "<label for='third_alert_only' class='form-label'>" . _QXZ("Third Agent Alert Only") . ":</label>";
        echo "<select class='form-select' id='third_alert_only' name='third_alert_only'>";
        echo "<option value='DISABLED'" . ($third_alert_only == 'DISABLED' ? ' selected' : '') . ">" . _QXZ("DISABLED") . "</option>";
        echo "<option value='ENABLED'" . ($third_alert_only == 'ENABLED' ? ' selected' : '') . ">" . _QXZ("ENABLED") . "</option>";
        echo "</select>";
        echo "</div>";
        echo "</div>";
        echo "</div>";
        echo "</div>";
        echo "</div>";
        echo "</div>";

        // Recording Settings
        echo "<div class='row'>";
        echo "<div class='col-12'>";
        echo "<div class='card mb-3'>";
        echo "<div class='card-header'>" . _QXZ("Recording Settings") . "</div>";
        echo "<div class='card-body'>";
        echo "<div class='row'>";
        echo "<div class='col-md-4'>";
        echo "<div class='form-group mb-3'>";
        echo "<label for='ingroup_recording_override' class='form-label'>" . _QXZ("In-Group Recording Override") . ":</label>";
        echo "<select class='form-select' id='ingroup_recording_override' name='ingroup_recording_override'>";
        echo "<option value='DISABLED'" . ($ingroup_recording_override == 'DISABLED' ? ' selected' : '') . ">" . _QXZ("DISABLED") . "</option>";
        echo "<option value='NEVER'" . ($ingroup_recording_override == 'NEVER' ? ' selected' : '') . ">" . _QXZ("NEVER") . "</option>";
        echo "<option value='ONDEMAND'" . ($ingroup_recording_override == 'ONDEMAND' ? ' selected' : '') . ">" . _QXZ("ONDEMAND") . "</option>";
        echo "<option value='ALLCALLS'" . ($ingroup_recording_override == 'ALLCALLS' ? ' selected' : '') . ">" . _QXZ("ALLCALLS") . "</option>";
        echo "<option value='ALLFORCE'" . ($ingroup_recording_override == 'ALLFORCE' ? ' selected' : '') . ">" . _QXZ("ALLFORCE") . "</option>";
        echo "</select>";
        echo "</div>";
        echo "</div>";
        echo "<div class='col-md-4'>";
        echo "<div class='form-group mb-3'>";
        echo "<label for='ingroup_rec_filename' class='form-label'>" . _QXZ("In-Group Recording Filename") . ":</label>";
        echo "<input type='text' class='form-control' id='ingroup_rec_filename' name='ingroup_rec_filename' value='$ingroup_rec_filename'>";
        echo "</div>";
        echo "</div>";
        echo "<div class='col-md-4'>";
        echo "<div class='form-group mb-3'>";
        echo "<label for='routing_initiated_recordings' class='form-label'>" . _QXZ("Routing Initiated Recording") . ":</label>";
        echo "<select class='form-select' id='routing_initiated_recordings' name='routing_initiated_recordings'>";
        echo "<option value='Y'" . ($routing_initiated_recordings == 'Y' ? ' selected' : '') . ">" . _QXZ("Y") . "</option>";
        echo "<option value='N'" . ($routing_initiated_recordings == 'N' ? ' selected' : '') . ">" . _QXZ("N") . "</option>";
        echo "</select>";
        echo "</div>";
        echo "</div>";
        echo "</div>";

        if (($SSstereo_recording == '1') or ($SSstereo_recording == '2') or ($SSstereo_recording == '3') or ($SSstereo_recording == '4') or ($SSstereo_recording == '5')) {
            echo "<div class='row'>";
            echo "<div class='col-md-4'>";
            echo "<div class='form-group mb-3'>";
            echo "<label for='stereo_recording' class='form-label'>" . _QXZ("Stereo Call Recordings") . ":</label>";
            echo "<select class='form-select' id='stereo_recording' name='stereo_recording'>";
            echo "<option value='BOTH_CHANNELS'" . ($stereo_recording == 'BOTH_CHANNELS' ? ' selected' : '') . ">" . _QXZ("BOTH_CHANNELS") . "</option>";
            echo "<option value='CUSTOMER_ONLY'" . ($stereo_recording == 'CUSTOMER_ONLY' ? ' selected' : '') . ">" . _QXZ("CUSTOMER_ONLY") . "</option>";
            echo "<option value='CUSTOMER_MUTE'" . ($stereo_recording == 'CUSTOMER_MUTE' ? ' selected' : '') . ">" . _QXZ("CUSTOMER_MUTE") . "</option>";
            echo "<option value='DISABLED'" . ($stereo_recording == 'DISABLED' ? ' selected' : '') . ">" . _QXZ("DISABLED") . "</option>";
            echo "</select>";
            echo "</div>";
            echo "</div>";
            echo "<div class='col-md-4'>";
            echo "<div class='form-group mb-3'>";
            echo "<label for='stereo_recording_agent' class='form-label'>" . _QXZ("Stereo Recording Agent Control") . ":</label>";
            echo "<select class='form-select' id='stereo_recording_agent' name='stereo_recording_agent'>";
            echo "<option value='NEVER'" . ($stereo_recording_agent == 'NEVER' ? ' selected' : '') . ">" . _QXZ("NEVER") . "</option>";
            echo "<option value='ONDEMAND'" . ($stereo_recording_agent == 'ONDEMAND' ? ' selected' : '') . ">" . _QXZ("ONDEMAND") . "</option>";
            echo "<option value='ALLCALLS'" . ($stereo_recording_agent == 'ALLCALLS' ? ' selected' : '') . ">" . _QXZ("ALLCALLS") . "</option>";
            echo "<option value='ALLFORCE'" . ($stereo_recording_agent == 'ALLFORCE' ? ' selected' : '') . ">" . _QXZ("ALLFORCE") . "</option>";
            echo "</select>";
            echo "</div>";
            echo "</div>";
            echo "<div class='col-md-4'>";
            echo "<div class='form-group mb-3'>";
            echo "<label for='stereo_rec_filename' class='form-label'>" . _QXZ("Stereo Rec Filename") . ":</label>";
            echo "<input type='text' class='form-control' id='stereo_rec_filename' name='stereo_rec_filename' value='$stereo_rec_filename'>";
            echo "</div>";
            echo "</div>";
            echo "</div>";

            if (($SSstereo_recording == '1') or ($SSstereo_recording == '2') or ($SSstereo_recording == '3') or ($SSstereo_recording == '4') or ($SSstereo_recording == '5') and ($SSstereo_parallel_recording == '1')) {
                echo "<div class='row'>";
                echo "<div class='col-md-4'>";
                echo "<div class='form-group mb-3'>";
                echo "<label for='stereo_parallel_recording' class='form-label'>" . _QXZ("Parallel Stereo Recordings") . ":</label>";
                echo "<select class='form-select' id='stereo_parallel_recording' name='stereo_parallel_recording'>";
                echo "<option value='CUSTOMER-ONLY'" . ($stereo_parallel_recording == 'CUSTOMER-ONLY' ? ' selected' : '') . ">" . _QXZ("CUSTOMER-ONLY") . "</option>";
                echo "<option value='CUSTOMER-MUTED'" . ($stereo_parallel_recording == 'CUSTOMER-MUTED' ? ' selected' : '') . ">" . _QXZ("CUSTOMER-MUTED") . "</option>";
                echo "<option value='CUSTOMER-ONLY_CUSTOMER-MUTED'" . ($stereo_parallel_recording == 'CUSTOMER-ONLY_CUSTOMER-MUTED' ? ' selected' : '') . ">" . _QXZ("CUSTOMER-ONLY_CUSTOMER-MUTED") . "</option>";
                echo "<option value='FULL-RECORDING'" . ($stereo_parallel_recording == 'FULL-RECORDING' ? ' selected' : '') . ">" . _QXZ("FULL-RECORDING") . "</option>";
                echo "<option value='CUSTOMER-ONLY_FULL-RECORDING'" . ($stereo_parallel_recording == 'CUSTOMER-ONLY_FULL-RECORDING' ? ' selected' : '') . ">" . _QXZ("CUSTOMER-ONLY_FULL-RECORDING") . "</option>";
                echo "<option value='CUSTOMER-MUTED_FULL-RECORDING'" . ($stereo_parallel_recording == 'CUSTOMER-MUTED_FULL-RECORDING' ? ' selected' : '') . ">" . _QXZ("CUSTOMER-MUTED_FULL-RECORDING") . "</option>";
                echo "<option value='CUSTOMER-ONLY_CUSTOMER-MUTED_FULL-RECORDING'" . ($stereo_parallel_recording == 'CUSTOMER-ONLY_CUSTOMER-MUTED_FULL-RECORDING' ? ' selected' : '') . ">" . _QXZ("CUSTOMER-ONLY_CUSTOMER-MUTED_FULL-RECORDING") . "</option>";
                echo "<option value='DISABLED'" . ($stereo_parallel_recording == 'DISABLED' ? ' selected' : '') . ">" . _QXZ("DISABLED") . "</option>";
                echo "</select>";
                echo "</div>";
                echo "</div>";
                echo "<div class='col-md-4'>";
                echo "<div class='form-group mb-3'>";
                echo "<label for='parallel_rec_co_filename' class='form-label'>" . _QXZ("Parallel Customer-Only Rec Filename") . ":</label>";
                echo "<input type='text' class='form-control' id='parallel_rec_co_filename' name='parallel_rec_co_filename' value='$parallel_rec_co_filename'>";
                echo "</div>";
                echo "</div>";
                echo "<div class='col-md-4'>";
                echo "<div class='form-group mb-3'>";
                echo "<label for='parallel_rec_cm_filename' class='form-label'>" . _QXZ("Parallel Customer-Muted Rec Filename") . ":</label>";
                echo "<input type='text' class='form-control' id='parallel_rec_cm_filename' name='parallel_rec_cm_filename' value='$parallel_rec_cm_filename'>";
                echo "</div>";
                echo "</div>";
                echo "</div>";

                echo "<div class='row'>";
                echo "<div class='col-md-4'>";
                echo "<div class='form-group mb-3'>";
                echo "<label for='parallel_rec_fr_filename' class='form-label'>" . _QXZ("Parallel Full-Recording Rec Filename") . ":</label>";
                echo "<input type='text' class='form-control' id='parallel_rec_fr_filename' name='parallel_rec_fr_filename' value='$parallel_rec_fr_filename'>";
                echo "</div>";
                echo "</div>";
                echo "</div>";
            }

            if (($SSrecording_dtmf_muting == '1') or ($SSrecording_dtmf_muting >= 2) and ($SSrecording_dtmf_detection == '1')) {
                $SYSTEM_DTMF_MUTING_OVERRIDE = '';
                if ($SSrecording_dtmf_muting >= 2) {
                    $SYSTEM_DTMF_MUTING_OVERRIDE = "<div class='alert alert-warning'><i class='bi bi-exclamation-triangle-fill me-2'></i>" . _QXZ("SYSTEM OVERRIDE ENABLED") . ": $SSrecording_dtmf_muting " . _QXZ("SECONDS") . "</div>";
                }
                echo "<div class='row'>";
                echo "<div class='col-md-4'>";
                echo "<div class='form-group mb-3'>";
                echo "<label for='recording_dtmf_muting' class='form-label'>" . _QXZ("Recording DTMF Muting") . ":</label>";
                echo "<input type='text' class='form-control' id='recording_dtmf_muting' name='recording_dtmf_muting' value='$recording_dtmf_muting'>";
                echo $SYSTEM_DTMF_MUTING_OVERRIDE;
                echo "</div>";
                echo "</div>";
                echo "</div>";
            }
        }
        echo "</div>";
        echo "</div>";
        echo "</div>";

        // Stats and Display Settings
        echo "<div class='row'>";
        echo "<div class='col-12'>";
        echo "<div class='card mb-3'>";
        echo "<div class='card-header'>" . _QXZ("Stats and Display Settings") . "</div>";
        echo "<div class='card-body'>";
        echo "<div class='row'>";
        echo "<div class='col-md-3'>";
        echo "<div class='form-group mb-3'>";
        echo "<label for='answer_sec_pct_rt_stat_one' class='form-label'>" . _QXZ("Stats Percent of Calls Answered Within X seconds") . " 1:</label>";
        echo "<input type='text' class='form-control' id='answer_sec_pct_rt_stat_one' name='answer_sec_pct_rt_stat_one' value='$answer_sec_pct_rt_stat_one'>";
        echo "</div>";
        echo "</div>";
        echo "<div class='col-md-3'>";
        echo "<div class='form-group mb-3'>";
        echo "<label for='answer_sec_pct_rt_stat_two' class='form-label'>" . _QXZ("Stats Percent of Calls Answered Within X seconds") . " 2:</label>";
        echo "<input type='text' class='form-control' id='answer_sec_pct_rt_stat_two' name='answer_sec_pct_rt_stat_two' value='$answer_sec_pct_rt_stat_two'>";
        echo "</div>";
        echo "</div>";
        echo "<div class='col-md-3'>";
        echo "<div class='form-group mb-3'>";
        echo "<label for='default_group_alias' class='form-label'>" . _QXZ("Default Group Alias") . ":</label>";
        echo "<select class='form-select' id='default_group_alias' name='default_group_alias'>";
        echo "<option value=''>" . _QXZ("NONE") . "</option>";
        echo "$group_alias_menu";
        echo "</select>";
        echo "</div>";
        echo "</div>";
        echo "<div class='col-md-3'>";
        echo "<div class='form-group mb-3'>";
        echo "<label for='dial_ingroup_cid' class='form-label'>$DID_edit_link_BEGIN" . _QXZ("Dial In-Group CID") . "$DID_edit_link_END:</label>";
        echo "<input type='text' class='form-control' id='dial_ingroup_cid' name='dial_ingroup_cid' value='$dial_ingroup_cid'>";
        echo "</div>";
        echo "</div>";
        echo "</div>";

        echo "<div class='row'>";
        echo "<div class='col-md-4'>";
        echo "<div class='form-group mb-3'>";
        echo "<label for='extension_appended_cidname' class='form-label'>" . _QXZ("Extension Append CID") . ":</label>";
        echo "<select class='form-select' id='extension_appended_cidname' name='extension_appended_cidname'>";
        echo "<option value='Y'" . ($extension_appended_cidname == 'Y' ? ' selected' : '') . ">" . _QXZ("Y") . "</option>";
        echo "<option value='N'" . ($extension_appended_cidname == 'N' ? ' selected' : '') . ">" . _QXZ("N") . "</option>";
        echo "<option value='Y_USER'" . ($extension_appended_cidname == 'Y_USER' ? ' selected' : '') . ">" . _QXZ("Y_USER") . "</option>";
        echo "<option value='Y_WITH_CAMPAIGN'" . ($extension_appended_cidname == 'Y_WITH_CAMPAIGN' ? ' selected' : '') . ">" . _QXZ("Y_WITH_CAMPAIGN") . "</option>";
        echo "<option value='Y_USER_WITH_CAMPAIGN'" . ($extension_appended_cidname == 'Y_USER_WITH_CAMPAIGN' ? ' selected' : '') . ">" . _QXZ("Y_USER_WITH_CAMPAIGN") . "</option>";
        echo "</select>";
        echo "</div>";
        echo "</div>";
        echo "<div class='col-md-4'>";
        echo "<div class='form-group mb-3'>";
        echo "<label for='uniqueid_status_display' class='form-label'>" . _QXZ("Uniqueid Status Display") . ":</label>";
        echo "<select class='form-select' id='uniqueid_status_display' name='uniqueid_status_display'>";
        echo "<option value='DISABLED'" . ($uniqueid_status_display == 'DISABLED' ? ' selected' : '') . ">" . _QXZ("DISABLED") . "</option>";
        echo "<option value='ENABLED'" . ($uniqueid_status_display == 'ENABLED' ? ' selected' : '') . ">" . _QXZ("ENABLED") . "</option>";
        echo "<option value='ENABLED_PREFIX'" . ($uniqueid_status_display == 'ENABLED_PREFIX' ? ' selected' : '') . ">" . _QXZ("ENABLED_PREFIX") . "</option>";
        echo "<option value='ENABLED_PRESERVE'" . ($uniqueid_status_display == 'ENABLED_PRESERVE' ? ' selected' : '') . ">" . _QXZ("ENABLED_PRESERVE") . "</option>";
        echo "</select>";
        echo "</div>";
        echo "</div>";
        echo "<div class='col-md-4'>";
        echo "<div class='form-group mb-3'>";
        echo "<label for='uniqueid_status_prefix' class='form-label'>" . _QXZ("Uniqueid Status Prefix") . ":</label>";
        echo "<input type='text' class='form-control' id='uniqueid_status_prefix' name='uniqueid_status_prefix' value='$uniqueid_status_prefix'>";
        echo "</div>";
        echo "</div>";
        echo "</div>";

        echo "<div class='row'>";
        echo "<div class='col-md-6'>";
        echo "<div class='form-group mb-3'>";
        echo "<label for='state_descriptions' class='form-label'>";
        if ($sdb_selected > 0) {
            echo "<a href=\"$PHP_SELF?ADD=392111111111&container_id=$state_descriptions\">" . _QXZ("State Descriptions Banner") . "</a>";
        } else {
            echo _QXZ("State Descriptions Banner");
        }
        echo ":</label>";
        echo "<select class='form-select' id='state_descriptions' name='state_descriptions'>";
        echo "<option value='---DISABLED---'>" . _QXZ("---DISABLED---") . "</option>";
        echo "$state_descriptions_menu";
        echo "</select>";
        echo "</div>";
        echo "</div>";
        echo "<div class='col-md-6'>";
        echo "<div class='form-group mb-3'>";
        echo "<label for='agent_search_list' class='form-label'>" . _QXZ("Agent Screen Search List Restrict") . ":</label>";
        echo "<input type='text' class='form-control' id='agent_search_list' name='agent_search_list' value='$agent_search_list'>";
        echo "</div>";
        echo "</div>";
        echo "</div>";
        echo "</div>";
        echo "</div>";
        echo "</div>";

        // URL Settings
        echo "<div class='row'>";
        echo "<div class='col-12'>";
        echo "<div class='card mb-3'>";
        echo "<div class='card-header'>" . _QXZ("URL Settings") . "</div>";
        echo "<div class='card-body'>";
        echo "<div class='row'>";
        echo "<div class='col-md-6'>";
        echo "<div class='form-group mb-3'>";
        echo "<label for='web_form_address' class='form-label'>" . _QXZ("Web Form") . ":</label>";
        echo "<input type='text' class='form-control' id='web_form_address' name='web_form_address' value='$web_form_address'>";
        if ($SSenable_first_webform < 1) {
            echo "<div class='form-text text-danger'><i class='bi bi-exclamation-triangle-fill me-1'></i>" . _QXZ("DISABLED") . "</div>";
        }
        echo "</div>";
        echo "</div>";
        echo "<div class='col-md-6'>";
        if ($SSenable_second_webform > 0) {
            echo "<div class='form-group mb-3'>";
            echo "<label for='web_form_address_two' class='form-label'>" . _QXZ("Web Form Two") . ":</label>";
            echo "<input type='text' class='form-control' id='web_form_address_two' name='web_form_address_two' value='$web_form_address_two'>";
            echo "</div>";
        }
        echo "</div>";
        echo "</div>";

        if ($SSenable_third_webform > 0) {
            echo "<div class='row'>";
            echo "<div class='col-md-6'>";
            echo "<div class='form-group mb-3'>";
            echo "<label for='web_form_address_three' class='form-label'>" . _QXZ("Web Form Three") . ":</label>";
            echo "<input type='text' class='form-control' id='web_form_address_three' name='web_form_address_three' value='$web_form_address_three'>";
            echo "</div>";
            echo "</div>";
            echo "</div>";
        }

        echo "<div class='row'>";
        echo "<div class='col-md-6'>";
        echo "<div class='form-group mb-3'>";
        echo "<label for='start_call_url' class='form-label'>";
        if ($start_call_url == 'ALT') {
            echo "<a href=\"admin_url_multi.php?DB=$DB&campaign_id=$group_id&entry_type=ingroup&url_type=start\">" . _QXZ("Start Call URL") . "</a>";
        } else {
            echo _QXZ("Start Call URL");
        }
        echo ":</label>";
        echo "<input type='text' class='form-control' id='start_call_url' name='start_call_url' value='$start_call_url'>";
        if ($start_call_url == 'ALT') {
            echo "<div class='form-text'><a href=\"admin_url_multi.php?DB=$DB&campaign_id=$group_id&entry_type=ingroup&url_type=start\">" . _QXZ("Alternate Start URLs Defined") . ": $start_call_url_count</a></div>";
        }
        echo "</div>";
        echo "</div>";
        echo "<div class='col-md-6'>";
        echo "<div class='form-group mb-3'>";
        echo "<label for='dispo_call_url' class='form-label'>";
        if ($dispo_call_url == 'ALT') {
            echo "<a href=\"admin_url_multi.php?DB=$DB&campaign_id=$group_id&entry_type=ingroup&url_type=dispo\">" . _QXZ("Dispo Call URL") . "</a>";
        } else {
            echo _QXZ("Dispo Call URL");
        }
        echo ":</label>";
        echo "<input type='text' class='form-control' id='dispo_call_url' name='dispo_call_url' value='$dispo_call_url'>";
        if ($dispo_call_url == 'ALT') {
            echo "<div class='form-text'><a href=\"admin_url_multi.php?DB=$DB&campaign_id=$group_id&entry_type=ingroup&url_type=dispo\">" . _QXZ("Alternate Dispo URLs Defined") . ": $dispo_call_url_count</a></div>";
        }
        echo "</div>";
        echo "</div>";
        echo "</div>";

        echo "<div class='row'>";
        echo "<div class='col-md-6'>";
        echo "<div class='form-group mb-3'>";
        echo "<label for='na_call_url' class='form-label'>";
        if ($na_call_url == 'ALT') {
            echo "<a href=\"admin_url_multi.php?DB=$DB&campaign_id=$group_id&entry_type=ingroup&url_type=noagent\">" . _QXZ("No Agent Call URL") . "</a>";
        } else {
            echo _QXZ("No Agent Call URL");
        }
        echo ":</label>";
        echo "<input type='text' class='form-control' id='na_call_url' name='na_call_url' value='$na_call_url'>";
        if ($na_call_url == 'ALT') {
            echo "<div class='form-text'><a href=\"admin_url_multi.php?DB=$DB&campaign_id=$group_id&entry_type=ingroup&url_type=noagent\">" . _QXZ("Alternate No Agent URLs Defined") . ": $na_call_url_count</a></div>";
        }
        echo "</div>";
        echo "</div>";
        echo "<div class='col-md-6'>";
        echo "<div class='form-group mb-3'>";
        echo "<label for='enter_ingroup_url' class='form-label'>" . _QXZ("Enter In-Group URL") . ":</label>";
        echo "<input type='text' class='form-control' id='enter_ingroup_url' name='enter_ingroup_url' value='$enter_ingroup_url'>";
        echo "</div>";
        echo "</div>";
        echo "</div>";

        echo "<div class='row'>";
        echo "<div class='col-md-6'>";
        echo "<div class='form-group mb-3'>";
        echo "<label for='waiting_call_url_on' class='form-label'>" . _QXZ("Waiting Call URL On") . ":</label>";
        echo "<input type='text' class='form-control' id='waiting_call_url_on' name='waiting_call_url_on' value='$waiting_call_url_on'>";
        echo "</div>";
        echo "</div>";
        echo "<div class='col-md-6'>";
        echo "<div class='form-group mb-3'>";
        echo "<label for='waiting_call_url_off' class='form-label'>" . _QXZ("Waiting Call URL Off") . ":</label>";
        echo "<input type='text' class='form-control' id='waiting_call_url_off' name='waiting_call_url_off' value='$waiting_call_url_off'>";
        echo "</div>";
        echo "</div>";
        echo "</div>";

        echo "<div class='row'>";
        echo "<div class='col-md-6'>";
        echo "<div class='form-group mb-3'>";
        echo "<label for='add_lead_url' class='form-label'>" . _QXZ("Add Lead URL") . ":</label>";
        echo "<input type='text' class='form-control' id='add_lead_url' name='add_lead_url' value='$add_lead_url'>";
        echo "</div>";
        echo "</div>";
        echo "<div class='col-md-6'>";
        echo "<div class='form-group mb-3'>";
        echo "<label for='talk_seconds_urls' class='form-label'><a href=\"admin_url_multi.php?DB=$DB&campaign_id=$group_id&entry_type=ingroup&url_type=talk\">" . _QXZ("Talk Seconds URLs") . "</a>:</label>";
        echo "<div class='form-text'>";
        echo "<a href=\"admin_url_multi.php?DB=$DB&campaign_id=$group_id&entry_type=ingroup&url_type=talk\">" . _QXZ("Talk Seconds URLs Defined") . ": $vum_count</a> $force_disableHTML";
        echo "</div>";
        echo "</div>";
        echo "</div>";
        echo "</div>";
        echo "</div>";
        echo "</div>";
        echo "</div>";

        // Lead Population Settings
        echo "<div class='row'>";
        echo "<div class='col-12'>";
        echo "<div class='card mb-3'>";
        echo "<div class='card-header'>" . _QXZ("Lead Population Settings") . "</div>";
        echo "<div class='card-body'>";
        echo "<div class='row'>";
        echo "<div class='col-md-4'>";
        echo "<div class='form-group mb-3'>";
        echo "<label for='populate_lead_ingroup' class='form-label'>" . _QXZ("Populate Lead In-Group") . ":</label>";
        echo "<select class='form-select' id='populate_lead_ingroup' name='populate_lead_ingroup'>";
        echo "<option value='DISABLED'" . ($populate_lead_ingroup == 'DISABLED' ? ' selected' : '') . ">" . _QXZ("DISABLED") . "</option>";
        echo "<option value='ENABLED'" . ($populate_lead_ingroup == 'ENABLED' ? ' selected' : '') . ">" . _QXZ("ENABLED") . "</option>";
        echo "</select>";
        echo "</div>";
        echo "</div>";
        echo "<div class='col-md-4'>";
        echo "<div class='form-group mb-3'>";
        echo "<label for='populate_lead_province' class='form-label'>" . _QXZ("Populate Lead Province") . ":</label>";
        echo "<select class='form-select' id='populate_lead_province' name='populate_lead_province'>";
        echo "<option value='DISABLED'" . ($populate_lead_province == 'DISABLED' ? ' selected' : '') . ">" . _QXZ("DISABLED") . "</option>";
        echo "<option value='did_pattern'" . ($populate_lead_province == 'did_pattern' ? ' selected' : '') . ">did_pattern</option>";
        echo "<option value='did_description'" . ($populate_lead_province == 'did_description' ? ' selected' : '') . ">did_description</option>";
        echo "<option value='did_carrier'" . ($populate_lead_province == 'did_carrier' ? ' selected' : '') . ">did_carrier</option>";
        echo "<option value='did_custom_one'" . ($populate_lead_province == 'did_custom_one' ? ' selected' : '') . ">did_custom_one</option>";
        echo "<option value='did_custom_two'" . ($populate_lead_province == 'did_custom_two' ? ' selected' : '') . ">did_custom_two</option>";
        echo "<option value='did_custom_three'" . ($populate_lead_province == 'did_custom_three' ? ' selected' : '') . ">did_custom_three</option>";
        echo "<option value='did_custom_four'" . ($populate_lead_province == 'did_custom_four' ? ' selected' : '') . ">did_custom_four</option>";
        echo "<option value='did_custom_five'" . ($populate_lead_province == 'did_custom_five' ? ' selected' : '') . ">did_custom_five</option>";
        echo "<option value='OW_did_pattern'" . ($populate_lead_province == 'OW_did_pattern' ? ' selected' : '') . ">OW_did_pattern</option>";
        echo "<option value='OW_did_description'" . ($populate_lead_province == 'OW_did_description' ? ' selected' : '') . ">OW_did_description</option>";
        echo "<option value='OW_did_carrier'" . ($populate_lead_province == 'OW_did_carrier' ? ' selected' : '') . ">OW_did_carrier</option>";
        echo "<option value='OW_did_custom_one'" . ($populate_lead_province == 'OW_did_custom_one' ? ' selected' : '') . ">OW_did_custom_one</option>";
        echo "<option value='OW_did_custom_two'" . ($populate_lead_province == 'OW_did_custom_two' ? ' selected' : '') . ">OW_did_custom_two</option>";
        echo "<option value='OW_did_custom_three'" . ($populate_lead_province == 'OW_did_custom_three' ? ' selected' : '') . ">OW_did_custom_three</option>";
        echo "<option value='OW_did_custom_four'" . ($populate_lead_province == 'OW_did_custom_four' ? ' selected' : '') . ">OW_did_custom_four</option>";
        echo "<option value='OW_did_custom_five'" . ($populate_lead_province == 'OW_did_custom_five' ? ' selected' : '') . ">OW_did_custom_five</option>";
        echo "</select>";
        echo "</div>";
        echo "</div>";
        echo "<div class='col-md-4'>";
        echo "<div class='form-group mb-3'>";
        echo "<label for='populate_lead_owner' class='form-label'>" . _QXZ("Populate Lead Owner") . ":</label>";
        echo "<select class='form-select' id='populate_lead_owner' name='populate_lead_owner'>";
        echo "<option value='DISABLED'" . ($populate_lead_owner == 'DISABLED' ? ' selected' : '') . ">" . _QXZ("DISABLED") . "</option>";
        echo "<option value='did_pattern'" . ($populate_lead_owner == 'did_pattern' ? ' selected' : '') . ">did_pattern</option>";
        echo "<option value='did_description'" . ($populate_lead_owner == 'did_description' ? ' selected' : '') . ">did_description</option>";
        echo "<option value='did_carrier'" . ($populate_lead_owner == 'did_carrier' ? ' selected' : '') . ">did_carrier</option>";
        echo "<option value='did_custom_one'" . ($populate_lead_owner == 'did_custom_one' ? ' selected' : '') . ">did_custom_one</option>";
        echo "<option value='did_custom_two'" . ($populate_lead_owner == 'did_custom_two' ? ' selected' : '') . ">did_custom_two</option>";
        echo "<option value='did_custom_three'" . ($populate_lead_owner == 'did_custom_three' ? ' selected' : '') . ">did_custom_three</option>";
        echo "<option value='did_custom_four'" . ($populate_lead_owner == 'did_custom_four' ? ' selected' : '') . ">did





        custom_four</option>";
        echo "<option value='did_custom_five'" . ($populate_lead_owner == 'did_custom_five' ? ' selected' : '') . ">did_custom_five</option>";
        echo "<option value='OW_did_pattern'" . ($populate_lead_owner == 'OW_did_pattern' ? ' selected' : '') . ">OW_did_pattern</option>";
        echo "<option value='OW_did_description'" . ($populate_lead_owner == 'OW_did_description' ? ' selected' : '') . ">OW_did_description</option>";
        echo "<option value='OW_did_carrier'" . ($populate_lead_owner == 'OW_did_carrier' ? ' selected' : '') . ">OW_did_carrier</option>";
        echo "<option value='OW_did_custom_one'" . ($populate_lead_owner == 'OW_did_custom_one' ? ' selected' : '') . ">OW_did_custom_one</option>";
        echo "<option value='OW_did_custom_two'" . ($populate_lead_owner == 'OW_did_custom_two' ? ' selected' : '') . ">OW_did_custom_two</option>";
        echo "<option value='OW_did_custom_three'" . ($populate_lead_owner == 'OW_did_custom_three' ? ' selected' : '') . ">OW_did_custom_three</option>";
        echo "<option value='OW_did_custom_four'" . ($populate_lead_owner == 'OW_did_custom_four' ? ' selected' : '') . ">OW_did_custom_four</option>";
        echo "<option value='OW_did_custom_five'" . ($populate_lead_owner == 'OW_did_custom_five' ? ' selected' : '') . ">OW_did_custom_five</option>";
        echo "<option value='OWNERCUSTOM'" . ($populate_lead_owner == 'OWNERCUSTOM' ? ' selected' : '') . ">OWNERCUSTOM</option>";
        echo "</select>";
        echo "</div>";
        echo "</div>";
        echo "</div>";

        echo "<div class='row'>";
        echo "<div class='col-md-4'>";
        echo "<div class='form-group mb-3'>";
        echo "<label for='populate_state_areacode' class='form-label'>" . _QXZ("Populate Lead State Areacode") . ":</label>";
        echo "<select class='form-select' id='populate_state_areacode' name='populate_state_areacode'>";
        echo "<option value='DISABLED'" . ($populate_state_areacode == 'DISABLED' ? ' selected' : '') . ">" . _QXZ("DISABLED") . "</option>";
        echo "<option value='NEW_LEAD_ONLY'" . ($populate_state_areacode == 'NEW_LEAD_ONLY' ? ' selected' : '') . ">" . _QXZ("NEW_LEAD_ONLY") . "</option>";
        echo "<option value='OVERWRITE_ALWAYS'" . ($populate_state_areacode == 'OVERWRITE_ALWAYS' ? ' selected' : '') . ">" . _QXZ("OVERWRITE_ALWAYS") . "</option>";
        echo "</select>";
        echo "</div>";
        echo "</div>";
        echo "<div class='col-md-4'>";
        echo "<div class='form-group mb-3'>";
        echo "<label for='populate_lead_source' class='form-label'>" . _QXZ("Populate Lead Source") . ":</label>";
        echo "<select class='form-select' id='populate_lead_source' name='populate_lead_source'>";
        echo "<option value='DISABLED'" . ($populate_lead_source == 'DISABLED' ? ' selected' : '') . ">" . _QXZ("DISABLED") . "</option>";
        echo "<option value='INBOUND_NUMBER'" . ($populate_lead_source == 'INBOUND_NUMBER' ? ' selected' : '') . ">" . _QXZ("INBOUND_NUMBER") . "</option>";
        echo "<option value='INBOUND_DID'" . ($populate_lead_source == 'INBOUND_DID' ? ' selected' : '') . ">" . _QXZ("INBOUND_DID") . "</option>";
        echo "<option value='BLANK'" . ($populate_lead_source == 'BLANK' ? ' selected' : '') . ">" . _QXZ("BLANK") . "</option>";
        echo "</select>";
        echo "</div>";
        echo "</div>";
        echo "<div class='col-md-4'>";
        echo "<div class='form-group mb-3'>";
        echo "<label for='add_lead_timezone' class='form-label'>" . _QXZ("Add Lead Timezone") . ":</label>";
        echo "<select class='form-select' id='add_lead_timezone' name='add_lead_timezone'>";
        echo "<option value='SERVER'" . ($add_lead_timezone == 'SERVER' ? ' selected' : '') . ">" . _QXZ("SERVER") . "</option>";
        echo "<option value='PHONE_CODE_AREACODE'" . ($add_lead_timezone == 'PHONE_CODE_AREACODE' ? ' selected' : '') . ">" . _QXZ("PHONE_CODE_AREACODE") . "</option>";
        echo "</select>";
        echo "</div>";
        echo "</div>";
        echo "</div>";

        echo "<div class='row'>";
        echo "<div class='col-md-4'>";
        echo "<div class='form-group mb-3'>";
        echo "<label for='populate_lead_vendor' class='form-label'>" . _QXZ("Populate Lead Vendor") . ":</label>";
        echo "<input type='text' class='form-control' id='populate_lead_vendor' name='populate_lead_vendor' value='$populate_lead_vendor'>";
        echo "</div>";
        echo "</div>";
        echo "<div class='col-md-4'>";
        echo "<div class='form-group mb-3'>";
        echo "<label for='populate_lead_comments' class='form-label'>" . _QXZ("Populate Lead Comments") . ":</label>";
        echo "<input type='text' class='form-control' id='populate_lead_comments' name='populate_lead_comments' value='$populate_lead_comments'>";
        echo "</div>";
        echo "</div>";
        echo "<div class='col-md-4'>";
        echo "<div class='form-group mb-3'>";
        echo "<label for='areacode_filter' class='form-label'>" . _QXZ("Areacode Filter") . ":</label>";
        echo "<select class='form-select' id='areacode_filter' name='areacode_filter'>";
        echo "<option value='DISABLED'" . ($areacode_filter == 'DISABLED' ? ' selected' : '') . ">" . _QXZ("DISABLED") . "</option>";
        echo "<option value='ALLOW_ONLY'" . ($areacode_filter == 'ALLOW_ONLY' ? ' selected' : '') . ">" . _QXZ("ALLOW_ONLY") . "</option>";
        echo "<option value='DROP_ONLY'" . ($areacode_filter == 'DROP_ONLY' ? ' selected' : '') . ">" . _QXZ("DROP_ONLY") . "</option>";
        echo "</select>";
        echo "<div class='form-text'><a href=\"$PHP_SELF?ADD=3211&group_id=$group_id\">" . _QXZ("areacode filter list") . ": $vaf_count</a></div>";
        echo "</div>";
        echo "</div>";
        echo "</div>";

        echo "<div class='row'>";
        echo "<div class='col-md-4'>";
        echo "<div class='form-group mb-3'>";
        echo "<label for='areacode_filter_seconds' class='form-label'>" . _QXZ("Areacode Filter Seconds") . ":</label>";
        echo "<input type='text' class='form-control' id='areacode_filter_seconds' name='areacode_filter_seconds' value='$areacode_filter_seconds'>";
        echo "</div>";
        echo "</div>";
        echo "<div class='col-md-4'>";
        echo "<div class='form-group mb-3'>";
        echo "<label for='areacode_filter_action' class='form-label'>" . _QXZ("Areacode Filter Action") . ":</label>";
        echo "<select class='form-select' id='areacode_filter_action' name='areacode_filter_action'>";
        echo "<option value='CALLMENU'" . ($areacode_filter_action == 'CALLMENU' ? ' selected' : '') . ">" . _QXZ("CALLMENU") . "</option>";
        echo "<option value='INGROUP'" . ($areacode_filter_action == 'INGROUP' ? ' selected' : '') . ">" . _QXZ("INGROUP") . "</option>";
        echo "<option value='DID'" . ($areacode_filter_action == 'DID' ? ' selected' : '') . ">" . _QXZ("DID") . "</option>";
        echo "<option value='MESSAGE'" . ($areacode_filter_action == 'MESSAGE' ? ' selected' : '') . ">" . _QXZ("MESSAGE") . "</option>";
        echo "<option value='EXTENSION'" . ($areacode_filter_action == 'EXTENSION' ? ' selected' : '') . ">" . _QXZ("EXTENSION") . "</option>";
        echo "<option value='VOICEMAIL'" . ($areacode_filter_action == 'VOICEMAIL' ? ' selected' : '') . ">" . _QXZ("VOICEMAIL") . "</option>";
        echo "<option value='VMAIL_NO_INST'" . ($areacode_filter_action == 'VMAIL_NO_INST' ? ' selected' : '') . ">" . _QXZ("VMAIL_NO_INST") . "</option>";
        echo "</select>";
        echo "</div>";
        echo "</div>";
        echo "<div class='col-md-4'>";
        echo "<div class='form-group mb-3'>";
        echo "<label for='areacode_filter_action_value' class='form-label'>" . _QXZ("Areacode Filter Action Value") . ":</label>";
        echo "<input type='text' class='form-control' id='areacode_filter_action_value' name='areacode_filter_action_value' value='$areacode_filter_action_value'>";
        echo "</div>";
        echo "</div>";
        echo "</div>";
        echo "</div>";
        echo "</div>";
        echo "</div>";

        // Survey Settings
        echo "<div class='row'>";
        echo "<div class='col-12'>";
        echo "<div class='card mb-3'>";
        echo "<div class='card-header'>" . _QXZ("Survey Settings") . "</div>";
        echo "<div class='card-body'>";
        echo "<div class='row'>";
        echo "<div class='col-md-4'>";
        echo "<div class='form-group mb-3'>";
        echo "<label for='inbound_survey' class='form-label'>" . _QXZ("After Call Survey") . ":</label>";
        echo "<select class='form-select' id='inbound_survey' name='inbound_survey'>";
        echo "<option value='DISABLED'" . ($inbound_survey == 'DISABLED' ? ' selected' : '') . ">" . _QXZ("DISABLED") . "</option>";
        echo "<option value='ENABLED'" . ($inbound_survey == 'ENABLED' ? ' selected' : '') . ">" . _QXZ("ENABLED") . "</option>";
        echo "</select>";
        echo "</div>";
        echo "</div>";
        echo "<div class='col-md-4'>";
        echo "<div class='form-group mb-3'>";
        echo "<label for='inbound_survey_filename' class='form-label'>" . _QXZ("After Call Survey Accept Filename") . ":</label>";
        echo "<div class='input-group'>";
        echo "<input type='text' class='form-control' id='inbound_survey_filename' name='inbound_survey_filename' value='$inbound_survey_filename'>";
        echo "<button class='btn btn-outline-secondary' type='button' onclick=\"launch_chooser('inbound_survey_filename','date');\"><i class='bi bi-music-note-list'></i></button>";
        echo "</div>";
        echo "</div>";
        echo "</div>";
        echo "<div class='col-md-4'>";
        echo "<div class='form-group mb-3'>";
        echo "<label for='inbound_survey_accept_digit' class='form-label'>" . _QXZ("After Call Survey Accept Digit") . ":</label>";
        echo "<select class='form-select' id='inbound_survey_accept_digit' name='inbound_survey_accept_digit'>";
        for ($i = 0; $i <= 9; $i++) {
            echo "<option value='$i'" . ($i == $inbound_survey_accept_digit ? ' selected' : '') . ">$i</option>";
        }
        echo "</select>";
        echo "</div>";
        echo "</div>";
        echo "</div>";

        echo "<div class='row'>";
        echo "<div class='col-md-6'>";
        echo "<div class='form-group mb-3'>";
        echo "<label for='inbound_survey_question_filename' class='form-label'>" . _QXZ("After Call Question Filename") . ":</label>";
        echo "<div class='input-group'>";
        echo "<input type='text' class='form-control' id='inbound_survey_question_filename' name='inbound_survey_question_filename' value='$inbound_survey_question_filename'>";
        echo "<button class='btn btn-outline-secondary' type='button' onclick=\"launch_chooser('inbound_survey_question_filename','date');\"><i class='bi bi-music-note-list'></i></button>";
        echo "</div>";
        echo "</div>";
        echo "</div>";
        echo "<div class='col-md-6'>";
        echo "<div class='form-group mb-3'>";
        echo "<label for='inbound_survey_callmenu' class='form-label'><a href=\"$PHP_SELF?ADD=3511&menu_id=$inbound_survey_callmenu\">" . _QXZ("After Call End Call Menu") . "</a>:</label>";
        echo "<select class='form-select' id='inbound_survey_callmenu' name='inbound_survey_callmenu'>";
        echo "$call_menu_list";
        echo "<option value='$inbound_survey_callmenu' selected>$inbound_survey_callmenu</option>";
        echo "</select>";
        echo "</div>";
        echo "</div>";
        echo "</div>";
        echo "</div>";
        echo "</div>";
        echo "</div>";

        // Custom Fields
        echo "<div class='row'>";
        echo "<div class='col-12'>";
        echo "<div class='card mb-3'>";
        echo "<div class='card-header'>" . _QXZ("Custom Fields") . "</div>";
        echo "<div class='card-body'>";
        echo "<div class='row'>";
        echo "<div class='col-md-6'>";
        echo "<div class='form-group mb-3'>";
        echo "<label for='custom_one' class='form-label'>" . _QXZ("Custom 1") . ":</label>";
        echo "<input type='text' class='form-control' id='custom_one' name='custom_one' value='$custom_one'>";
        echo "</div>";
        echo "</div>";
        echo "<div class='col-md-6'>";
        echo "<div class='form-group mb-3'>";
        echo "<label for='custom_two' class='form-label'>" . _QXZ("Custom 2") . ":</label>";
        echo "<input type='text' class='form-control' id='custom_two' name='custom_two' value='$custom_two'>";
        echo "</div>";
        echo "</div>";
        echo "</div>";

        echo "<div class='row'>";
        echo "<div class='col-md-6'>";
        echo "<div class='form-group mb-3'>";
        echo "<label for='custom_three' class='form-label'>" . _QXZ("Custom 3") . ":</label>";
        echo "<input type='text' class='form-control' id='custom_three' name='custom_three' value='$custom_three'>";
        echo "</div>";
        echo "</div>";
        echo "<div class='col-md-6'>";
        echo "<div class='form-group mb-3'>";
        echo "<label for='custom_four' class='form-label'>" . _QXZ("Custom 4") . ":</label>";
        echo "<input type='text' class='form-control' id='custom_four' name='custom_four' value='$custom_four'>";
        echo "</div>";
        echo "</div>";
        echo "</div>";

        echo "<div class='row'>";
        echo "<div class='col-md-6'>";
        echo "<div class='form-group mb-3'>";
        echo "<label for='custom_five' class='form-label'>" . _QXZ("Custom 5") . ":</label>";
        echo "<input type='text' class='form-control' id='custom_five' name='custom_five' value='$custom_five'>";
        echo "</div>";
        echo "</div>";
        echo "</div>";
        echo "</div>";
        echo "</div>";
        echo "</div>";

        // Callback Queue Settings
        echo "<div class='row'>";
        echo "<div class='col-12'>";
        echo "<div class='card mb-3'>";
        echo "<div class='card-header'>" . _QXZ("Callback Queue Settings") . "</div>";
        echo "<div class='card-body'>";
        echo "<div class='row'>";
        echo "<div class='col-md-4'>";
        echo "<div class='form-group mb-3'>";
        echo "<label for='icbq_expiration_hours' class='form-label'>" . _QXZ("Callback Queue Expire Hours") . ":</label>";
        echo "<input type='text' class='form-control' id='icbq_expiration_hours' name='icbq_expiration_hours' value='$icbq_expiration_hours'>";
        echo "</div>";
        echo "</div>";
        echo "<div class='col-md-4'>";
        echo "<div class='form-group mb-3'>";
        echo "<label for='icbq_call_time_id' class='form-label'><a href=\"$PHP_SELF?ADD=311111111&call_time_id=$icbq_call_time_id\">" . _QXZ("Callback Queue Call Time") . "</a>:</label>";
        echo "<select class='form-select' id='icbq_call_time_id' name='icbq_call_time_id'>";
        echo "$call_times_list";
        echo "<option value='$icbq_call_time_id' selected>$icbq_call_time_id - $call_timename_list[$icbq_call_time_id]</option>";
        echo "</select>";
        echo "</div>";
        echo "</div>";
        echo "<div class='col-md-4'>";
        echo "<div class='form-group mb-3'>";
        echo "<label for='icbq_dial_filter' class='form-label'>" . _QXZ("Callback Queue Dial Filter") . ":</label>";
        echo "<select class='form-select' id='icbq_dial_filter' name='icbq_dial_filter'>";
        echo "<option value='NONE'" . ($icbq_dial_filter == 'NONE' ? ' selected' : '') . ">" . _QXZ("NONE") . "</option>";
        echo "<option value=\"DNC_INTERNAL\"" . ($icbq_dial_filter == 'DNC_INTERNAL' ? ' selected' : '') . ">" . _QXZ("DNC_INTERNAL") . "</option>";
        echo "<option value=\"DNC_CAMPAIGN\"" . ($icbq_dial_filter == 'DNC_CAMPAIGN' ? ' selected' : '') . ">" . _QXZ("DNC_CAMPAIGN") . "</option>";
        echo "<option value=\"DNC_INTERNAL_AND_CAMPAIGN\"" . ($icbq_dial_filter == 'DNC_INTERNAL_AND_CAMPAIGN' ? ' selected' : '') . ">" . _QXZ("DNC_INTERNAL_AND_CAMPAIGN") . "</option>";
        echo "<option value=\"DNC_INTERNAL_WITH_AREACODE\"" . ($icbq_dial_filter == 'DNC_INTERNAL_WITH_AREACODE' ? ' selected' : '') . ">" . _QXZ("DNC_INTERNAL_WITH_AREACODE") . "</option>";
        echo "<option value=\"DNC_CAMPAIGN_WITH_AREACODE\"" . ($icbq_dial_filter == 'DNC_CAMPAIGN_WITH_AREACODE' ? ' selected' : '') . ">" . _QXZ("DNC_CAMPAIGN_WITH_AREACODE") . "</option>";
        echo "<option value=\"DNC_INTERNAL_AND_CAMPAIGN_WITH_AREACODE\"" . ($icbq_dial_filter == 'DNC_INTERNAL_AND_CAMPAIGN_WITH_AREACODE' ? ' selected' : '') . ">" . _QXZ("DNC_INTERNAL_AND_CAMPAIGN_WITH_AREACODE") . "</option>";
        echo "</select>";
        echo "</div>";
        echo "</div>";
        echo "</div>";

        echo "<div class='alert alert-info'>";
        if ($call_times_to_print > 0) {
            echo "<i class='bi bi-info-circle-fill me-2'></i>" . _QXZ("Holidays defined for this callback queue call time") . ": $icbq_ct_hrs";
        } else {
            echo "<i class='bi bi-exclamation-triangle-fill me-2'></i>" . _QXZ("Call time not found") . "!: $icbq_call_time_id";
        }
        echo "</div>";
        echo "</div>";
        echo "</div>";
        echo "</div>";

        // Park File and Group Handling
        echo "<div class='row'>";
        echo "<div class='col-md-6'>";
        echo "<div class='card mb-3'>";
        echo "<div class='card-header'>" . _QXZ("Park File Settings") . "</div>";
        echo "<div class='card-body'>";
        echo "<div class='form-group mb-3'>";
        echo "<label for='park_file_name' class='form-label'>" . _QXZ("Park Music-on-Hold") . ":</label>";
        echo "<div class='input-group'>";
        echo "<input type='text' class='form-control' id='park_file_name' name='park_file_name' value='$park_file_name'>";
        echo "<button class='btn btn-outline-secondary' type='button' onclick=\"launch_moh_chooser('park_file_name','moh');\"><i class='bi bi-music-note-beamed'></i></button>";
        echo "</div>";
        echo "</div>";
        echo "</div>";
        echo "</div>";
        echo "</div>";

        echo "<div class='col-md-6'>";
        echo "<div class='card mb-3'>";
        echo "<div class='card-header'>" . _QXZ("Group Handling") . "</div>";
        echo "<div class='card-body'>";
        if ($SSallow_emails > 0 || $SSallow_chats > 0) {
            echo "<div class='form-group mb-3'>";
            echo "<label for='group_handling' class='form-label'>" . _QXZ("Group Handling") . ":</label>";
            echo "<select class='form-select' id='group_handling' name='group_handling'>";
            echo "<option value='PHONE'" . ($group_handling == 'PHONE' ? ' selected' : '') . ">" . _QXZ("PHONE") . "</option>";
            if ($SSallow_emails > 0) {
                echo "<option value='EMAIL'" . ($group_handling == 'EMAIL' ? ' selected' : '') . ">" . _QXZ("EMAIL") . "</option>";
            }
            if ($SSallow_chats > 0) {
                echo "<option value='CHAT'" . ($group_handling == 'CHAT' ? ' selected' : '') . ">" . _QXZ("CHAT") . "</option>";
            }
            echo "</select>";
            echo "</div>";
        } else {
            echo "<input type='hidden' name='group_handling' value='PHONE'>";
        }

        if ($SSinbound_answer_config > 0) {
            echo "<div class='form-group mb-3'>";
            echo "<label for='answer_signal' class='form-label'>" . _QXZ("Answer Signal") . ":</label>";
            echo "<select class='form-select' id='answer_signal' name='answer_signal'>";
            echo "<option value='START'" . ($answer_signal == 'START' ? ' selected' : '') . ">" . _QXZ("START") . "</option>";
            echo "<option value='ROUTE'" . ($answer_signal == 'ROUTE' ? ' selected' : '') . ">" . _QXZ("ROUTE") . "</option>";
            echo "<option value='NONE'" . ($answer_signal == 'NONE' ? ' selected' : '') . ">" . _QXZ("NONE") . "</option>";
            echo "</select>";
            echo "</div>";
        } else {
            echo "<input type='hidden' name='answer_signal' value='START'>";
        }

        if ($SSbrowser_call_alerts > 0) {
            echo "<div class='form-group mb-3'>";
            echo "<label for='browser_alert_volume' class='form-label'>" . _QXZ("Browser Alert Volume") . ":</label>";
            echo "<select class='form-select' id='browser_alert_volume' name='browser_alert_volume'>";
            $bav = 100;
            while ($bav >= 0) {
                echo "<option value='$bav'" . ($bav == $browser_alert_volume ? ' selected' : '') . ">$bav</option>";
                $bav = ($bav - 5);
            }
            echo "</select>";
            echo "</div>";
        } else {
            echo "<input type='hidden' name='browser_alert_volume' value='$browser_alert_volume'>";
            echo "<input type='hidden' name='browser_alert_sound' value='$browser_alert_sound'>";
        }
        echo "</div>";
        echo "</div>";
        echo "</div>";
        echo "</div>";

        // Quality Control Settings
        if ($SSqc_features_active > 0) {
            echo "<div class='row'>";
            echo "<div class='col-12'>";
            echo "<div class='card mb-3'>";
            echo "<div class='card-header'>" . _QXZ("Quality Control Settings") . "</div>";
            echo "<div class='card-body'>";
            echo "<div class='row'>";
            echo "<div class='col-md-4'>";
            echo "<div class='form-group mb-3'>";
            echo "<label for='qc_statuses_id' class='form-label'>" . _QXZ("QC Statuses") . ":</label>";
            echo "<select class='form-select' id='qc_statuses_id' name='qc_statuses_id'>";
            echo "<option value='$qc_statuses_id'>" . (!$qc_statuses_id ? "NONE" : "$qc_statuses_id - $qc_containers_list[$qc_statuses_id]") . "</option>";
            echo "$QCcontainers_list";
            echo "</select>";
            echo "</div>";
            echo "</div>";
            echo "<div class='col-md-4'>";
            echo "<div class='form-group mb-3'>";
            echo "<label for='qc_scorecard_id' class='form-label'>" . _QXZ("QC Scorecard") . ":</label>";
            echo "<select class='form-select' id='qc_scorecard_id' name='qc_scorecard_id'>";
            echo "<option value='$qc_scorecard_id'>" . (!$qc_scorecard_id ? "NONE" : "$qc_scorecard_id - $scorecardname_list[$qc_scorecard_id]") . "</option>";
            echo "$QCscorecards_list";
            echo "</select>";
            echo "</div>";
            echo "</div>";
            echo "<div class='col-md-4'>";
            echo "<div class='form-group mb-3'>";
            echo "<label for='qc_web_form_address' class='form-label'>" . _QXZ("QC WebForm") . ":</label>";
            echo "<input type='text' class='form-control' id='qc_web_form_address' name='qc_web_form_address' value='$qc_web_form_address'>";
            echo "</div>";
            echo "</div>";
            echo "</div>";
            echo "</div>";
            echo "</div>";
            echo "</div>";
        }

        // Action buttons
        echo "<div class='row'>";
        echo "<div class='col-12'>";
        echo "<div class='card'>";
        echo "<div class='card-body text-center'>";
        echo "<input type='hidden' name='form_end' value=\"END\">";
        echo "<button type='submit' class='btn btn-primary btn-lg' name='SUBMIT' value='" . _QXZ("SUBMIT") . "'><i class='bi bi-check-circle me-2'></i>" . _QXZ("SUBMIT") . "</button>";
        echo "</div>";
        echo "</div>";
        echo "</div>";
        echo "</div>";
        echo "</div>";
        echo "</div>";

        // Agent Ranks Tab
        echo "<div class='tab-pane fade' id='agents' role='tabpanel' aria-labelledby='agents-tab'>";
        echo "<div class='card'>";
        echo "<div class='card-header'>";
        echo "<h5 class='mb-0'><i class='bi bi-people-fill me-2'></i>" . _QXZ("AGENT RANKS FOR THIS INBOUND GROUP") . "</h5>";
        echo "</div>";
        echo "<div class='card-body'>";
        echo "<div class='table-responsive'>";
        echo "<table class='table table-striped table-hover'>";
        echo "<thead class='table-dark'>";
        echo "<tr>";
        echo "<th>" . _QXZ("USER") . "</th>";
        echo "<th>" . _QXZ("GROUP") . "</th>";
        echo "<th>" . _QXZ("SELECTED") . "</th>";
        echo "<th>" . _QXZ("RANK") . "</th>";
        echo "<th>" . _QXZ("GRADE") . "</th>";
        echo "<th>" . _QXZ("DAILY LIMIT") . "</th>";
        echo "<th>" . _QXZ("CALLS TODAY") . "</th>";
        echo "</tr>";
        echo "</thead>";
        echo "<tbody>";

        $checkbox_count = 0;
        $o = 0;
        $users_output = '';
        $checkbox_list = '';

        while ($users_to_print > $o) {
            $o++;

            if (preg_match('/1$|3$|5$|7$|9$/i', $o)) {
                $row_class = '';
            } else {
                $row_class = 'table-secondary';
            }

            $checkbox_field = "CHECK_$ARIG_user[$o]$US$group_id";
            $rank_field = "RANK_$ARIG_user[$o]$US$group_id";
            $grade_field = "GRADE_$ARIG_user[$o]$US$group_id";
            $limit_field = "LIMIT_$ARIG_user[$o]$US$group_id";
            $checkbox_list .= "|$checkbox_field";
            $checkbox_count++;

            $users_output .= "<tr class='$row_class'>";
            $users_output .= "<td><a href=\"$PHP_SELF?ADD=3&user=$ARIG_user[$o]\" class='text-decoration-none'>$ARIG_user[$o]</a> - $ARIG_name[$o]</td>";
            $users_output .= "<td>$ARIG_group[$o]</td>";
            $users_output .= "<td><div class='form-check'><input class='form-check-input' type='checkbox' name=\"$checkbox_field\" id=\"$checkbox_field\" value=\"YES\"$ARIG_check[$o]></div></td>";
            $users_output .= "<td><select class='form-select form-select-sm' name=$rank_field>";
            $h = 9;
            while ($h >= -9) {
                $users_output .= "<option value=\"$h\"" . ($h == $ARIG_rank[$o] ? ' selected' : '') . ">$h</option>";
                $h--;
            }
            $users_output .= "</select></td>";
            $users_output .= "<td><select class='form-select form-select-sm' name=$grade_field>";
            $h = 10;
            while ($h >= 1) {
                $users_output .= "<option value=\"$h\"" . ($h == $ARIG_grade[$o] ? ' selected' : '') . ">$h</option>";
                $h--;
            }
            $users_output .= "</select></td>";
            $users_output .= "<td><input type='text' class='form-control form-control-sm' name=$limit_field size='5' maxlength='4' value=\"$ARIG_limit[$o]\"></td>";
            $users_output .= "<td>$ARIG_calls[$o]</td>";
            $users_output .= "</tr>";
        }

        echo $users_output;
        echo "</tbody>";
        echo "</table>";
        echo "</div>";

        echo "<div class='row mt-3'>";
        echo "<div class='col-md-6'>";
        echo "<div class='form-check'>";
        echo "<input class='form-check-input' type='checkbox' id='selectAllAgents' onchange=\"toggleAllCheckboxes('agents', this.checked);\">";
        echo "<label class='form-check-label' for='selectAllAgents'>" . _QXZ("Select All") . "</label>";
        echo "</div>";
        echo "</div>";
        echo "<div class='col-md-6 text-end'>";
        echo "<button type='submit' class='btn btn-primary' name='submit' value='" . _QXZ("SUBMIT") . "'><i class='bi bi-check-circle me-2'></i>" . _QXZ("SUBMIT") . "</button>";
        echo "</div>";
        echo "</div>";
        echo "</div>";
        echo "</div>";
        echo "</div>";

        // Related Items Tab
        echo "<div class='tab-pane fade' id='related' role='tabpanel' aria-labelledby='related-tab'>";
        echo "<div class='row'>";
        echo "<div class='col-md-6'>";
        echo "<div class='card mb-3'>";
        echo "<div class='card-header'>";
        echo "<h6 class='mb-0'><i class='bi bi-telephone-forward-fill me-2'></i>" . _QXZ("DIDS USING THIS IN-GROUP") . "</h6>";
        echo "</div>";
        echo "<div class='card-body'>";
        if ($dids_to_print > 0) {
            echo "<ul class='list-group list-group-flush'>";
            $o = 0;
            while ($dids_to_print > $o) {
                $row = mysqli_fetch_row($rslt);
                echo "<li class='list-group-item'><a href=\"$PHP_SELF?ADD=3311&did_id=$row[0]\" class='text-decoration-none'>$row[1]</a> - $row[2]</li>";
                $o++;
            }
            echo "</ul>";
        } else {
            echo "<p class='text-muted'>" . _QXZ("No DIDs found") . "</p>";
        }
        echo "</div>";
        echo "</div>";
        echo "</div>";

        echo "<div class='col-md-6'>";
        echo "<div class='card mb-3'>";
        echo "<div class='card-header'>";
        echo "<h6 class='mb-0'><i class='bi bi-list-ul me-2'></i>" . _QXZ("CALL MENUS USING THIS IN-GROUP") . "</h6>";
        echo "</div>";
        echo "<div class='card-body'>";
        if ($cms_to_print > 0) {
            echo "<ul class='list-group list-group-flush'>";
            $o = 0;
            while ($cms_to_print > $o) {
                $row = mysqli_fetch_row($rslt);
                echo "<li class='list-group-item'><a href=\"$PHP_SELF?ADD=3511&menu_id=$row[0]\" class='text-decoration-none'>$row[0]</a> - $row[1]</li>";
                $o++;
            }
            echo "</ul>";
        } else {
            echo "<p class='text-muted'>" . _QXZ("No Call Menus found") . "</p>";
        }
        echo "</div>";
        echo "</div>";
        echo "</div>";
        echo "</div>";

        echo "<div class='row'>";
        echo "<div class='col-md-6'>";
        echo "<div class='card mb-3'>";
        echo "<div class='card-header'>";
        echo "<h6 class='mb-0'><i class='bi bi-telephone-inbound-fill me-2'></i>" . _QXZ("CAMPAIGNS USING THIS IN-GROUP") . "</h6>";
        echo "</div>";
        echo "<div class='card-body'>";
        if ($campin_to_print > 0) {
            echo "<ul class='list-group list-group-flush'>";
            $o = 0;
            while ($campin_to_print > $o) {
                $row = mysqli_fetch_row($rslt);
                echo "<li class='list-group-item'><a href=\"$PHP_SELF?ADD=31&campaign_id=$row[0]\" class='text-decoration-none'>$row[0]</a> - $row[1]</li>";
                $o++;
            }
            echo "</ul>";
        } else {
            echo "<p class='text-muted'>" . _QXZ("No Campaigns found") . "</p>";
        }
        echo "</div>";
        echo "</div>";
        echo "</div>";

        echo "<div class='col-md-6'>";
        echo "<div class='card mb-3'>";
        echo "<div class='card-header'>";
        echo "<h6 class='mb-0'><i class='bi bi-check-circle-fill me-2'></i>" . _QXZ("CAMPAIGNS ALLOWING THIS IN-GROUP") . "</h6>";
        echo "</div>";
        echo "<div class='card-body'>";
        if ($campin_to_print > 0) {
            echo "<ul class='list-group list-group-flush'>";
            $o = 0;
            while ($campin_to_print > $o) {
                $row = mysqli_fetch_row($rslt);
                echo "<li class='list-group-item'><a href=\"$PHP_SELF?ADD=31&campaign_id=$row[0]\" class='text-decoration-none'>$row[0]</a> - $row[1]</li>";
                $o++;
            }
            echo "</ul>";
        } else {
            echo "<p class='text-muted'>" . _QXZ("No Campaigns found") . "</p>";
        }
        echo "</div>";
        echo "</div>";
        echo "</div>";
        echo "</div>";
        echo "</div>";
        echo "</div>";
        echo "</div>";

        echo "</form>";

        // Audio elements for browser alerts
        if ($SSbrowser_call_alerts > 0) {
            $bas = 0;
            $bas_embed_output = '';
            while ($browser_alert_sounds_listARY_ct > $bas) {
                $bas_embed_output .= "<audio id='BAS_$browser_alert_sounds_listARY[$bas]'><source src=\"../agc/sounds/" . $browser_alert_sounds_listARY[$bas] . ".mp3\" type=\"audio/mpeg\"></audio>\n";
                $bas++;
            }
            echo $bas_embed_output;
        }

        echo "</div>";
        echo "</div>";
        echo "</div>";

        // JavaScript for modern UI functionality
        echo "<script>
        // Function to toggle all checkboxes
        function toggleAllCheckboxes(tabId, checked) {
            const checkboxes = document.querySelectorAll('#' + tabId + ' input[type=\"checkbox\"]');
            checkboxes.forEach(checkbox => {
                checkbox.checked = checked;
            });
        }

        // Function to play browser sound
        function play_browser_sound(soundFieldId, volumeFieldId) {
            const soundSelect = document.getElementById(soundFieldId);
            const volumeSelect = document.getElementById(volumeFieldId);
            const selectedSound = soundSelect.value;
            const volume = volumeSelect.value / 100;
            
            if (selectedSound && selectedSound !== '---NONE---' && selectedSound !== '---DISABLED---') {
                const audio = document.getElementById('BAS_' + selectedSound);
                if (audio) {
                    audio.volume = volume;
                    audio.play().catch(e => console.error('Error playing sound:', e));
                }
            }
        }

        // Initialize tooltips
        document.addEventListener('DOMContentLoaded', function() {
            const tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle=\"tooltip\"]'));
            tooltipTriggerList.map(function (tooltipTriggerEl) {
                return new bootstrap.Tooltip(tooltipTriggerEl);
            });
        });

        // Dynamic form field visibility
        function dynamic_call_action(fieldId, selectedValue, currentValue, containerId) {
            // Implementation for dynamic field visibility based on selection
            const container = document.getElementById(containerId);
            if (container) {
                // Show/hide relevant fields based on selection
                container.style.display = selectedValue === currentValue ? 'block' : 'none';
            }
        }

        // Color picker functionality
        function updateColorPreview(colorFieldId, previewId) {
            const colorField = document.getElementById(colorFieldId);
            const preview = document.getElementById(previewId);
            if (colorField && preview) {
                preview.style.backgroundColor = colorField.value;
            }
        }

        // Initialize color preview
        document.addEventListener('DOMContentLoaded', function() {
            const groupColorField = document.getElementById('group_color');
            const colorPreview = document.getElementById('group_color_td');
            if (groupColorField && colorPreview) {
                groupColorField.addEventListener('input', function() {
                    colorPreview.style.backgroundColor = this.value;
                });
            }
        });
        </script>";

    } else {
        echo "<div class='alert alert-danger'><i class='bi bi-exclamation-triangle-fill me-2'></i>" . _QXZ("You do not have permission to view this page") . "</div>";
    }
}
?>